(window.webpackJsonp=window.webpackJsonp||[]).push([[28],{"./bundles/sf-diagramcomponent.js":function(e,t,i){"use strict";i.r(t);i("./modules/sf-diagramcomponent.js")},"./modules/sf-diagramcomponent.js":function(e,t){function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}window.sfBlazor=window.sfBlazor||{},window.sfBlazor.Diagram=function(){"use strict";var e=function(){function e(e,t,i,n){this.x=Number.MAX_VALUE,this.y=Number.MAX_VALUE,this.width=0,this.height=0,void 0===e||void 0===t?(e=t=Number.MAX_VALUE,i=n=0):(void 0===i&&(i=0),void 0===n&&(n=0)),this.x=e,this.y=t,this.width=i,this.height=n}return e.empty=new e(Number.MAX_VALUE,Number.MIN_VALUE,0,0),e}(),t=function(e,t){this.width=e,this.height=t};function n(e,t){for(var i=t.split(";"),n=0;n<i.length;n++){var a=i[n].split(":");2===a.length&&(e.style[a[0].trim()]=a[1].trim())}}function a(e,t){for(var i=Object.keys(t),a=0;a<i.length;a++)"style"!==i[a]?e.setAttribute(i[a],t[i[a]]):n(e,t[i[a]])}function r(e,t,i){for(var n=e;n&&!(i?n.id===t:o(n,t));)n=n.parentNode;return n}function o(e,t){return(" "+("object"===i(e.className)?e.className.animVal:e.className)+" ").indexOf(" "+t+" ")>-1}var l=function(){function e(e,t){var i=this;this.over=function(e){for(var t,n=document.getElementById("clonedNode"),a=i.symbolPaletteInstance.length-1;a>=0;a--)if(e.dragData.draggable.id===i.symbolPaletteInstance[a].id){t=i.symbolPaletteInstance[a].componentInstance;break}if(t&&t.invokeMethodAsync("SymbolPaletteDragEnter",e.target.id.split("_")[0]),n){sf.base.remove(n);var r=document.getElementsByClassName("e-cloneproperties e-draganddrop e-dragclone");r[0].style.width="1px",r[0].style.height="1px"}},this.drop=function(e){for(var t,n=i.symbolPaletteInstance.length-1;n>=0;n--)if(e.dragData.draggable.id===i.symbolPaletteInstance[n].id){t=i.symbolPaletteInstance[n].componentInstance;break}var a=r(e.target,"e-diagram");if(a&&e.event.changedTouches&&e.event.changedTouches.length>0){var o=void 0;for(n=i.symbolPaletteInstance.length-1;n>=0;n--){o=i.symbolPaletteInstance[n].componentInstance;break}o&&window.sfBlazor.Diagram.invokeDiagramEvents(e.event,o,void 0,e),t&&t.invokeMethodAsync("SymbolPaletteDrop",a.id,!0)}else t&&t.invokeMethodAsync("SymbolPaletteDrop",a.id,!1);sf.base.remove(e.droppedElement)},this.out=function(e){for(var t,n=i.symbolPaletteInstance.length-1;n>=0;n--)if(e.target&&e.target.children[0].id===i.symbolPaletteInstance[n].id||e.target&&e.target.parentNode&&e.target.parentNode.parentNode&&e.target.parentNode.parentNode.parentElement&&e.target.parentNode.parentNode.parentElement.id===i.symbolPaletteInstance[n].id||i.draggable.target&&i.draggable.target.id==i.symbolPaletteInstance[n].id){t=i.symbolPaletteInstance[n].componentInstance;break}t&&(e.evt.changedTouches&&e.evt.changedTouches.length>0&&window.sfBlazor.Diagram.invokeDiagramEvents(e.evt,t,void 0,e),t.invokeMethodAsync("SymbolPaletteDragLeave"))},this.helper=function(e){var t=document.getElementsByClassName("e-control e-accordion")[0],i=sf.base.createElement("div",{className:"e-cloneproperties e-draganddrop e-dragclone",styles:'color:"transparent" height:"auto",  width:'+t.offsetWidth}),n=document.getElementById("previewID");return null===n&&(n=e.sender.target),n?(i.setAttribute("id","helperElement"),document.body.appendChild(i),i):null},this.dragStart=function(e){e.bindEvents(e.dragElement)},this.drag=function(e){if(r(e.target,"e-diagram")){if(e.event.touches&&e.event.touches.length>0){var t=void 0;for(o=i.symbolPaletteInstance.length-1;o>=0;o--)if(e.element.id===i.symbolPaletteInstance[o].id){t=i.symbolPaletteInstance[o].componentInstance;break}t&&window.sfBlazor.Diagram.invokeDiagramEvents(e.event,t,void 0,e)}}else{for(var n=document.getElementById("previewID"),a=void 0,o=i.symbolPaletteInstance.length-1;o>=0;o--)if(e.element.id===i.symbolPaletteInstance[o].id){a=i.symbolPaletteInstance[o].allowDrag;break}if(n){n.style.visibility="";var l=n.cloneNode(!0);l.style.display="Block",l.style.visibility=!0,l.setAttribute("class","e-cloneproperties e-draganddrop e-dragclone"),l.setAttribute("id","clonedNode");var s=document.getElementById("helperElement");s&&s.children[0]&&s.removeChild(s.children[0]),a||(s.style.opacity="0"),s.appendChild(l)}}},this.dragStop=function(e){var t=document.getElementsByClassName("e-cloneproperties e-draganddrop e-dragclone");if(t.length>0&&(t[0].style.width="1px",t[0].style.height="1px"),t.length>1)for(var n=t.length-1;n>0;n--)"helperElement"==t[n].id&&t[n].remove();if(!r(e.target,"e-diagram")){var a=document.getElementById("helperElement");a&&a.remove();for(var o=void 0,l=i.symbolPaletteInstance.length-1;l>=0;l--)if(e.element.id===i.symbolPaletteInstance[l].id){o=i.symbolPaletteInstance[l].componentInstance;break}o&&o.invokeMethodAsync("ElementDropToOutSideDiagram")}},this.symbolPaletteInstance=t,e&&this.initializeDrag(e)}return e.prototype.initializeDrag=function(e){var t=e.children[0];this.draggable=new sf.base.Draggable(t,{dragTarget:".e-symbol-draggable",helper:this.helper,dragStart:this.dragStart,drag:this.drag,dragStop:this.dragStop,preventDefault:!1});for(var i=document.getElementsByClassName("e-control e-diagram e-lib e-droppable e-tooltip"),n=0;n<i.length;n++)this.droppable=new sf.base.Droppable(i[n],{accept:".e-dragclone",drop:this.drop,over:this.over,out:this.out});for(var a=document.getElementsByClassName("e-acrdn-header-content"),r=0;r<a.length;r++)a[r].style.textDecoration="inherit"},e.prototype.destroy=function(){this.draggable.destroy()},e}(),s=function(e,t,i,n){return new(i||(i=Promise))((function(a,r){function o(e){try{s(n.next(e))}catch(e){r(e)}}function l(e){try{s(n.throw(e))}catch(e){r(e)}}function s(e){e.done?a(e.value):new i((function(t){t(e.value)})).then(o,l)}s((n=n.apply(e,t||[])).next())}))},d=function(e,t){var i,n,a,r,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return r={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function l(r){return function(l){return function(r){if(i)throw new TypeError("Generator is already executing.");for(;o;)try{if(i=1,n&&(a=2&r[0]?n.return:r[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,r[1])).done)return a;switch(n=0,a&&(r=[2&r[0],a.value]),r[0]){case 0:case 1:a=r;break;case 4:return o.label++,{value:r[1],done:!1};case 5:o.label++,n=r[1],r=[0];continue;case 7:r=o.ops.pop(),o.trys.pop();continue;default:if(!(a=o.trys,(a=a.length>0&&a[a.length-1])||6!==r[0]&&2!==r[0])){o=0;continue}if(3===r[0]&&(!a||r[1]>a[0]&&r[1]<a[3])){o.label=r[1];break}if(6===r[0]&&o.label<a[1]){o.label=a[1],a=r;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(r);break}a[2]&&o.ops.pop(),o.trys.pop();continue}r=t.call(e,o)}catch(e){r=[6,e],n=0}finally{i=a=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,l])}}},h=!1,c=!1,g=!1,u=!1,m=!1,f=!1,p=!1,v="",w={},y=!1,b=!1,x="Arial",E="black",S="Center",B=12,k="None",C="Wrap",I="WrapWithOverflow",A="CollapseSpace";return{createHtmlElement:function(e,t){var i=sf.base.createElement(e);return t&&this.setAttribute(i,t),i},setAttributeSvg:function(e,t){for(var i=Object.keys(t),n=0;n<i.length;n++)"style"!==i[n]?e.setAttribute(i[n],t[i[n]]):this.applyStyleAgainstCsp(e,t[i[n]])},applyStyleAgainstCsp:function(e,t){for(var i=t.split(";"),n=0;n<i.length;n++){var a=i[n].split(":");2===a.length&&(e.style[a[0].trim()]=a[1].trim())}},setCanvasSize:function(e,t,i){e&&(e.setAttribute("width",t.toString()),e.setAttribute("height",i.toString()))},getHTMLLayer:function(e){var t=null;window[e+"_htmlLayer"]?t=window[e+"_htmlLayer"]:(t=this.getDiagramElement(e).getElementsByClassName("e-html-layer")[0],window[e+"_htmlLayer"]=t);return t},getDiagramElement:function(e,t){var i;return t&&(i=document.getElementById(t)),"msie"===sf.base.Browser.info.name||"edge"===sf.base.Browser.info.name?i?i.querySelector("#"+e):document.getElementById(e):i?i.querySelector("#"+CSS.escape(e)):document.getElementById(e)},createCanvas:function(e,t,i){var n=this.createHtmlElement("canvas",{id:e});return this.setCanvasSize(n,t,i),n},setAttribute:function(e,t){for(var i=Object.keys(t),n=0;n<i.length;n++)e.setAttribute(i[n],t[i[n]])},createMeasureElements:function(e,t,i,n,a,r,o,l,s,d){this.updateZoomPanTool(e),this.updateInnerLayerSize(t,i,n,void 0,o,l,s,d),a&&r&&this.onAddWireEvents(a,r);if(window.measureElement)window.measureElement.usageCount+=1;else{var h=this.createHtmlElement("div",{id:"measureElement",style:"visibility:hidden ; height: 0px ; width: 0px; overflow: hidden;"}),c=this.createHtmlElement("span",{style:"display:inline-block ; line-height: normal"});h.appendChild(c);var g;g=this.createHtmlElement("img",{}),h.appendChild(g);var u=document.createElementNS("http://www.w3.org/2000/svg","svg");u.setAttribute("xlink","http://www.w3.org/1999/xlink"),h.appendChild(u);var m=document.createElementNS("http://www.w3.org/2000/svg","path");u.appendChild(m);var f=document.createElementNS("http://www.w3.org/2000/svg","text");f.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),u.appendChild(f),window.measureElement=h,window.measureElement.usageCount=1,document.body.appendChild(h);window.measureElementCount?window.measureElementCount++:window.measureElementCount=1}},updateZoomPanTool:function(e){p=e},updateGridlines:function(e,t,i,n){var a=document.getElementById(e);if(a&&(a.setAttribute("width",t.width.toString()),a.setAttribute("height",t.height.toString()),a.children.length>0))for(var r=0;r<a.children.length;r++)i&&i.length?a.children[r].setAttribute("d",i[r]):n&&n.length&&(a.children[r].setAttribute("cx",n[r].x.toString()),a.children[r].setAttribute("cy",n[r].y.toString()))},updatePageBreaks:function(e,t,i,n,a,r,o,l,s,d,h,c){var g=document.getElementById(e),u=document.getElementById(t);if(g.children.length>0)for(var m=0;m<g.children.length;m++)g.children[m].setAttribute("x",i),g.children[m].setAttribute("y",n),g.children[m].setAttribute("width",a),g.children[m].setAttribute("height",r);if(u&&u.children.length>0){var f=0;for(m=0;m<u.children.length;m++)if(-1!=u.children[m].id.indexOf("_backgroundLayerrect"))u.children[m].setAttribute("x",i),u.children[m].setAttribute("y",n),u.children[m].setAttribute("width",a),u.children[m].setAttribute("height",r),u.children[m].setAttribute("transform",o);else if(c){var p=(l[0+f]+s)*h,v=(l[1+f]+d)*h,w=(l[2+f]+s)*h,y=(l[3+f]+d)*h;u.children[m].setAttribute("x1",p),u.children[m].setAttribute("y1",v),u.children[m].setAttribute("x2",w),u.children[m].setAttribute("y2",y),f+=4}}},updateInnerLayerSize:function(e,t,i,n,a,r,o,l,s,d){var h;if(d&&(t=(h=this.measureScrollValues(d)).width,i=h.height),null!=e&&null!=t&&null!=i&&e.length>0)for(var c=void 0,g=0;g<e.length-1;g++)if(c=document.getElementById(e[g]),g>=e.length-6){if(-1!=e[g].indexOf("_pattern"))this.updateGridlines(e[g],r,o,l);else if(-1!=e[g].indexOf("gridline")&&a&&c){var u=a.scale,m=-a.tx*u,p=-a.ty*u,v="translate("+a.tx*u+","+a.ty*u+")";c.setAttribute("transform",v),c.children[0].setAttribute("x",m.toString()),c.children[0].setAttribute("y",p.toString())}else if(a&&c){u=a.scale;var w="translate("+a.tx*u+","+a.ty*u+"),scale("+u+")";c.setAttribute("transform",w);var y=document.getElementById(e[g].split("_")[0]+"_htmlLayer_div"),b="position: absolute; top: 0px; left: 0px; pointer-events: all; transform: translate("+a.tx*u+"px,"+a.ty*u+"px) scale("+u+")";y.setAttribute("style",b);var x=document.getElementById(e[g].split("_")[0]+"_SelectorElement");if(s&&x&&x.children.length>0&&x.children.length==s.length)for(var E=0;E<x.children.length;E++)if("line"==x.children[E].tagName){var S=s[E],B=S.startPoint.x+S.x,k=S.startPoint.y+S.y,C=S.endPoint.x+S.x,I=S.endPoint.y+S.y;x.children[E].setAttribute("x1",B.toString()),x.children[E].setAttribute("y1",k.toString()),x.children[E].setAttribute("x2",C.toString()),x.children[E].setAttribute("y2",I.toString()),x.children[E].setAttribute("transform","rotate("+S.angle+" "+(S.x+S.width*S.pivotX)+" "+(S.y+S.height*S.pivotY)+")")}else if("path"==x.children[E].tagName){var A=s[E];x.children[E].setAttribute("transform","rotate("+A.angle+","+(A.x+A.width*A.pivotX)+","+(A.y+A.height*A.pivotY)+")translate("+A.x+","+A.y+")")}else if("rect"==x.children[E].tagName){var N=s[E];x.children[E].setAttribute("x",N.x),x.children[E].setAttribute("y",N.y),x.children[E].setAttribute("width",N.width),x.children[E].setAttribute("height",N.height),x.children[E].setAttribute("transform","rotate("+N.angle+","+(N.x+N.width*N.pivotX)+","+(N.y+N.height*N.pivotY)+")")}else"circle"==x.children[E].tagName&&(x.children[E].setAttribute("cx",s[E].cx),x.children[E].setAttribute("cy",s[E].cy))}}else c&&(c.style.width=t,c.style.height=i);if(f&&(f=!1),!d&&null!=e&&e.length>0){var P=document.getElementById(e[e.length-1]);return this.onChangeScrollValues(P,n)}return h},onChangeScrollValues:function(e,t){return h&&(h=!1),null!=e&&null!=t&&null!=t.x&&null!=t.y?(c&&(c=!1,g=!0),e.scrollLeft=t.x,e.scrollTop=t.y,this.measureScrollValues(e.id)):null},measureScrollValues:function(t){var i=document.getElementById(t);return new e(i.scrollLeft,i.scrollTop,i.scrollWidth,i.scrollHeight)},measurePath:function(t){if(t){window.measureElement.style.visibility="visible";var i=window.measureElement.children[2],n=this.getChildNode(i)[0];n.setAttribute("d",t);var a=n.getBBox(),r=new e(a.x,a.y,a.width,a.height);return window.measureElement.style.visibility="hidden",r}return new e(0,0,0,0)},openUrl:function(e){return s(this,void 0,void 0,(function(){return d(this,(function(t){return window.open(e,"_blank"),[2]}))}))},textEdit:function(e,t,i,n,r,o,l,s){var d=this,h=document.getElementById("diagram_editTextBoxDiv");e.id=s;var c=document.getElementById("diagram_editBox"),g=e.content;if(!h&&!c){h=this.createHtmlElement("div",{}),c=this.createHtmlElement("textarea",{});var u=document.getElementsByClassName("e-control e-diagram e-lib e-droppable e-tooltip"),m=0;if(u.length>0)for(var f=0;f<u.length;f++){u[f].children[0].id.split("_")[0]==i&&(m=f)}u[m].children[0].appendChild(h),h.appendChild(c),c.appendChild(document.createTextNode(g)),this.diagram_editTextBoxDiv=h,this.diagram_editBox=c}var p=e.bounds.width<r.width?e.bounds.width:r.width;p=90>p?90:p;var v=this.measureHtmlText(e.style,t,g,void 0,void 0,p);0==v.width&&0==v.height&&(v.width=50,v.height=12);var w=l?o.scale:1;v.width=Math.max(v.width,50),a(h,{id:"diagram_editTextBoxDiv",style:"position: absolute;left:"+((n.x+o.tx)*o.scale-v.width/2*w-2.5)+"px;top:"+((n.y+o.ty)*o.scale-v.height/2*w-3)+"px;width:"+(v.width+1)*w+"px;height:"+v.height*w+"px; containerName:temp;"});var y=e.style;a(c,{id:"diagram_editBox",style:"width:"+(v.width+1)*w+"px;height:"+v.height*w+"px;line-height: normal;resize: none;outline: none;overflow: hidden;;font-family:"+y.fontFamily+";font-size:"+y.fontSize*w+"px;text-align:"+e.style.textAlign.toLocaleLowerCase()+";",class:"e-diagram-text-edit"}),c.style.fontWeight=y.bold?"bold":"",c.style.fontStyle=y.italic?"italic":"",c.style.lineHeight=(1.2*y.fontSize+"px;").toString();var b=document.getElementById(e.id+"_text");b&&b.setAttribute("visibility","hidden"),c.style.textDecoration=y.textDecoration?y.textDecoration:"",c.addEventListener("input",(function(i){d.inputChange(i,e,t,r,n,o,l)})),c.select(),window.annotation=e},inputChange:function(e,t,i,n,a,r,o){var l,s,d,h,c,g=this.diagram_editBox,u=this.diagram_editTextBoxDiv,m=g.value,f=m.split("\n");l=(l=n.width<t.bounds.width?n.width:t.bounds.width)>90?l:90,c=this.measureHtmlText(t.style,i,m,void 0,void 0,l),s=Number(g.style.fontSize.split("px")[0]),f.length>1&&""===f[f.length-1]&&(c.height=c.height+s);var p=o?r.scale:1;h=(90>(h=c.width)?90:h)*p,d=(12>c.height?12:c.height)*p,u.style.left=(a.x+r.tx)*r.scale-h/2-2.5+"px",u.style.top=(a.y+r.ty)*r.scale-d/2-3+"px",u.style.width=h+"px",u.style.height=d+"px",g.style.minHeight="12px",g.style.minWidth="90px",g.style.width=h+"px",g.style.height=d+"px"},measureHtmlText:function(e,t,i,n,a,r){var o={},l=this.createHtmlElement("span",{style:"display:inline-block; line-height: normal"});return e.bold&&(l.style.fontWeight="bold"),e.italic&&(l.style.fontStyle="italic"),void 0!==n&&(l.style.width=n.toString()+"px"),void 0!==a&&(l.style.height=a.toString()+"px"),void 0!==r&&(l.style.maxWidth=r.toString()+"px"),l.style.fontFamily=e.fontFamily,l.style.fontSize=e.fontSize+"px",l.style.color=e.color,l.textContent=i,l.style.whiteSpace=this.whiteSpaceToString(t,e.textWrapping),l.style.wordBreak=void 0!==r?"break-word":this.wordBreakToString(e.textWrapping),document.body.appendChild(l),o.width=l.offsetWidth,o.height=l.offsetHeight,document.body.removeChild(l),o},getChildNode:function(e){var t,i=[];if("msie"===sf.base.Browser.info.name||"edge"===sf.base.Browser.info.name)for(var n=0;n<e.childNodes.length;n++)1===(t=e.childNodes[n]).nodeType&&i.push(t);else i=e.children;return i},measureBounds:function(e,t,i,n){return s(this,void 0,void 0,(function(){var a,r,o,l,s,h,c,g,u,m,f,p,w,y,b,x,E,S,B,k,C,I,A,N,P,T,L,D;return d(this,(function(d){switch(d.label){case 0:if(null!=n)for(r=document.getElementsByClassName("e-acrdn-panel e-content-hide"),a=[],D=0;D<r.length;D++)a[D]=r[D].style.display,r[D].style.display="block";if(o={},l={},s={},h={},c={},g="measureElement",e)for(S=Object.keys(e).map((function(t){return[e[t],t]})),window[g].style.visibility="visible",B=window[g].children[2],u=this.getChildNode(B)[0],I=0;I<S.length;I++)"Path"==S[I][0]?(p=S[I][1],u.setAttribute("d",p),f=u.getBBox(),L={x:f.x,y:f.y,width:f.width,height:f.height},l[p]=L):-1!=S[I][0].indexOf("GetBoundingClientRect")&&((m=document.getElementById(S[I][1]))&&(f=m.getBoundingClientRect(),l[S[I][0]]={x:f.x,y:f.y,width:f.width,height:f.height}),"GetBoundingClientRect"==S[I][0]&&(v=S[I][1],l.GetScrollerBounds=this.measureScrollValues(S[I][1])));if(t)for(S=Object.keys(t).map((function(e){return[t[e],e]})),I=0;I<S.length;I++)p=S[I][1],w=t[p].content,y=t[p].style,b=t[p].bounds,x=t[p].nodeSize,b.width=null==b.width?void 0:b.width,b.height=null==b.height?void 0:b.height,x.width=null==x.width?void 0:x.width,x.height=null==x.height?void 0:x.height,s[p]=this.measureText(b,y,w,b.width||x.width);return i&&(E=Object.keys(i).map((function(e){return[i[e],e]}))).length>0?(0,S={},[4,this.loadImage(E,0,S)]):[3,2];case 1:d.sent(),h=S,d.label=2;case 2:if(n&&(S=Object.keys(n).map((function(e){return[n[e],e]})),window[g].style.visibility="visible",B=window[g].children[2],S.length>0)){for(k={},C={},I=0;I<S.length;I++)A=S[I][0],N=document.getElementById(A),(P=N.cloneNode(!0)).id=P.id+"_copy",B.appendChild(P),T=P.getBoundingClientRect(),L=B.getBoundingClientRect(),C={x:T.left-L.left,y:T.top-L.top,width:T.width,height:T.height},k[S[I][1]]=C,B.removeChild(P);c=k}if(l.GetScrollerWidth=this.getScrollerWidth(),o.Path=l,o.Text=s,o.Image=h,o.Native=c,null!=a)for(D=0;D<r.length;D++)r[D].style.display=a[D].toString();return window[g].style.visibility="hidden",[2,o]}}))}))},measureText:function(e,t,i,n,a){var r,o,l={},s={width:0,height:0},d=this.getTextOptions(i,e,t,n);return r=this.wrapSvgText(d,a,n),o=this.wrapSvgTextAlign(d,r),s.width=o.width,o.width>=n&&"Wrap"!==d.textOverflow&&(s.width=n),s.height=r.length*d.fontSize*1.2,o.width>d.width&&"Wrap"!==d.textOverflow&&"NoWrap"===d.textWrapping&&(r[0].text=this.overFlow(d.content,d)),l.Bounds=s,l.WrapBounds=o,l.ChildNodes=r,l},getTextOptions:function(e,t,i,n){var a={fill:i.fill,stroke:i.strokeColor,strokeWidth:i.strokeWidth,dashArray:i.strokeDashArray,opacity:i.opacity,gradient:i.gradient,width:n||t.width,height:t.height};return a.fontSize=i.fontSize||B,a.fontFamily=i.fontFamily||x,a.textOverflow=i.textOverflow||C,a.textDecoration=i.textDecoration||k,a.doWrap=i.doWrap,a.whiteSpace=this.whiteSpaceToString(i.whiteSpace||A,i.textWrapping||I),a.content=e,a.textWrapping=i.textWrapping||I,a.breakWord=this.wordBreakToString(i.textWrapping||I),a.textAlign=this.textAlignToString(i.textAlign||S),a.color=i.color||E,a.italic=i.italic||b,a.bold=i.bold||y,a.dashArray="",a.strokeWidth=0,a.fill="",a},whiteSpaceToString:function(e,t){if("NoWrap"===t&&"PreserveAll"===e)return"pre";var i="";switch(e){case"CollapseAll":i="nowrap";break;case"CollapseSpace":i="pre-line";break;case"PreserveAll":i="pre-wrap"}return i},wordBreakToString:function(e){var t="";switch(e){case"Wrap":t="breakall";break;case"NoWrap":t="keepall";break;case"WrapWithOverflow":t="normal";break;case"LineThrough":t="line-through"}return t},textAlignToString:function(e){var t="";switch(e){case"Center":t="center";break;case"Left":t="left";break;case"Right":t="right"}return t},wrapSvgText:function(e,t,i){var n,a,r=[],o=0,l=t||e.content;if("nowrap"!==e.whiteSpace&&"pre"!==e.whiteSpace)if("breakall"===e.breakWord)for(n="",n+=l[0],o=0;o<l.length;o++)if((a=this.bBoxText(n,e))>=e.width&&n.length>0)r[r.length]={text:n,x:0,dy:0,width:a},n="";else{(n+=l[o+1]||"").indexOf("\n")>-1&&(r[r.length]={text:n,x:0,dy:0,width:this.bBoxText(n,e)},n="");var s=this.bBoxText(n,e);Math.ceil(s)+2>=e.width&&n.length>0&&(r[r.length]={text:n,x:0,dy:0,width:s},n=""),o===l.length-1&&n.length>0&&(r[r.length]={text:n,x:0,dy:0,width:s},n="")}else r=this.wordWrapping(e,t,i);else r[r.length]={text:l,x:0,dy:0,width:this.bBoxText(l,e)};return r},wordWrapping:function(e,t,i){var n=[],a="",r=0,o=0,l="nowrap"!==e.whiteSpace,s=t||e.content;if(null!=s){var d=s.split("\n"),h=void 0,c=void 0,g=void 0,u=void 0;for(r=0;r<d.length;r++)for(h="NoWrap"!==e.textWrapping?d[r].split(" "):"NoWrap"===e.textWrapping?[d[r]]:d,o=0;o<h.length;o++){c=(a+=((0!==o||1===h.length)&&l&&a.length>0?" ":"")+h[o])+" "+(h[o+1]||"");var m=this.bBoxText(c,e);Math.floor(m)>(i||e.width)-2&&a.length>0?(n[n.length]={text:a,x:0,dy:0,width:c===a?m:a===u?g:this.bBoxText(a,e)},a=""):o===h.length-1&&(n[n.length]={text:a,x:0,dy:0,width:m},a=""),u=c,g=m}}return n},wrapSvgTextAlign:function(e,t){var i,n,a={x:0,width:0},r=0;for(r=0;r<t.length;r++)n=i=t[r].width,i="left"===e.textAlign?0:"center"===e.textAlign?i>e.width&&("Ellipsis"===e.textOverflow||"Clip"===e.textOverflow)?0:-i/2:"right"===e.textAlign?-i:t.length>1?0:-i/2,t[r].dy=1.2*e.fontSize,t[r].x=i,a?(a.x=Math.min(a.x,i),a.width=Math.max(a.width,n)):a={x:i,width:n};return a},overFlow:function(e,t){var i,n=0,a=0,r=0,o="";i=e.length;var l=0;do{r>0&&(n=a),a=Math.floor(this.middleElement(n,i)),o+=e.substr(n,a),r=this.bBoxText(o,t)}while(r<=t.width);for(o=o.substr(0,n),l=n;l<i;l++)if(o+=e[l],(r=this.bBoxText(o,t))>=t.width){e=e.substr(0,o.length-1);break}return"Ellipsis"===t.textOverflow?(e=e.substr(0,e.length-3),e+="..."):e=e.substr(0,e.length),e},middleElement:function(e,t){return(e+t)/2},getScrollerWidth:function(){var e=this.createHtmlElement("div",{style:"visibility:hidden; width: 100px"});document.body.appendChild(e);var t=e.getBoundingClientRect().width;e.style.overflow="scroll";var i=this.createHtmlElement("div",{style:"width:100%"});e.appendChild(i);var n=i.getBoundingClientRect().width;return e.parentNode.removeChild(e),{x:0,y:0,width:t-n,height:0}},pathPoints:function(e){return s(this,void 0,void 0,(function(){var t,i,n,a;return d(this,(function(r){if(t={},e)for(i=Object.keys(e).map((function(t){return[e[t],t]})),n=0;n<i.length;n++)i.length>0&&(a=i[n][1],t[i[n][0]]=this.findSegmentPoints(a));return[2,t]}))}))},findSegmentPoints:function(e){var t,i,n=[];window.measureElement.style.visibility="visible";var a=window.measureElement.children[2],r=this.getChildNode(a)[0];r.setAttributeNS(null,"d",e);var o=r.getTotalLength();for(i=0;i<=o;i+=10)t=r.getPointAtLength(i),n.push({x:t.x,y:t.y});return window.measureElement.style.visibility="hidden",n},loadImage:function(e,t,i){return s(this,void 0,void 0,(function(){var n,r,o;return d(this,(function(l){switch(l.label){case 0:return n=new Promise((function(i,n){var r={};window.measureElement.style.visibility="visible",window.measureElement.children[1].setAttribute("src",e[t][0]),window.measureElement.style.visibility="hidden";var o=document.createElement("img");o.setAttribute("src",e[t][0]),a(o,{id:"imagesf"+t+"imageNode",style:"display: none;"}),document.body.appendChild(o),o.onload=function(e){var t=e.currentTarget;r={width:t.width,height:t.height},i(r)}})),r=i,o=e[t][1],[4,n];case 1:return r[o]=l.sent(),t!=e.length-1?[3,2]:[2,i];case 2:return t++,[4,this.loadImage(e,t,i)];case 3:l.sent(),l.label=4;case 4:return[2]}}))}))},bBoxText:function(e,t){window.measureElement.style.visibility="visible";var i=window.measureElement.children[2],a=this.getChildNode(i)[1];a.textContent=e,n(a,"font-size:"+t.fontSize+"px; font-family:"+t.fontFamily+";font-weight:"+(t.bold?"bold":"normal"));var r=a.getBBox().width;return window.measureElement.style.visibility="hidden",r},endEdit:function(e){setTimeout((function(){var e=document.getElementById(i.id+"_text");e&&e.setAttribute("visibility","visible")}),100);var t=this.diagram_editBox,i=window.annotation,n=t.value,a=i.style,r=i.bounds,o=i.nodeSize;o.width=null==o.width?void 0:o.width,o.height=null==o.height?void 0:o.height;var l={},s={};return l[i.id]=this.measureText(r,a,n,r.width||o.width),l[i.id].Content=n,s.Text=l,this.diagram_editTextBoxDiv.remove(),s},onAddWireEvents:function(e,t){var i=this,n=document.getElementById(e);w[e]=t;var a=this;n.addEventListener("mousedown",(function(e){"Mac68K"!==window.navigator.platform&&"MacPPC"!==window.navigator.platform&&"MacIntel"!==window.navigator.platform||e.preventDefault(),i.invokeDiagramEvents(e,t)})),window.addEventListener("resize",(function(e){setTimeout((function(){a.invokeDiagramEvents(e,null,v)}),800)})),n.addEventListener("mousemove",(function(e){"Mac68K"!==window.navigator.platform&&"MacPPC"!==window.navigator.platform&&"MacIntel"!==window.navigator.platform||e.preventDefault(),i.invokeDiagramEvents(e,t)})),n.addEventListener("mouseup",(function(e){i.invokeDiagramEvents(e,t)})),n.addEventListener("mouseleave",(function(e){i.invokeDiagramEvents(e,t)})),n.addEventListener("touchstart",(function(e){"Mac68K"!==window.navigator.platform&&"MacPPC"!==window.navigator.platform&&"MacIntel"!==window.navigator.platform||e.preventDefault(),i.invokeDiagramEvents(e,t)})),n.addEventListener("touchmove",(function(e){"Mac68K"!==window.navigator.platform&&"MacPPC"!==window.navigator.platform&&"MacIntel"!==window.navigator.platform||e.preventDefault(),i.invokeDiagramEvents(e,t)})),n.addEventListener("touchend",(function(e){i.invokeDiagramEvents(e,t)})),n.addEventListener("scroll",(function(e){i.invokeDiagramEvents(e,t)})),n.addEventListener("mousewheel",(function(e){i.invokeDiagramEvents(e,t)})),n.addEventListener("keydown",(function(e){i.invokeDiagramEvents(e,t)})),n.addEventListener("keyup",(function(e){i.invokeDiagramEvents(e,t)}))},invokeDiagramEvents:function(e,t,i,n){var a,r="diagram_editTextBoxDiv",o=this[r],l={};if("resize"==e.type){var s=document.getElementById(i);if(!s&&document.getElementsByClassName("e-diagram").length>0){var d=document.getElementsByClassName("e-diagram").length;i=document.getElementsByClassName("e-diagram")[d-1].id+"_content",s=document.getElementById(i),v=i}t=w[i]}if("mousedown"!=e.type&&"touchstart"!=e.type||(m=!0),"mouseup"!=e.type&&"touchend"!=e.type&&"mouseleave"!=e.type||(m=!1),"mouseleave"!=e.type&&"Escape"!=e.key&&("mousedown"!=e.type&&"touchstart"!=e.type||"diagram_editBox"==e.target.id)||!o||(window.isEscape="Escape"==e.key,a=this.endEdit(e,this),this[r]=o=document.getElementById("diagram_editTextBoxDiv"),e.currentTarget.focus()),l=this.getMouseEvents(e,i,n),"Escape"==e.key){var y=document.getElementById("helperElement");y&&(sf.base.remove(y),y.remove())}"mousewheel"==e.type&&e.ctrlKey?c?setTimeout((function(){c=!1}),1e3):(c=!0,t.invokeMethodAsync("InvokeDiagramEvents",l,a)):o||("mousemove"!=e.type&&"touchmove"!=e.type||h)&&("mousemove"==e.type||"touchmove"==e.type)&&u||(("mousemove"==e.type||"touchmove"==e.type&&!f)&&m&&p&&(h=!0,l.isPan=!0),n?t.invokeMethodAsync("InvokeDiagramEvents",l):("keydown"==e.type||"keyup"==e.type||"scroll"!=e.type||"scroll"==e.type&&!f)&&("scroll"!=e.type||"scroll"==e.type&&!g?t.invokeMethodAsync("InvokeDiagramEvents",l,a):"scroll"==e.type&&g&&(g=!1))),"mouseup"!=e.type&&"mousemove"!=e.type&&"touchend"!=e.type&&"touchmove"!=e.type||!e.currentTarget||!e.currentTarget.id||this[r]||this.isForeignObject(e.target)||e.currentTarget.focus()},isForeignObject:function(e,t){var i=e;if(i)for(;null!==i.parentNode;){if("string"==typeof i.className&&(!t&&-1!==i.className.indexOf("foreign-object")||t&&-1!==i.className.indexOf("e-diagram-text-edit")))return i;i=i.parentNode}return null},getTouches:function(e){var t=[];if(e&&e.touches&&e.touches.length>0)for(var i=0;i<e.touches.length;i++)t.push({pageX:e.touches[i].pageX,pageY:e.touches[i].pageY,screenX:e.touches[i].screenX,screenY:e.touches[i].screenY,clientX:e.touches[i].clientX,clientY:e.touches[i].clientY});return t},getMouseEvents:function(e,t,i){var n={};if(-1!=e.type.indexOf("touch")?((n={altKey:e.altKey,shiftKey:e.shiftKey,ctrlKey:e.ctrlKey,detail:e.detail,metaKey:e.metaKey,type:e.type}).touches=this.getTouches(e),e.changedTouches&&e.changedTouches[0]&&(n.offsetX=e.changedTouches[0].clientX,n.offsetY=e.changedTouches[0].clientY),i&&"out"==i.name&&(n.type="mouseleave"),"touchmove"==e.type&&e.preventDefault()):n={altKey:e.altKey,shiftKey:e.shiftKey,ctrlKey:e.ctrlKey,detail:e.detail,metaKey:e.metaKey,screenX:e.screenX,screenY:e.screenY,clientX:e.clientX,clientY:e.clientY,offsetX:e.offsetX,offsetY:e.offsetY,type:e.type,key:e.key,keyCode:e.keyCode,button:e.button},t&&"resize"==e.type){var a=this.measureScrollValues(t),o=document.getElementById(t);n.diagramCanvasScrollBounds=a,n.diagramGetBoundingClientRect=o.getBoundingClientRect()}else if(i){if(i.target.id&&""!=i.target.id){var l=r(i.target,"e-diagram");if(l&&l.id&&""!=l.id){var s=l.id;a=this.measureScrollValues(s);n.diagramCanvasScrollBounds=a,n.diagramGetBoundingClientRect=document.getElementById(s+"_content").getBoundingClientRect()}}}else if(e.currentTarget&&e.currentTarget.id){a=this.measureScrollValues(e.currentTarget.id);n.diagramCanvasScrollBounds=a,n.diagramGetBoundingClientRect=e.currentTarget.getBoundingClientRect()}else if(e.target){a=this.measureScrollValues(e.target.id);n.diagramCanvasScrollBounds=a,n.diagramGetBoundingClientRect=e.target.getBoundingClientRect()}return"mousewheel"==e.type&&(e.ctrlKey&&e.preventDefault(),e.currentTarget.focus(),n.wheelDelta=e.wheelDelta,f=!0),"touchmove"==e.type&&e.touches.length>1&&(f=!0),"mousedown"!=e.type&&"touchstart"!=e.type||(u=!0),"mouseup"!=e.type&&"touchend"!=e.type||(u=!1),t||this.isForeignObject(e.target,!0)||"mousemove"!=e.type&&"mouseleave"!=e.type&&"mouseup"!=e.type&&(this.isForeignObject(e.target)||"mousedown"!=e.type&&"keydown"!=e.type&&"keyup"!=e.type)&&(!this.isForeignObject(e.target)||"mousedown"!=e.type||"keydown"!=e.type||"keyup"!=e.type)||f||e.preventDefault(),n},initialiseModule:function(e,t,i){return s(this,void 0,void 0,(function(){var n,a=this;return d(this,(function(r){return"symbolPaletteInstance",window.symbolPaletteInstance?(n={id:e.children[0].id,componentInstance:t,allowDrag:i},window.symbolPaletteInstance.push(n)):(n={id:e.children[0].id,componentInstance:t,allowDrag:i},window.symbolPaletteInstance=[],window.symbolPaletteInstance.push(n)),e.addEventListener("mousedown",(function(e){"Mac68K"!==window.navigator.platform&&"MacPPC"!==window.navigator.platform&&"MacIntel"!==window.navigator.platform||e.preventDefault(),a.invokePaletteEvents(e,t)})),e.addEventListener("mousemove",(function(e){"Mac68K"!==window.navigator.platform&&"MacPPC"!==window.navigator.platform&&"MacIntel"!==window.navigator.platform||e.preventDefault(),a.invokePaletteEvents(e,t)})),e.addEventListener("mouseup",(function(e){a.invokePaletteEvents(e,t)})),e.addEventListener("mouseleave",(function(e){a.invokePaletteEvents(e,t)})),e.addEventListener("touchstart",(function(e){"Mac68K"!==window.navigator.platform&&"MacPPC"!==window.navigator.platform&&"MacIntel"!==window.navigator.platform||e.preventDefault(),a.invokePaletteEvents(e,t)})),e.addEventListener("touchmove",(function(e){"Mac68K"!==window.navigator.platform&&"MacPPC"!==window.navigator.platform&&"MacIntel"!==window.navigator.platform||e.preventDefault(),a.invokePaletteEvents(e,t)})),e.addEventListener("touchend",(function(e){a.invokePaletteEvents(e,t)})),setTimeout((function(){this.symbolPaletteDragAndDropModule=new l(e,window.symbolPaletteInstance)}),100),[2]}))}))},invokePaletteEvents:function(e,t){var i;"touchstart"!=e.type&&"touchend"!=e.type&&e.target&&r(e.target,"e-acrdn-header")&&e.preventDefault();var n=this.palettegetMouseEvents(e);if(i=2===e.target.id.split("_").length?e.target.id.split("_")[0]:function(e,t,i){for(var n,a=e;a&&!o(a,i);){if(a.id&&-1!=a.id.indexOf(t)){n=a.id.split(t)[0];break}a=a.parentNode}return n}(e.target,"_Container","e-symbolpalette"),"mousemove"==e.type&&!h||"mousemove"!=e.type||!u){if(e&&e.target&&e.type){var a=document.getElementById(e.target.id),l=void 0;if(a){for(var s=0;s<a.classList.length;s++)if("e-symbol-draggable"==a.classList[s]){(l=e.target).classList.add("e-symbol-hover");break}var d=document.getElementsByClassName("e-symbol-hover");if(d&&d.length>0)for(var c=0;c<d.length;c++){var g=d[c];(l&&l!=g||null==l)&&g.classList.remove("e-symbol-hover")}}}t.invokeMethodAsync("InvokePaletteEvents",n,i)}},palettegetMouseEvents:function(e){var t={};return-1!=e.type.indexOf("touch")?((t={altKey:e.altKey,shiftKey:e.shiftKey,ctrlKey:e.ctrlKey,detail:e.detail,metaKey:e.metaKey,type:e.type}).touches=this.getTouches(e),e.changedTouches&&e.changedTouches[0]&&(t.offsetX=e.changedTouches[0].clientX,t.offsetY=e.changedTouches[0].clientY),"touchmove"==e.type&&e.preventDefault()):t={altKey:e.altKey,shiftKey:e.shiftKey,ctrlKey:e.ctrlKey,detail:e.detail,metaKey:e.metaKey,screenX:e.screenX,screenY:e.screenY,clientX:e.clientX,clientY:e.clientY,offsetX:e.offsetX,offsetY:e.offsetY,type:e.type},t},exportDiagram:function(t,i,n,a,r,o,l,h){return s(this,void 0,void 0,(function(){var c,g=this;return d(this,(function(u){return c=this,[2,new Promise((function(u,m){return s(g,void 0,void 0,(function(){var s,g,m,f,p,v,w,y;return d(this,(function(d){switch(d.label){case 0:return s="data",i=i,a=a,g=t.margin||{},t.region=t&&0==t.region?"PageSettings":1==t.region?"Content":"ClipBounds",t.fileName=o,t.mode=h?"Download":"Data",t.format=0===l?"JPEG":1===l?"PNG":2===l?"SVG":l,t.orientation=t&&0===t.orientation?"Landscape":"Portrait",m=n,f=new e(n.x,n.y,n.width,n.height),(p=t.clipBounds)&&(m.x=p.x?p.x:m.x,m.y=p.y?p.y:m.y,m.width=p.width||m.width,m.height=p.height||m.height),g={top:g.top,bottom:g.bottom,right:g.right,left:g.left},"PageSettings"!==t.region&&(m.x-=g.left,m.y-=g.top,m.width+=g.left+g.right,m.height+=g.top+g.bottom),v=t.fileName||"diagram",[4,c.setCanvas(t,m,f,g,v,a,i)];case 1:return null!==(s=d.sent())&&(r||"Data"===t.mode&&"SVG"===t.format?u(s):(w={id:i+"_ExportImage",src:s},t.margin={top:0,bottom:0,right:0,left:0},(y=c.createHtmlElement("img",w)).onload=function(){var e=c.getMultipleImage(y,t,i,!0,a);u(JSON.stringify(e))})),[2]}}))}))}))]}))}))},setCanvas:function(t,i,n,a,r,o,l){return s(this,void 0,void 0,(function(){var s,h,c,g,u;return d(this,(function(d){switch(d.label){case 0:return t.clipBounds=i,h=new e(n.x,n.y,n.width,n.height),"scaleX","scaleY","scaleOffsetX","scaleOffsetY",c=new e(i.x,i.y,i.width,i.height),this.setScaleValueforCanvas(t,i,o),[4,this.exportAsImage({clipBounds:i,margin:a,region:t.region,scaleX:t.scaleX,scaleY:t.scaleY,scaleOffsetX:t.scaleOffsetX,scaleOffsetY:t.scaleOffsetY},r,l,t,h,c,o,"Download"===t.mode)];case 1:return g=d.sent(),"SVG"!==t.format&&(u=s="JPEG"===t.format?g.toDataURL("image/jpeg"):"PNG"===t.format?g.toDataURL("image/png"):"BMP"===t.format?g.toDataURL("image/bmp"):g.toDataURL()),"Data"===t.mode?"SVG"===t.format?[2,g]:[2,s]:(this.canvasMultiplePage(t,g,a,u,r),[2,null])}}))}))},exportAsImage:function(e,t,i,n,a,r,o,l){return s(this,void 0,void 0,(function(){var s;return d(this,(function(d){switch(d.label){case 0:return[4,this.imageExport(e,t,i,n,a,r,o,l)];case 1:return(s=d.sent())instanceof Promise?(s.then((function(e){return e})),[2,s]):[2,s]}}))}))},imageExport:function(e,t,i,n,a,r,o,l){return s(this,void 0,void 0,(function(){var l;return d(this,(function(s){return l=this,document.getElementById(i),[2,new Promise((function(s,d){e.clipBounds;var h=e.margin,c=a.x,g=a.y,u=a.width,m=a.height,f=document.createElementNS("http://www.w3.org/2000/svg","svg"),p={x:String(r.x),y:String(r.y),width:String(r.width),height:String(r.height)};l.setAttributeSvg(f,p),p={x:String(c),y:String(g),width:String(u+h.left+h.right),height:String(m+h.top+h.bottom)};var v,w,y=document.getElementById(i+"_backgroundLayer_svg").cloneNode(!0),b=document.getElementById(i+"_diagramLayer_svg").cloneNode(!0);if(y){for(var x=0;x<y.childNodes.length;x++){if((B=y.childNodes[x]).id===i+"_backgroundImageLayer"&&(w=!0),B.id===i+"_backgroundLayer"){v=B;for(var E=B.childNodes.length-1;E>=0;E--){(S=B.childNodes[E]).id!==i+"_backgroundLayerrect"&&B.removeChild(S)}}}if(v&&y.removeChild(v),"PageSettings"!==n.region&&l.setAttributeSvg(y,p),f.appendChild(y),v){for(E=v.childNodes.length-1;E>=0;E--){var S=v.childNodes[E];w||S.setAttribute("fill","transparent"===o.background.background?"white":o.background.background)}f.appendChild(v)}if("PageSettings"!==n.region){l.setTransform(y,r,h);for(x=0;x<y.childNodes.length;x++){(B=y.childNodes[x]).id!==i+"_backgroundImageLayer"&&B.id!==i+"_backgroundLayer"||l.setTransform(B,r,h)}}}f.appendChild(b),l.setTransform(b,r,h);for(x=0;x<b.childNodes.length;x++){var B;(B=b.childNodes[x]).id===i+"_diagramlayer"&&l.setTransform(B,r,h)}var k=window.URL.createObjectURL(new Blob([(new window.XMLSerializer).serializeToString(f)],{type:"image/svg+xml"}));if("SVG"===n.format){var C;"Data"===n.mode&&"SVG"===n.format&&(C=(new window.XMLSerializer).serializeToString(f),s(C));var I=[],A=(new window.XMLSerializer).serializeToString(f);I.push(A);var N,P=0;if("Download"===n.mode)for(P=0;P<I.length;P++)N=new Blob([I[P]],{type:"application/octet-stream"}),"msie"===sf.base.Browser.info.name?window.navigator.msSaveOrOpenBlob(N,t+".svg"):l.triggerDownload("SVG",t,k)}else{var T=document.createElement("canvas"),L=T.getContext("2d"),D=new Image;D.onload=function(){T.height=D.height,T.width=D.width,o.background.imageSource?L.fillStyle="transparent":L.fillStyle="transparent"===o.background.background?"white":o.background.background,L.fillRect(0,0,T.width,T.height),L.drawImage(D,0,0),window.URL.revokeObjectURL(k),s(T)},D.src=k}}))]}))}))},triggerDownload:function(e,t,i){var n=document.createElement("a");n.download=t+"."+e.toLocaleLowerCase(),n.href=i,n.click()},canvasMultiplePage:function(e,t,i,n,a){var r=this,o=[],l=n.substring(n.indexOf(":")+1,n.indexOf(";")),s=l.substring(l.indexOf("/")+1),d=(s="jpeg"===s?void 0:s.toUpperCase())||"JPG";if(e.fitToPage){if(e.pageHeight=e.pageHeight?e.pageHeight:(void 0).height,e.pageWidth=e.pageWidth?e.pageWidth:(void 0).width,e.pageHeight=e.pageHeight?e.pageHeight:t.width,e.pageWidth=e.pageWidth?e.pageWidth:t.height,i=e.margin||{},e.orientation&&("Landscape"===e.orientation&&e.pageHeight>e.pageWidth||"Portrait"===e.orientation&&e.pageWidth>e.pageHeight)){var h=e.pageWidth;e.pageWidth=e.pageHeight,e.pageHeight=h}e.margin={top:isNaN(i.top)?0:i.top,bottom:isNaN(i.bottom)?0:i.bottom,left:isNaN(i.left)?0:i.left,right:isNaN(i.right)?0:i.right};var c={id:void 0+"_printImage",src:n},g=this.createHtmlElement("img",c);g.onload=function(){o=r.getMultipleImage(g,e,!0),r.exportImage(o,a,d,n)}}else o=[n],this.exportImage(o,a,d,n)},exportImage:function(e,t,i,n){for(var a=[],r=e instanceof HTMLElement?0:e.length,o=0;o<r;o++){for(var l=e[o].replace(/^data:[a-z]*;,/,"").split(","),s=atob(l[1]),d=new ArrayBuffer(s.length),h=new Uint8Array(d),c=0;c<s.length;c++)h[c]=s.charCodeAt(c);a.push(d)}for(var g=0;g<a.length;g++){var u=new Blob([a[g]],{type:"application/octet-stream"});if("msie"===sf.base.Browser.info.name)window.navigator.msSaveOrOpenBlob(u,t+"."+i);else{var m=window.URL.createObjectURL(u),f=document.createElement("a");f.download=t+"."+i.toLocaleLowerCase(),f.href=m,f.click()}}},setScaleValueforCanvas:function(e,t,i){var n="scaleX";e[n]=1,e.scaleY=1,e.scaleOffsetX=0,e.scaleOffsetY=0,e.pageHeight=e.pageHeight||i.height,e.pageWidth=e.pageWidth||i.width;var a=e.orientation||i.orientation;if(a||(a="Portrait"),"Portrait"===a){if(e.pageWidth>e.pageHeight){var r=e.pageHeight;e.pageHeight=e.pageWidth,e.pageWidth=r}}else if(e.pageHeight>e.pageWidth){r=e.pageWidth;e.pageWidth=e.pageHeight,e.pageHeight=r}e.pageWidth&&e.pageHeight&&!e.fitToPage&&(e.stretch="Meet");var o=e.pageHeight||t.height,l=e.pageWidth||t.width;"Stretch"!==e.stretch&&"Meet"!==e.stretch&&"Slice"!==e.stretch||(e[n]=l/t.width,e.scaleY=o/t.height,"Meet"===e.stretch?(e[n]=e.scaleY=Math.min(e[n],e.scaleY),e.scaleOffsetY=(e.pageHeight-t.height*e[n])/2,e.scaleOffsetX=(e.pageWidth-t.width*e[n])/2):"Slice"===e.stretch&&(e[n]=e.scaleY=Math.max(e[n],e.scaleY)),t.width=l,t.height=o),t.x*=e[n],t.y*=e.scaleY},setTransform:function(e,t,i){e.setAttribute("transform","translate("+(-t.x+i.left)+", "+(-t.y+i.top)+")")},getPrintCanvasStyle:function(e,i){var n=0,a=0,r=new t;if(n=e.width,a=e.height,i.fitToPage&&(i.pageHeight||i.pageWidth)&&(a=i.pageHeight?i.pageHeight:a,n=i.pageWidth?i.pageWidth:n),i.orientation&&i.fitToPage&&("Landscape"===i.orientation&&a>n||"Portrait"===i.orientation&&n>a)){var o=n;n=a,a=o}return r.height=a,r.width=n,r},getMultipleImage:function(e,t,i){var n=[],a=this.createHtmlElement("div",{}),r=this.getPrintCanvasStyle(e,t),o=t.margin,l=o.left,s=o.top,d=o.right,h=o.bottom,c=0,g=r.width+c,u=r.height+0,m=0,f=0;if(t&&t.fitToPage){a.style.height="auto",a.style.width="auto";var p=e.height,v=e.width,w=0,y=0,b=void 0,x=0,E=0,S=void 0,B=void 0;do{do{x=r.width,E=r.height,m+r.width>=v&&(x=v-m),f+r.height>=p&&(E=p-f),(S=(B=this.createCanvas(void 0+"_multiplePrint",r.width,r.height)).getContext("2d")).drawImage(e,c+m+l,0+f+s,x-d-l,E-h-s,0+l,0+s,x-d-l,E-h-s),m+r.width>=v&&(m-=m-v),b="PNG"===t.format?B.toDataURL("image/png"):"JPEG"===t.format?B.toDataURL("image/jpeg"):B.toDataURL(),S.restore(),m+=g,i?n.push(b):this.printImage(a,b,w+""+y,g+"px;",u+"px;"),w++}while(m<v);y++,w=c=m=0,f+r.height>=p&&(f-=f-p),f+=u}while(f<p)}else{var k=this.getPrintCanvasStyle(e,t),C=k.width,I=k.height;(S=(B=this.createCanvas(void 0+"_diagram",C,I)).getContext("2d")).drawImage(e,0+l,0+s,e.width-(d+l),e.height-(s+h),0+l,0+s,C-(d+l),I-(s+h));b="PNG"===t.format?B.toDataURL("image/png"):"JPEG"===t.format?B.toDataURL("image/jpeg"):B.toDataURL();S.restore(),i?n.push(b):this.printImage(a,b,0)}return i?n:a},printImage:function(e,t,i,n,r){var o={class:"e-diagram-print-page",style:"width:"+n+"height:"+r},l=this.createHtmlElement("img",o),s=this.createHtmlElement("div",o);a(l,o={id:void 0+"_multiplePrint_img"+i,style:"float:left",src:t}),s.appendChild(l),e.appendChild(s)},print:function(e,t,i,n){return s(this,void 0,void 0,(function(){var a,r;return d(this,(function(o){switch(o.label){case 0:return a={width:i.width,height:i.height},e.mode="Data",n=n,t=t,[4,this.exportDiagram(e,t,i,n,!0,void 0,void 0,!1)];case 1:return r=o.sent(),e.fitToPage||(e.pageWidth=a.width,e.pageHeight=a.height),this.printImages(r,e),[2,r]}}))}))},printImages:function(e,t){var i=this,n={id:void 0+"_printImage",src:e};t.margin={top:0,bottom:0,right:0,left:0};var a=this.createHtmlElement("img",n);a.onload=function(){var e=i.getMultipleImage(a,t),n=window.open("");null!=n&&e instanceof HTMLElement&&(n.document.write("<html><head><style> body{margin:0px;}  @media print { .e-diagram-print-page{page-break-after: left; }.e-diagram-print-page:last-child {page-break-after: avoid;}}</style><title></title></head>"),n.addEventListener("load",(function(e){setTimeout((function(){n.window.print()}),3e3)})),n.document.write("<center>"+e.innerHTML+"</center>"),n.document.close())}},exportImages:function(e,t){var i=this,n=t&&t.region?t.region:"Content",r=t.margin||{};r={top:isNaN(r.top)?0:r.top,bottom:isNaN(r.bottom)?0:r.bottom,left:isNaN(r.left)?0:r.left,right:isNaN(r.right)?0:r.right};var o=this.getDiagramBounds(n,{});t.clipBounds&&(o.x=isNaN(t.clipBounds.x)?o.x:t.clipBounds.x,o.y=isNaN(t.clipBounds.y)?o.y:t.clipBounds.y,o.width=t.clipBounds.width||o.width,o.height=t.clipBounds.height||o.height);var l=document.createElement("img");a(l,{src:e});var s=this;l.onload=function(){var n=i.createCanvas(s.Diagram.id+"innerImage",o.width+(r.left+r.right),o.height+(r.top+r.bottom)),a=n.getContext("2d");if(a.fillStyle=s.diagram.pageSettings.background.color,a.fillRect(0,0,o.width+(r.left+r.right),o.height+(r.top+r.bottom)),a.drawImage(l,0,0,o.width,o.height,r.left,r.top,o.width,o.height),e=n.toDataURL(),t.printOptions)s.printImages(e,t);else{a.restore();var d=t.fileName||"diagram";i.canvasMultiplePage(t,n,r,e,d)}}},overviewModelBounds:function(){var e,t,i=document.getElementById("overview"),n=i.clientWidth,a=i.clientHeight,r=i.getBoundingClientRect(),o=window.screenX<0?-1*window.screenX:window.screenX,l=window.screenY<0?-1*window.screenY:window.screenY;if(0===n){var s=Math.floor(window.innerWidth-o-Math.floor(r.left));n=s>0?s:Math.floor(window.innerWidth)}if(0===a){var d=Math.floor(window.innerHeight-l-Math.floor(r.top));a=d>0?d:Math.floor(window.innerHeight)}return n>0&&(e=a),a>0&&(t=n),{height:e,width:t}},invokeOverviewEvents:function(e){var t=document.getElementById("overview"),i=this;t&&(t.addEventListener("mousedown",(function(t){i.overviewMouseEventArgs(t,e)})),t.addEventListener("mouseup",(function(t){i.overviewMouseEventArgs(t,e)})),t.addEventListener("mousemove",(function(t){i.overviewMouseEventArgs(t,e)})),t.addEventListener("mouseleave",(function(t){i.overviewMouseEventArgs(t,e)})),t.addEventListener("touchstart",(function(t){i.overviewMouseEventArgs(t,e)})),t.addEventListener("touchmove",(function(t){i.overviewMouseEventArgs(t,e)})),t.addEventListener("touchend",(function(t){i.overviewMouseEventArgs(t,e)})))},diagramOverview:function(e,t,i,n,a){var r=document.getElementById(e+"_diagramLayer_svg").cloneNode(!0),o=document.createElementNS("http://www.w3.org/2000/svg","svg");n.scale=1;var l=document.getElementById(e).clientHeight,s=document.getElementById(e).clientWidth,d=Math.max(Number(t.width),s),h=Math.max(Number(t.height),l).toString(),c=d.toString();i>=1&&(r.setAttribute("style","pointer-events: all;height:"+h+"px;width:"+c+"px;"),r.children[0].setAttribute("transform","translate("+-t.x+","+-t.y+"),scale("+n.scale+")")),o.setAttribute("height",h),o.setAttribute("width",c),o.appendChild(r);var g=window.URL.createObjectURL(new Blob([(new window.XMLSerializer).serializeToString(o)],{type:"image/svg+xml"})),u=document.getElementById("overview_diagramlayer"),m=u.getContext("2d"),f=new Image;f.onload=function(){m.fillStyle="transparent",m.setTransform(1,0,0,1,0,0),m.clearRect(0,0,u.width,u.height),m.setTransform(a,0,0,a,0,0),m.drawImage(f,0,0)},f.src=g;for(var p=document.getElementById(e+"_htmlLayer_div").cloneNode(!0),v=document.getElementById("overview_htmllayer_div");v.firstChild;)v.firstChild.remove();for(var w=0;w<p.children.length;w++){var y=p.children[w].cloneNode(!0);v.appendChild(y)}},overviewMouseEventArgs:function(e,t){var i=document.getElementById("overview"),n={altKey:e.altKey,shiftKey:e.shiftKey,ctrlKey:e.ctrlKey,detail:e.detail,metaKey:e.metaKey,screenX:e.screenX,screenY:e.screenY,clientX:e.clientX,clientY:e.clientY,offsetX:e.offsetX,offsetY:e.offsetY,type:e.type,key:e.key,keyCode:e.keyCode,button:e.button,targetId:e.target.id,overviewGetBoundingClientRect:i.getBoundingClientRect(),targetCssClass:e.target.classList.value,touches:this.getTouches(e),offsetLeft:i.offsetLeft,offsetTop:i.offsetTop};t.invokeMethodAsync("InvokeOverviewEvents",n)}}}()}}]);(async()=>{await import(`${document.baseURI}_content/Syncfusion.Blazor/scripts/syncfusion-blazor-base.min.js?v=20.4.38`).then(()=>{sfBlazor.loadDependencies('sfdiagramcomponent');})})();