!function(t){var e={};function i(n){if(e[n])return e[n].exports;var s=e[n]={i:n,l:!1,exports:{}};return t[n].call(s.exports,s,s.exports,i),s.l=!0,s.exports}i.m=t,i.c=e,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)i.d(n,s,function(e){return t[e]}.bind(null,s));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="_content/Syncfusion.Blazor/scripts/",i(i.s="./bundles/sf-maps.js")}({"./bundles/sf-maps.js":function(t,e,i){"use strict";i.r(e);i("./modules/sf-maps.js")},"./modules/sf-maps.js":function(t,e){window.sfBlazor=window.sfBlazor||{},window.sfBlazor.Maps=function(){"use strict";var t=function(t,e,i,n){return new(i||(i=Promise))((function(s,a){function o(t){try{l(n.next(t))}catch(t){a(t)}}function r(t){try{l(n.throw(t))}catch(t){a(t)}}function l(t){t.done?s(t.value):new i((function(e){e(t.value)})).then(o,r)}l((n=n.apply(t,e||[])).next())}))},e=function(t,e){var i,n,s,a,o={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return a={next:r(0),throw:r(1),return:r(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function r(a){return function(r){return function(a){if(i)throw new TypeError("Generator is already executing.");for(;o;)try{if(i=1,n&&(s=2&a[0]?n.return:a[0]?n.throw||((s=n.return)&&s.call(n),0):n.next)&&!(s=s.call(n,a[1])).done)return s;switch(n=0,s&&(a=[2&a[0],s.value]),a[0]){case 0:case 1:s=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,n=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(s=o.trys,(s=s.length>0&&s[s.length-1])||6!==a[0]&&2!==a[0])){o=0;continue}if(3===a[0]&&(!s||a[1]>s[0]&&a[1]<s[3])){o.label=a[1];break}if(6===a[0]&&o.label<s[1]){o.label=s[1],s=a;break}if(s&&o.label<s[2]){o.label=s[2],o.ops.push(a);break}s[2]&&o.ops.pop(),o.trys.pop();continue}a=e.call(t,o)}catch(t){a=[6,t],n=0}finally{i=s=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,r])}}},i=document.createElementNS("http://www.w3.org/2000/svg","rect"),n=function(t,e){this.x=t,this.y=e};function s(t){var e=document.createElementNS("http://www.w3.org/2000/svg","g");return e.setAttribute("id",t),e}function a(t,e,i){var n="";switch(t){case"Balloon":n="M15,0C8.8,0,3.8,5,3.8,11.2C3.8,17.5,9.4,24.4,15,30c5.6-5.6,11.2-12.5,11.2-18.8C26.2,5,21.2,0,15,0z M15,16c-2.8,0-5-2.2-5-5s2.2-5,5-5s5,2.2,5,5S17.8,16,15,16z";break;case"Cross":n="M "+i.x+" "+(i.y-e.height/2)+" L "+i.x+" "+(i.y+e.height/2)+" M "+(i.x-e.width/2)+" "+i.y+" L "+(i.x+e.width/2)+" "+i.y;break;case"Diamond":n="M "+i.x+" "+(i.y-e.height/2)+" L "+(i.x+e.width/2)+" "+i.y+" L "+i.x+" "+(i.y+e.height/2)+" L "+(i.x-e.width/2)+" "+i.y+" Z";break;case"Star":n="M "+(i.x+e.width/3)+" "+(i.y-e.height/2)+" L "+(i.x-e.width/2)+" "+(i.y+e.height/6)+" L "+(i.x+e.width/2)+" "+(i.y+e.height/6)+" L "+(i.x-e.width/3)+" "+(i.y-e.height/2)+" L "+i.x+" "+(i.y+e.height/2)+" L "+(i.x+e.width/3)+" "+(i.y-e.height/2)+" Z";break;case"Triangle":n="M "+i.x+" "+(i.y-e.height/2)+" L "+(i.x+e.width/2)+" "+(i.y+e.height/2)+" L "+(i.x-e.width/2)+" "+(i.y+e.height/2)+" Z";break;case"HorizontalLine":n=" M "+(i.x-e.width/2)+" "+i.y+" L "+(i.x+e.width/2)+" "+i.y;break;case"VerticalLine":n="M "+i.x+" "+(i.y-e.height/2)+" L "+i.x+" "+(i.y+e.height/2);break;case"InvertedTriangle":n="M "+(i.x-e.width/2)+" "+(i.y-e.height/2)+" L "+(i.x+e.width/2)+" "+(i.y-e.height/2)+" L "+i.x+" "+(i.y+e.height/2)+" Z";break;case"Pentagon":for(var s=void 0,a=void 0,o=0;o<5;o++)s=e.width/2*Math.cos(Math.PI/180*(72*o)),a=e.height/2*Math.sin(Math.PI/180*(72*o)),n+=(0===o?"M ":"L ")+(i.x+s)+" "+(i.y+a);n+=" Z"}return n}var o=function(){function o(t,e,i,n){this.allowPanning=!1,this.isPanning=!1,this.zoomClick=!1,this.mouseClick=!1,this.position=null,this.height=0,this.width=0,this.markerClusterExpandCheck=!1,this.svgCreated=!1,this.zoomIn=1,this.zoomOut=1,this.scaleFactor=1,this.factorCount=0,this.svg=document.createElementNS("http://www.w3.org/2000/svg","svg"),this.lastScale=1,this.isTouch=!1,this.touchMoveList=[],this.touchStartList=[],this.newTiles=[],this.tileTranslatePoint=null,this.isToolbarTooltip=!1,this.marginTop=0,this.marginLeft=0,this.isPinchZoomed=!1,this.id=t,this.element=e,this.dotNetRef=n,this.layerCount=i.layerCount,this.clusterSettings=i.markerCluster?JSON.parse(i.markerCluster):null,this.dataSource=i.dataSource?JSON.parse(i.dataSource):null,this.navigation=i.navigationSettings?JSON.parse(i.navigationSettings):null,this.shapeTranslatePoint=i.shapeTranslatePoint?i.shapeTranslatePoint:null,this.shapeBorderWidth=i.shapeBorderWidth,this.projectionType=i.projectionType,this.options=i,this.options.layerHighlightSettings=JSON.parse(this.options.layerHighlightSettings),this.options.markerHighlightSettings=JSON.parse(this.options.markerHighlightSettings),this.options.bubbleHighlightSettings=JSON.parse(this.options.bubbleHighlightSettings),this.options.navigationHighlightSettings=JSON.parse(this.options.navigationHighlightSettings),this.options.selectionSettings=JSON.parse(this.options.selectionSettings),this.element.blazor__instance=this,this.marginLeft=0,this.urlTemplate=i.urlTemplate?i.urlTemplate:null,this.newTiles=[],this.isToolbarTooltip=!1,this.isTouch=!1,this.pinchFactor=1,this.lastScale=1,this.touchStartList=[],this.touchMoveList=[]}return o.prototype.wireEvents=function(){sf.base.EventHandler.add(this.element,"mousewheel",this.mapMouseWheel.bind(this),this),sf.base.EventHandler.add(this.element,"touchmove mousemove",this.mouseMove.bind(this),this),sf.base.EventHandler.add(this.element,"touchend mouseup",this.mouseUp.bind(this),this),sf.base.EventHandler.add(this.element,"touchstart mousedown",this.mouseDown.bind(this),this),sf.base.EventHandler.add(this.element,"click",this.click.bind(this),this),sf.base.EventHandler.add(this.element,"dblclick",this.doubleClick.bind(this),this),sf.base.EventHandler.add(this.element,"contextmenu",this.rightClick.bind(this),this),window.addEventListener("resize",this.reSize.bind(this))},o.prototype.rightClick=function(t){var e=t.target.id,i=this.getMousePosition(t.pageX,t.pageY);this.dotNetRef.invokeMethodAsync("TriggerMouseClick",i.x,i.y,document.getElementById(e))},o.prototype.reSize=function(){var t,e;null!==this.element&&(t=this.element.getBoundingClientRect().width,e=this.element.getBoundingClientRect().height),this.previousHeight==e&&this.previousWidth==t||(this.previousHeight=e,this.previousWidth=t,this.dotNetRef.invokeMethodAsync("TriggerResize",t,e))},o.prototype.doubleClick=function(t){if(2===t.detail&&this.options.doubleClickZoom){var e=document.getElementById(this.id).getBoundingClientRect(),i=this.scaleFactor+1;i>=1&&(this.scaleFactor=i,this.removeCluster(),this.dotNetRef.invokeMethodAsync("MouseWheelZoom",t.pageX-e.x,t.pageY-e.y,t.detail,t.which,"doubleClick"))}var n=t.target.id,s=this.getMousePosition(t.pageX,t.pageY);if("DoubleClick"===this.options.tooltipDisplayMode){var a=parseInt(n.split("_LayerIndex_")[1].split("_")[0],10);if(n.indexOf("shapeIndex")>-1){var o=parseInt(n.split("_shapeIndex_")[1].split("_")[0],10);this.dotNetRef.invokeMethodAsync("TriggerShapeTooltip",n,s.x,s.y,a,o,"Shape",0)}else if(n.indexOf("_MarkerIndex_")>-1&&-1===n.indexOf("_cluster_")){var r=parseInt(n.split("_MarkerIndex_")[1].split("_")[0],10),l=parseInt(n.split("_dataIndex_")[1].split("_")[0],10);this.dotNetRef.invokeMethodAsync("TriggerShapeTooltip",n,s.x,s.y,a,l,"Marker",r)}else if(n.indexOf("_BubbleIndex_")>-1){r=parseInt(n.split("_BubbleIndex_")[1].split("_")[0],10),l=parseInt(n.split("_dataIndex_")[1].split("_")[0],10);this.dotNetRef.invokeMethodAsync("TriggerShapeTooltip",n,s.x,s.y,a,l,"Bubble",r)}else-1===n.indexOf("_shapeIndex_")&&-1===n.indexOf("_MarkerIndex_")&&-1===n.indexOf("_BubbleIndex_")&&this.dotNetRef.invokeMethodAsync("TriggerShapeTooltip","",s.x,s.y,0,0,"",0)}this.dotNetRef.invokeMethodAsync("TriggerDoubleClick",s.x,s.y,document.getElementById(n))},o.prototype.mapMouseWheel=function(t){t.preventDefault();var e=document.getElementById(this.element.id).getBoundingClientRect(),i="ZoomIn"===(t.wheelDelta/120>0?"ZoomIn":"ZoomOut")?this.scaleFactor+1:this.scaleFactor-1;i>=1&&(this.scaleFactor=i,this.removeCluster(),this.dotNetRef.invokeMethodAsync("MouseWheelZoom",t.pageX-e.x,t.pageY-e.y,t.detail,t.wheelDelta,"wheelZoom"))},o.prototype.mouseUp=function(t){var e=t.target.id;this.lastScale=1,"touchend"===t.type?(t.preventDefault(),0,0,this.isTouch=!1,this.touchMoveList=[],this.touchStartList=[]):(this.moveClientX=t.pageX,this.moveClientY=t.pageY,t.layerX,t.layerY);var i=this.getMousePosition(this.moveClientX,this.moveClientY);this.moveClientX=i.x,this.moveClientY=i.y;e.split("_")[0];if(!(e.indexOf("_Zooming_")>-1)&&this.options.zoomOnClick&&!this.isPanning){document.getElementById(t.target.id.split("_")[0]).getBoundingClientRect();var n=this.scaleFactor+1;if(n>=1){this.scaleFactor=n,this.removeCluster();var s=this.getMousePosition(t.pageX,t.pageY);this.dotNetRef.invokeMethodAsync("MouseWheelZoom",s.x,s.y,t.detail,t.which,"click")}}if(this.allowPanning&&this.isPanning&&this.options.enablePanning){if(this.isTileMap)for(var a=0;a<this.newTiles.length;a++){var o=document.getElementById(this.element.id+"tile"+this.newTiles[a]);o.parentNode.removeChild(o)}this.newTiles=[],this.dotNetRef.invokeMethodAsync("UpdateTranslatePoint",this.shapeTranslatePoint,this.tileTranslatePoint,this.scaleFactor,!1)}if(this.isPinchZoomed&&(this.isPinchZoomed=!1,this.dotNetRef.invokeMethodAsync("UpdateTranslatePoint",this.shapeTranslatePoint,this.tileTranslatePoint,this.scaleFactor,!0)),this.isPanning=!1,this.allowPanning=!1,this.options.enableZoom&&this.options.enableSelectionZooming&&this.mouseClick&&this.zoomClick){this.svgCreated=!1,this.mouseClick=!1;var r=document.getElementById(this.element.id+"drawRect");if(r){r.remove(),this.removeCluster();var l=0;if(this.height>0&&this.width>0){var h=this.element.getBoundingClientRect();this.isTileMap?(l=this.scaleFactor+Math.round(this.scaleFactor+(h.width/this.width+h.height/this.height)/2),l-=2):l=this.scaleFactor+Math.round((h.width/this.width+h.height/this.height)/2),this.scaleFactor=l}l>=1&&this.dotNetRef.invokeMethodAsync("TriggerZoomSelection",this.position.x,this.position.y,this.height,this.width)}}if(e.indexOf("_LayerIndex_")>-1){var d,c=void 0,p=void 0,u=void 0,g=void 0;d=parseInt(e.split("_LayerIndex_")[1].split("_")[0],10),e.indexOf("shapeIndex")>-1&&(c=parseInt(e.split("_shapeIndex_")[1].split("_")[0],10),p=-1!==e.indexOf("_dataIndex_")?parseInt(e.split("_dataIndex_")[1].split("_")[0],10):null,this.options.selectionSettings&&this.options.selectionSettings[d]&&this.options.selectionSettings[d].Enable&&this.removeAllHighlight(),this.dotNetRef.invokeMethodAsync("SelectMap",e,d,c,"Shape",p)),e.indexOf("_BubbleIndex_")>-1&&(u=parseInt(e.split("_BubbleIndex_")[1].split("_")[0],10),p=-1!==e.indexOf("_dataIndex_")?parseInt(e.split("_dataIndex_")[1].split("_")[0],10):null,this.removeAllHighlight(),this.dotNetRef.invokeMethodAsync("SelectMap",e,d,p,"Bubble",u)),e.indexOf("_NavigationIndex_")>-1&&(g=parseInt(e.split("_NavigationIndex_")[1].split("_")[0],10),p=-1!==e.indexOf("_Line_")?parseInt(e.split("_Line_")[1].split("_")[0],10):null,this.removeAllHighlight(),this.dotNetRef.invokeMethodAsync("SelectMap",e,d,p,"NavigationLine",g))}this.dotNetRef.invokeMethodAsync("TriggerClickEventArgs",!1,i.x,i.y,document.getElementById(e))},o.prototype.targetTouches=function(t){for(var e=[],i=0;i<t.length;i++)e.push({pageX:t[i].pageX,pageY:t[i].pageY});return e},o.prototype.mouseMove=function(t){var e,n,s,a,o=t.target.id;(this.moveClientX=t.pageX,this.moveClientY=t.pageY,"touchmove"===t.type?(this.moveClientX=s=t.touches[0].clientX,this.moveClientY=a=t.touches[0].clientY,2===t.touches.length&&(this.touchMoveList=this.targetTouches(t.touches)),t.preventDefault(),e=0,n=0):(this.moveClientX=t.pageX,this.moveClientY=t.pageY,s=t.clientX,a=t.clientY,e=t.layerX,n=t.layerY),"1"===this.options.legendSettings&&o.indexOf("_MapAreaBorder")>-1)&&(null!==document.getElementById(this.element.id+"_Interactive_Legend")&&this.dotNetRef.invokeMethodAsync("MapsAreaInteractive"));if("1"===this.options.legendSettings&&o.indexOf("_LayerIndex")>-1){var r=document.getElementById(t.target.id).getAttribute("fill");this.dotNetRef.invokeMethodAsync("RenderInteractive",t.target.id,r)}var l=this.getMousePosition(this.moveClientX,this.moveClientY);this.moveClientX=l.x,this.moveClientY=l.y;var h=o.split("_")[0];if(this.highlightMap(t),this.options.enableZoom&&this.options.enableSelectionZooming&&this.mouseClick&&this.zoomClick){t.preventDefault(),this.svgCreated||(this.startValue=this.svgPoint(this.svg,s,a),this.svgCreated=!0),this.position=this.svgPoint(this.svg,s,a);var d=document.getElementById(this.element.id).getBoundingClientRect();this.width=Math.abs(this.position.x-this.startValue.x),this.height=Math.abs(this.position.y-this.startValue.y),this.position.x>this.startValue.x&&(this.position.x=this.startValue.x),this.position.y>this.startValue.y&&(this.position.y=this.startValue.y),this.position.x=this.position.x-d.x,this.position.y=this.position.y-d.y,i.setAttributeNS(null,"x",this.position.x.toString()),i.setAttributeNS(null,"y",this.position.y.toString()),i.setAttributeNS(null,"id",this.element.id+"drawRect"),i.setAttributeNS(null,"width",this.width.toString()),i.setAttributeNS(null,"height",this.height.toString()),i.setAttributeNS(null,"fill","#d3d3d3"),i.setAttributeNS(null,"stroke-dasharray","3"),i.setAttributeNS(null,"opacity","0.5"),i.setAttributeNS(null,"stroke","#009900"),null!==document.getElementById(this.element.id+"_tile_parent")?document.getElementById(this.element.id+"_LayerCollections").parentNode.appendChild(i):document.getElementById(this.element.id+"_svg").appendChild(i)}if(this.allowPanning&&this.options.enablePanning&&(this.clientX!==this.moveClientX||this.clientY!==this.moveClientY)){if(this.isPanning=!0,!this.isTileMap){for(var c=document.getElementById(this.element.id+"_LayerCollections"),p=0;p<c.children.length;p++)for(var u=0;u<c.children[p].childElementCount;u++)if(c.children[p].children[u].id.indexOf("Polygon_Group")>-1){this.scaleFactor=c.children[p].children[u].transform.baseVal[0].matrix.a;break}if(this.clientX!==this.moveClientX&&this.clientY!==this.moveClientY){var g=this.clientX-this.moveClientX,m=this.clientY-this.moveClientY;this.panning(g,m,e,n,this.scaleFactor),this.clientX=this.moveClientX,this.clientY=this.moveClientY}}if(o.indexOf(h)>-1)if(null!==(c=document.getElementById(t.currentTarget.id+"_animated_tiles"))){this.isTileMap=!0,this.scaleFactor=parseInt(c.className,10);g=this.clientX-this.moveClientX,m=this.clientY-this.moveClientY;this.panning(g,m,e,n,this.scaleFactor),this.clientX=this.moveClientX,this.clientY=this.moveClientY}}if(this.options.enablePinchZooming&&2===this.touchMoveList.length&&2===this.touchStartList.length&&(this.isPinchZoomed=!0,this.pinchZooming(t)),!(this.allowPanning||this.mouseClick&&this.zoomClick)&&o.indexOf("shapeIndex")>-1&&"MouseMove"===this.options.tooltipDisplayMode){var f=parseInt(o.split("_LayerIndex_")[1].split("_")[0],10),_=parseInt(o.split("_shapeIndex_")[1].split("_")[0],10);this.dotNetRef.invokeMethodAsync("TriggerShapeTooltip",o,l.x,l.y,f,_,"Shape",0)}if((-1===o.indexOf("_shapeIndex_")&&-1===o.indexOf("_MarkerIndex_")&&-1===o.indexOf("_BubbleIndex_")&&"MouseMove"===this.options.tooltipDisplayMode||this.isToolbarTooltip&&-1===o.indexOf("_Zooming_ToolBar_")&&"MouseMove"!==this.options.tooltipDisplayMode)&&this.dotNetRef.invokeMethodAsync("TriggerShapeTooltip","",l.x,l.y,0,0,"",0),this.isToolbarTooltip=!1,o.indexOf("_Zooming_ToolBar_")>-1){this.isToolbarTooltip=!0;var y=o.split("_Zooming_ToolBar_")[1].split("_")[0];this.dotNetRef.invokeMethodAsync("TriggerShapeTooltip",o,l.x,l.y,0,0,y,0)}if(o.indexOf("_LayerIndex_")>-1&&o.indexOf("_MarkerIndex_")>-1){f=parseInt(o.split("_LayerIndex_")[1].split("_")[0],10);var b=parseInt(o.split("_MarkerIndex_")[1].split("_")[0],10),v=parseInt(o.split("_dataIndex_")[1].split("_")[0],10);this.dotNetRef.invokeMethodAsync("TriggerMouseMove",f,b,v,o,l.x,l.y,o.indexOf("cluster")>-1?"cluster":"marker")}if(o.indexOf("_LayerIndex_")>-1&&o.indexOf("_BubbleIndex_")>-1){f=parseInt(o.split("_LayerIndex_")[1].split("_")[0],10),b=parseInt(o.split("_BubbleIndex_")[1].split("_")[0],10),v=parseInt(o.split("_dataIndex_")[1].split("_")[0],10);this.dotNetRef.invokeMethodAsync("TriggerBubbleMouseMove",f,b,v,o,l.x,l.y)}},o.prototype.mouseDown=function(t){var e=t.target.id;this.isPinchZoomed=!1,this.isTouch=!1,"touchstart"===t.type?(t.preventDefault(),this.clientX=t.touches[0].clientX,this.clientY=t.touches[0].clientY,2===t.touches.length&&(this.touchStartList=this.targetTouches(t.touches)),this.isTouch=!0):(this.clientX=t.pageX,this.clientY=t.pageY);var i=this.getMousePosition(this.clientX,this.clientY);this.clientX=i.x,this.clientY=i.y,this.options.enableZoom&&this.options.enableSelectionZooming&&this.zoomClick&&(this.mouseClick=!0,t.preventDefault()),this.mouseClick||-1!==e.indexOf("ToolBar_Pan")||(e.indexOf("_MapAreaBorder")>-1&&this.options.enablePanning&&(this.allowPanning=!0),e.indexOf("")>-1&&!(e.indexOf("Zooming")>-1)&&this.options.enablePanning&&(this.allowPanning=!0))},o.prototype.pinchZooming=function(t){this.pinchFactor=this.scaleFactor;var e=this.scaleFactor,i=this.areaRect;this.previousScale=this.scaleFactor,this.previousPoint=this.shapeTranslatePoint;this.tileTranslatePoint;var n=this.calculateScale(this.touchStartList,this.touchMoveList),s=this.getTouchCenter(this.touchMoveList),a=n/this.lastScale;if(this.lastScale=n,this.pinchFactor*=a,this.pinchFactor=Math.min(this.options.maxZoom,Math.max(this.options.minZoom,this.pinchFactor)),this.isTileMap)this.getTileTranslatePosition(e,this.pinchFactor,{x:s.x,y:s.y},null),this.tileZoomLevel=this.pinchFactor,this.scaleFactor=this.pinchFactor,this.translatePoint.x=(this.tileTranslatePoint.x-.01*this.scaleFactor)/Math.pow(2,this.scaleFactor-1),this.translatePoint.y=(this.tileTranslatePoint.y-.01*this.scaleFactor)/Math.pow(2,this.scaleFactor-1),this.generateTiles(),this.renderMarkers();else{var o=Math.abs(this.baseMapBounds.minBounds.x-this.baseMapBounds.maxBounds.x),r=Math.abs(this.baseMapBounds.minBounds.y-this.baseMapBounds.maxBounds.y),l=Math.abs(this.baseMapBounds.maxBounds.y-this.baseMapBounds.minBounds.y)*this.pinchFactor,h=this.shapeTranslatePoint.x-(i.width/this.scaleFactor-i.width/this.pinchFactor)/(i.width/s.x),d=this.shapeTranslatePoint.y-(i.height/this.scaleFactor-i.height/this.pinchFactor)/(i.height/s.y);h=l<this.areaRect.height?i.x+(-this.baseMapBounds.minBounds.x+(i.width/2-o/2)):h,d=l<this.areaRect.height?i.y+(-this.baseMapBounds.minBounds.y+(i.height/2-r/2)):d,this.scaleFactor=this.pinchFactor,this.shapeTranslatePoint={x:h,y:d},this.applyTransform()}},o.prototype.getTileTranslatePosition=function(t,e,i,n){var s="ZoomOut"===n?10:"Reset"===n&&e>1?0:10,a=256*Math.pow(2,t),o=256*Math.pow(2,e),r=(i.x-this.tileTranslatePoint.x)/a*100,l=(i.y-this.tileTranslatePoint.y)/a*100,h=this.baseMapBounds.availableSize;this.tileTranslatePoint.x=1===e?h.width/2-256:i.x-r*o/100,this.tileTranslatePoint.y=1===e?h.height/2-256+2*s:i.y-l*o/100},o.prototype.calculateScale=function(t,e){var i=this.getDistance(t[0],t[1]);return this.getDistance(e[0],e[1])/i},o.prototype.getDistance=function(t,e){var i=t.pageX-e.pageX,n=t.pageY-e.pageY;return Math.sqrt(i*i+n*n)},o.prototype.sum=function(t,e){return t+e},o.prototype.getTouchCenter=function(t){return{x:t.map((function(t){return t.pageX})).reduce(this.sum)/t.length,y:t.map((function(t){return t.pageY})).reduce(this.sum)/t.length}},o.prototype.highlightMap=function(t){var e=t.target,i=e.id;if(this.removeAllHighlight(),i.indexOf("_LayerIndex_")>-1){var n=parseInt(i.split("_LayerIndex_")[1].split("_")[0],10),s=i.indexOf("_dataIndex_")>-1?parseInt(i.split("_dataIndex_")[1].split("_")[0],10):0;if(i.indexOf("shapeIndex")>-1&&this.options.layerHighlightSettings[n]&&this.options.layerHighlightSettings[n].Enable){if(!e.classList.contains("mapShapeSelection")){var a=parseInt(i.split("_shapeIndex_")[1].split("_")[0],10);this.handleHighlight(e,"Shape",this.options.layerHighlightSettings[n]),this.dotNetRef.invokeMethodAsync("TriggerShapeHighlight",n,a,i)}}else if(i.indexOf("_BubbleIndex_")>-1){var o=parseInt(i.split("_BubbleIndex_")[1].split("_")[0],10);this.options.bubbleHighlightSettings[n][o]&&this.options.bubbleHighlightSettings[n][o].Enable&&!e.classList.contains("mapBubbleSelection")&&(this.handleHighlight(e,"Bubble",this.options.bubbleHighlightSettings[n][o]),this.dotNetRef.invokeMethodAsync("TriggerItemHighlight","Bubble",n,o,s,i))}else if(i.indexOf("_NavigationIndex_")>-1){var r=parseInt(i.split("_NavigationIndex_")[1].split("_")[0],10);if(this.options.navigationHighlightSettings[n][r]&&this.options.navigationHighlightSettings[n][r].Enable&&!e.classList.contains("mapNavigationSelection")){if(this.handleHighlight(e,"Navigation",this.options.navigationHighlightSettings[n][r]),""!==e.getAttribute("marker-end")||""!==e.getAttribute("marker-end"))document.getElementById(this.id+"_triangle_"+i.lastIndexOf(i)).setAttribute("class","highlightNavigation");this.dotNetRef.invokeMethodAsync("TriggerItemHighlight","Navigation",n,r,0,i)}}else if(i.indexOf("_MarkerIndex_")>-1&&-1===i.indexOf("_cluster_")){var l=parseInt(i.split("_MarkerIndex_")[1].split("_")[0],10);this.options.markerHighlightSettings[n][l]&&this.options.markerHighlightSettings[n][l].Enable&&!e.classList.contains("mapMarkerSelection")&&(this.handleHighlight(e,"Marker",this.options.markerHighlightSettings[n][l]),this.dotNetRef.invokeMethodAsync("TriggerItemHighlight","Marker",n,l,s,i))}}else if(i.indexOf("_Legend_Shape_")>-1&&this.options.layerHighlightSettings[0]&&this.options.layerHighlightSettings[0].Enable&&!e.classList.contains("mapShapeSelection")){e.classList.add("highlightShape");var h=document.querySelectorAll('path[fill*="" + targetElement.getAttribute("fill") + ""]');if(h&&h.length>0)for(var d=0;d<h.length;d++)this.handleHighlight(h[d],"Shape",this.options.layerHighlightSettings[0])}},o.prototype.removeAllHighlight=function(){this.removeHighlight("Shape"),this.removeHighlight("Marker"),this.removeHighlight("Bubble"),this.removeHighlight("Navigation")},o.prototype.handleHighlight=function(t,e,i){if("Shape"===e){var n=document.querySelectorAll('rect[id*="'+this.element.id+'_Legend_Shape_Index"]');if(n&&n.length>0)for(var s=0;s<n.length;s++)n[s].getAttribute("fill")===t.getAttribute("fill")&&n[s].classList.add("highlight"+e)}t.classList.add("highlight"+e),null!==document.querySelector("#highlight"+e+"Style")&&0!==document.querySelector("#highlight"+e+"Style").length?this.customizeStyle("highlight"+e+"Style","highlight"+e,i):this.createStyle("highlight"+e+"Style","highlight"+e,i)},o.prototype.removeHighlight=function(t){var e=document.querySelectorAll(".highlight"+t);if(e&&e.length>0)for(var i=0;i<e.length;i++)e[i].classList.remove("highlight"+t)},o.prototype.createStyle=function(t,e,i){var n=document.createElement("style");n.id=t,n.innerHTML="."+e+" {fill:"+i.Fill+";opacity:"+i.Opacity+";stroke:"+i.BorderColor+";stroke-width:"+i.BorderWidth,document.body.appendChild(n)},o.prototype.customizeStyle=function(t,e,i){document.getElementById(t).innerHTML="."+e+" {fill:"+i.Fill+";opacity:"+i.Opacity+";stroke:"+i.BorderColor+";stroke-width:"+i.BorderWidth},o.prototype.renderMarkers=function(){for(var t=document.getElementById(this.element.id+"_LayerCollections"),e=0;e<t.childElementCount;e++){var i=t.childNodes[e];if("g"===i.tagName){i.id.indexOf("_LayerIndex_")>-1&&parseFloat(i.id.split("_LayerIndex_")[1].split("_")[0]);for(var n=0;n<i.childNodes.length;n++){var s=i.childNodes[n];if(s.COMMENT_NODE!==s.nodeType)if(s.id.indexOf("Polygon")>-1)s.setAttribute("transform","scale("+Math.pow(2,this.scaleFactor-1)+") translate( "+this.translatePoint.x+" "+this.translatePoint.y+" )");else if(s.id.indexOf("_MarkerGroup")>-1)for(var a=0;a<s.childElementCount;a++)this.markerTranslate(s.childNodes[a],0,this.translatePoint.x,this.translatePoint.y,this.scaleFactor);else if(s.id.indexOf("_line_Group")>-1)if(this.isTileMap)for(var o=0;o<s.childElementCount;o++){var r=document.getElementById(s.children[o].id);for(a=1;a<r.childElementCount;a++){var l=parseInt(r.childNodes[0].id.split("_LayerIndex_")[1].split("_")[0],10),h=parseInt(r.childNodes[0].id.split("_NavigationIndex_")[1].split("_")[0],10);this.navigationTranslate(r.children[a],0,l,h)}}else s.setAttribute("transform","scale("+this.scaleFactor+") translate( "+this.translatePoint.x+" "+this.translatePoint.y+" )")}}}},o.prototype.markerTranslate=function(t,e,i,n,s){var a=parseInt(t.id.split("_LayerIndex_")[1].split("_")[0],10),o=parseInt(t.id.split("_MarkerIndex_")[1].split("_")[0],10),r=parseInt(t.id.split("_dataIndex_")[1].split("_")[0],10),l=0!==this.dataSource[a].length&&0!==this.dataSource[a][o].length?this.dataSource[a][o][r].Longitude:null,h=0!==this.dataSource[a].length&&0!==this.dataSource[a][o].length?this.dataSource[a][o][r].Latitude:null;if(h&&l)if(this.isTileMap){var d=this.convertTileLatLongToPoint({x:l,y:h},this.tileZoomLevel,this.tileTranslatePoint,!0);t.setAttribute("transform","translate( "+d.x+" "+d.y+" )")}else{var c=this.convertGeoToPoint(h,l,e);c.x=(c.x+i)*s,c.y=(c.y+n)*s,t.setAttribute("transform","translate( "+c.x+" "+c.y+" )")}},o.prototype.navigationTranslate=function(t,e,i,n){if(!sf.base.isNullOrUndefined(this.navigation[i])){var s=this.navigation[i][n].Angle,a=void 0,o=void 0,r=[];if(this.navigation[i][n].Latitude.length===this.navigation[i][n].Longitude.length)for(var l=0;l<this.navigation[i][n].Latitude.length;l++){var h=this.isTileMap?this.convertTileLatLongToPoint({x:this.navigation[i][n].Longitude[l],y:this.navigation[i][n].Latitude[l]},this.tileZoomLevel,this.tileTranslatePoint,!0):this.convertGeoToPoint(this.navigation[i][n].Latitude[l],this.navigation[i][n].Longitude[l],e);r.push(h)}for(var d=0;d<r.length-1;d++){s=1<(s=-1>s?-1:s)?1:s;var c=this.convertRadius(r[d],r[d+1]);s<=1&&s>0&&(a=0,r[d].x>r[d+1].x&&(a=1)),s>=-1&&s<0&&(a=1,r[d].x>r[d+1].x&&(a=0)),r[d].x!==r[d+1].x&&(o=0===(s=Math.abs(s))?"M "+r[d].x+","+r[d].y+"L "+r[d+1].x+","+r[d+1].y+" ":"M "+r[d].x+","+r[d].y+" A "+(c/2+(1-s)*c/(10*s))+" "+(c/2+(1-s)*c/(10*s))+" 0,0,"+a+" , "+r[d+1].x+","+r[d+1].y+" "),t.setAttribute("d",o)}}},o.prototype.dataLabelTranslate=function(t,e,i,n,s,a){var o=parseInt(t.id.split("_LayerIndex_")[1].split("_")[0],10),r=parseFloat(t.id.split("_LabelIndex_")[1].split("_")[0]),l=this.labelCollection[o][r],h=l.LocationX,d=l.LocationY;"Template"!==a&&(h=(h+i)*s,d=(d+n)*s,t.setAttribute("transform","translate( "+h+" "+d+" )"))},o.prototype.convertTileLatLongToPoint=function(t,e,i,n){var s=256*Math.pow(2,e),a=(t.x+180)/360,o=Math.sin(t.y*Math.PI/180),r=.5-Math.log((1+o)/(1-o))/(4*Math.PI),l=t.x,h=t.y;return n&&(l=a*s+.5+i.x,h=r*s+.5+i.y),{x:l,y:h}},o.prototype.panning=function(t,e,i,n,s){if(this.isTileMap){o=this.tileTranslatePoint,r=this.tileTranslatePoint.x-t,l=this.tileTranslatePoint.y-e;this.tileTranslatePoint.x=r,this.tileTranslatePoint.y=l,(this.tileTranslatePoint.y>-10&&e<0||this.tileTranslatePoint.y<-256*(Math.pow(2,s)-2)&&e>0)&&(this.tileTranslatePoint.x=r+t,this.tileTranslatePoint.y=l+e),this.translatePoint.x=(this.tileTranslatePoint.x-t)/Math.pow(2,s-1),this.translatePoint.y=(this.tileTranslatePoint.y-e)/Math.pow(2,s-1);var a=this.getTileGeoLocation(i,n);this.generateTiles(),this.renderMarkers(),this.dotNetRef.invokeMethodAsync("TriggerTilePanning",o.x,o.y,r,l,s,Math.pow(2,s),a.latitude,a.longitude)}else{var o=this.shapeTranslatePoint,r=this.shapeTranslatePoint.x-t/s,l=this.shapeTranslatePoint.y-e/s,h=document.getElementById(this.element.id+"_LayerCollections").getBoundingClientRect(),d=document.getElementById(this.element.id+"_svg").getBoundingClientRect(),c=t<0?h.left<=d.left+this.areaRect.x:h.left+h.width>=d.left+d.width+this.areaRect.x+this.marginLeft,p=e<0?h.top<=d.top+this.areaRect.y:h.top+h.height+this.marginTop>=d.top+d.height;c&&p?(this.shapeTranslatePoint={x:r,y:l},this.applyTransform()):c?(this.shapeTranslatePoint={x:r,y:this.shapeTranslatePoint.y},this.applyTransform()):p&&(this.shapeTranslatePoint={x:this.shapeTranslatePoint.x,y:l},this.applyTransform()),this.dotNetRef.invokeMethodAsync("TriggerPanning",o.x,o.y,r,l,s)}},o.prototype.applyTransform=function(){for(var t=this.isTileMap?this.translatePoint.x:this.shapeTranslatePoint.x,e=this.isTileMap?this.translatePoint.y:this.shapeTranslatePoint.y,i=document.getElementById(this.element.id+"_LayerCollections"),n=0;n<i.childNodes.length;n++){var s=i.childNodes[n];if(s.COMMENT_NODE!==s.nodeType&&"g"===s.tagName){s.id.indexOf("_LayerIndex_")>-1&&parseFloat(s.id.split("_LayerIndex_")[1].split("_")[0]);for(var a=this.calculateFactor(),o=0;o<s.childNodes.length;o++){var r=s.childNodes[o];if(r.COMMENT_NODE!==r.nodeType)if(r.id.indexOf("Polygon")>-1||r.id.indexOf("_line_Group")>-1)r.setAttribute("transform","scale("+this.scaleFactor+") translate( "+t+" "+e+" )");else if(r.id.indexOf("_MarkerGroup")>-1)for(var l=0;l<r.childNodes.length;l++)this.markerTranslate(r.childNodes[l],a,t,e,this.scaleFactor);else if(r.id.indexOf("_bubble_Group_")>-1)for(l=0;l<r.childNodes.length;l++){var h=r.childNodes[l],d=parseFloat(h.id.split("_LayerIndex_")[1].split("_")[0]),c=parseFloat(h.id.split("_BubbleIndex_")[1].split("_")[0]),p=parseFloat(h.id.split("_BubbleIndex_")[1].split("_")[2]);if(this.bubbleCollection[d]&&this.bubbleCollection[d][c]){var u=this.bubbleCollection[d][c][p],g=u.ZoomTranslatePoint.X,m=u.ZoomTranslatePoint.Y,f=(g+t)*this.scaleFactor,_=(m+e)*this.scaleFactor;h.setAttribute("transform","translate( "+f+" "+_+" )")}}else if(r.id.indexOf("_dataLableIndex_Group")>-1)for(l=0;l<r.childNodes.length;l++)this.dataLabelTranslate(r.childNodes[l],a,t,e,this.scaleFactor,"DataLabel")}}}},o.prototype.calculateFactor=function(){var t,e,i,n=1,s=this.baseMapBounds,a=this.areaRect.width,o=this.areaRect.height;if(s){var r=this.convertGeoToPoint(s.latitudeMin,s.longitudeMin,null),l=this.convertGeoToPoint(s.latitudeMax,s.longitudeMax,null);e=l.y-r.y,i=l.x-r.x}else e=i=500;return t=e<o?parseFloat(Math.abs(100*Number(o/Number(e.toString()+"e+1"))).toString().split(".")[0])/10:o/e,n=i<a?parseFloat(Math.abs(100*Number(a/Number(i.toString()+"e+1"))).toString().split(".")[0])/10:a/i,Math.min(n,t)},o.prototype.convertRadius=function(t,e){var i=e.x-t.x,n=e.y-t.y;return Math.sqrt(Math.pow(i,2)+Math.pow(n,2))},o.prototype.convertGeoToPoint=function(t,e,i){var n,s,a,o,r={width:this.areaRect.width,height:this.areaRect.height},l=this.degreesToRadians(t),h=this.degreesToRadians(e),d=null==i?Math.min(r.width,r.height):Math.min(r.width,r.height)*i;switch(this.projectionType){case"Mercator":var c={x:d/2,y:d/2};n=c.x+e*(d/360);var p=this.calculateBound(Math.sin(this.degreesToRadians(t)),-.9999,.9999);s=c.y+.5*Math.log((1+p)/(1-p))*(-d/(2*Math.PI));break;case"Winkel3":((a=this.aitoff(h,l)).x+h/(Math.PI/2))/2,(a.y+l)/2;break;case"Miller":h,1.25*Math.log(Math.tan(Math.PI/4+.4*l));break;case"Eckert3":2/(o=Math.sqrt(Math.PI*(4+Math.PI)))*h*(1+Math.sqrt(1-4*l*l/(Math.PI*Math.PI))),4/o*l;break;case"AitOff":(a=this.aitoff(h,l)).x,a.y;break;case"Eckert5":h*(1+Math.cos(l))/Math.sqrt(2+Math.PI),2*l/Math.sqrt(2+Math.PI);break;case"Equirectangular":h,l;break;case"Eckert6":o=(1+Math.PI/2)*Math.sin(l);for(var u=1/0,g=0;g<10&&Math.abs(u)>1e-6;g++)l-=u=(l+Math.sin(l)-o)/(1+Math.cos(l));o=Math.sqrt(2+Math.PI),h*(1+Math.cos(l))/o,2*l/o}return{x:n,y:s}},o.prototype.aitoff=function(t,e){var i=Math.cos(e),n=Math.sin(Math.cos(i*Math.cos(t/=2)));return{x:2*i*Math.sin(t)*n,y:Math.sin(e)*n}},o.prototype.degreesToRadians=function(t){return t*(Math.PI/180)},o.prototype.calculateBound=function(t,e,i){return sf.base.isNullOrUndefined(e)||(t=Math.max(t,e)),sf.base.isNullOrUndefined(i)||(t=Math.min(t,i)),t},o.prototype.getTileGeoLocation=function(t,e){var i=this.getBound(this.element.id),n=this.getBound(this.element.id+"_tile_parent");return this.pointToLatLong(t+this.areaRect.x-(n.x-i.x),e+this.areaRect.y-(n.y-i.y))},o.prototype.pointToLatLong=function(t,e){var i=256*Math.pow(2,this.scaleFactor),n=this.clip(t-this.translatePoint.x*this.scaleFactor,0,i-1)/i-.5,s=.5-this.clip(e-this.translatePoint.y*this.scaleFactor,0,i-1)/i;return{latitude:90-360*Math.atan(Math.exp(2*-s*Math.PI))/Math.PI,longitude:360*n}},o.prototype.generateTiles=function(){var t,e=1536,i=450,n=0,s=0,a=0;n=t=Math.pow(2,this.tileZoomLevel);var o=[];this.tileTranslatePoint.x+256*n<e&&(s=this.tileTranslatePoint.x>0?Math.ceil(this.tileTranslatePoint.x/256):0,a=this.tileTranslatePoint.x+256*n<e?Math.ceil((e-(this.tileTranslatePoint.x+256*n))/256):0),n+=s+a,n=this.horizontalPanXCount>=n?this.horizontalPanXCount:n,this.horizontalPan=!1;for(var r=Math.min(t,(-this.tileTranslatePoint.y+i)/256+1),l=Math.min(n,(-this.tileTranslatePoint.x+e+256*a)/256+1),h=-(this.tileTranslatePoint.x+256*s+256)/256,d=-(this.tileTranslatePoint.y+256)/256,c=Math.round(h);c<Math.round(l);c++)for(var p=Math.round(d);p<Math.round(r);p++){var u=256*c+this.tileTranslatePoint.x,g=256*p+this.tileTranslatePoint.y;if(u>-256&&u<=e&&g>-256&&g<i&&p>=0){var m=c;c<0&&(m=m%t+t);var f={x:m%t,y:p,left:u,top:g,height:256,width:256,src:null};-1===this.urlTemplate.indexOf("virtualearth")?f.src=this.urlTemplate.replace("level",this.scaleFactor.toString()).replace("tileX",f.x.toString()).replace("tileY",f.y.toString()):f.src=this.getBingMap(f,this.urlTemplate),o.push(f)}}var _=document.getElementById(this.element.id+"_animated_tiles");for(p=0;p<o.length;p++){var y=document.getElementById(this.element.id+"tile"+p),b=null,v=!1;y?b=y.childNodes[0]:((y=document.createElement("div")).id=this.element.id+"tile"+p,y.style.userSelect="none",b=document.createElement("img"),-1===this.newTiles.indexOf(p)&&this.newTiles.push(p),v=!0),b.src!==o[p].src&&b.setAttribute("src",o[p].src),y.style.position="absolute",y.style.left=o[p].left+"px",y.style.top=o[p].top+"px",y.style.height=o[p].height+"px",y.style.width=o[p].width+"px",v&&(y.appendChild(b),_.appendChild(y))}},o.prototype.getBingMap=function(t,e){for(var i,n="",s=["t0","t1","t2","t3"],a=Math.min(this.tileZoomLevel,this.options.maxZoom);a>0;a--){var o=0,r=1<<a-1;0!=(t.x&r)&&o++,0!=(t.y&r)&&(o+=2),n=n+""+o}return i=s[Math.min(parseInt(n.substr(n.length-1,1),10),s.length)],(e=e.replace("{quadkey}",n).replace("{subdomain}",i))+"&mkt=en-US&ur=IN&Key="+this.key},o.prototype.clip=function(t,e,i){return Math.min(Math.max(t,e),i)},o.prototype.svgPoint=function(t,e,i){var n=this.svg.createSVGPoint();return n.x=e,n.y=i,n.matrixTransform(t.getScreenCTM().inverse())},o.prototype.clusterExpand=function(t,e,i){var n,s=JSON.parse(e.dataSource),a=parseInt(t[0].split("_LayerIndex_")[1].split("_")[0],10),o=JSON.parse(this.options.markerCluster),r=JSON.parse(e.connectingLine),l=o[a],h=t[0].split("_LayerIndex_"),d=parseInt(h[1].split("_")[0],10),c=[],p=[];if(t[0].indexOf("_MarkerIndex_")>-1){var u=parseInt(h[1].split("_MarkerIndex_")[1].split("_")[0],10),g=parseInt(h[1].split("_dataIndex_")[1].split("_")[0],10);if(!isNaN(u)){n=s[g];var m=[];if(t[0].indexOf("_cluster_")>-1&&l.AllowClustering)for(var f=0;f<s.length;f++)s[f].Latitude===n.Latitude&&s[f].Longitude===n.Longitude&&m.push({data:n,index:d});if(t[0].indexOf("_cluster_")>-1){m=[];for(var _=0,y=document.getElementById(t[0].indexOf("_datalabel_")>-1?t[0].split("_datalabel_")[0]:t[0]).innerHTML.split(",").map(Number);_<y.length;_++){f=y[_];m.push({data:s[f],index:f}),s[f].text="",c.push(s[f])}!1,p.push({data:m,layerIndex:d,markerIndex:u,dataIndex:g,targetClusterIndex:+(t[0].split("_cluster_")[1].indexOf("_datalabel_")>-1?t[0].split("_cluster_")[1].split("_datalabel_")[0]:t[0].split("_cluster_")[1]),isClusterSame:!1})}}}if(p.length>0){this.sameMarkerData=p;var b=document.getElementById(h[0]+"_MarkerGroup");this.markerClusterExpandCheck?(this.mergeSeparateCluster(this.sameMarkerData,h[0]),this.markerClusterExpandCheck=!1):(this.clusterSeparate(this.sameMarkerData,b,!0,h[0],r),this.markerClusterExpandCheck=!0)}},o.prototype.mergeSeparateCluster=function(t,e){var i=t[0].layerIndex,n=t[0].targetClusterIndex,s=t[0].markerIndex,a=e+"_LayerIndex_"+i+"_MarkerIndex_"+s,o=a+"_dataIndex_"+t[0].dataIndex+"_cluster_"+n,r=this.getElementId(o),l=this.getElementId(o+"_datalabel_"+n);r.setAttribute("visibility","visible"),l.style.visibility="visible";for(var h=t[0].data.length,d=0;d<h;d++)this.getElementId(a+"_dataIndex_"+t[0].data[d].index).style.visibility="hidden";this.removeElement(e+"_LayerIndex_"+i+"_MarkerIndex_"+s+"_markerClusterConnectorLine")},o.prototype.removeElement=function(t){var e=document.getElementById(t);sf.base.isNullOrUndefined(e)||e.remove()},o.prototype.drawPath=function(t){var e=document.getElementById(t.id);return sf.base.isNullOrUndefined(e)&&(e=document.createElementNS("http://www.w3.org/2000/svg","path")),e.setAttribute("id",t.id),e.setAttribute("d",t.d),e.setAttribute("opacity",t.opacity.toString()),e.setAttribute("stroke",t.stroke),e.setAttribute("stroke-width",t.strokeWidth.toString()),e},o.prototype.clusterSeparate=function(t,e,i,n,a){var o=t[0].layerIndex,r=t[0].markerIndex,l=t[0].targetClusterIndex,h=t[0].dataIndex,d=i?this.getElementId:e.querySelector.bind(e),c=i?"":"#",p=n+"_LayerIndex_"+o+"_MarkerIndex_"+r,u=p+"_dataIndex_"+h+"_cluster_"+l,g=d(c+""+u),m=d(c+""+u+"_datalabel_"+l);g.setAttribute("visibility","hidden"),m.setAttribute("visibility","hidden");var f=d(c+""+p+"_dataIndex_"+h),_=+g.getAttribute("transform").split("translate(")[1].trim().split(" ")[0],y=+g.getAttribute("transform").split("translate(")[1].trim().split(" ")[1].split(")")[0].trim(),b=30,v=6.28*b,x=0,M=Math.round(v/25);x+=M;for(var I=t[0].data.length,T=Math.round(25/v*100),S=(T=I<M?100/I:T)/100*360,k=I<M?45:0,C=1,w="M "+_+" "+y+" ",B="",A=0;A<I;A++){if(x===A||Math.round(k)>=360){for(k=0,v=6.28*(b=30*++C),M=Math.round(v/25),T=Math.round(25/v*100);T*M<100;)M++;S=T/100*360,x+=M}var L=_+b*Math.sin(2*Math.PI*k/360),P=y+b*Math.cos(2*Math.PI*k/360);B+=w+"L "+L+" "+P+" ",(f=d(c+""+p+"_dataIndex_"+t[0].data[A].index)).setAttribute("transform","translate( "+L+" "+P+")"),f.style.visibility="visible",m.style.visibility="hidden",k+=S}var N={d:B,id:n+"_LayerIndex_"+o+"_MarkerIndex_"+r+"_dataIndex_"+h+"_markerClusterConnectorLine",stroke:sf.base.isNullOrUndefined(a.color)?"#000000":a.color,opacity:a.Opacity,strokeWidth:a.Width};e=i?d(n+"_MarkerGroup"):e;var E=s(n+"_LayerIndex_"+o+"_MarkerIndex_"+r+"_markerClusterConnectorLine");E.appendChild(this.drawPath(N)),e.insertBefore(E,e.querySelector("#"+p+"_dataIndex_0"))},o.prototype.getElementId=function(t){return document.getElementById(t)},o.prototype.clusterMarkers=function(t,e,i){var n,o;this.removeCluster();var r,l,h,d=[],c=[],p=0,u=0,g=JSON.parse(this.options.markerCluster)[t],m=JSON.parse(this.options.markerClusterLabel)[t],f=s(e+"_LayerIndex_"+t+"_cluster"),_=3.75,y=0,b=[],v=document.getElementById(e),x=document.getElementById(e+"_MarkerGroup"),M=i;if(!sf.base.isNullOrUndefined(x)&&x.childElementCount<=0&&x.childElementCount<=0&&(x=document.getElementById(e+"_LayerIndex_"+t+"_Markers_Template_Group")),x=sf.base.isNullOrUndefined(x)?document.getElementById(e+"_LayerIndex_"+t+"_Markers_Template_Group"):x)for(var I=0;I<x.childElementCount;I++)if(d=[],"hidden"!==x.children[I].style.visibility){var T=(l=x.children[I]).getBoundingClientRect();if(d.push(I),null!==T){for(var S=I+1;S<x.childElementCount;S++)if("hidden"!==x.children[S].style.visibility){var k=(l=x.children[S]).getBoundingClientRect();null!==k&&(T.left>k.right||T.right<k.left||T.top>k.bottom||T.bottom<k.top||(c.push(k),x.children[S].style.visibility="hidden",d.push(S)))}if(p=T.left+T.width/2,u=T.top+T.height,c.length>0){var C=v.getBoundingClientRect();p-=C.left,u-=C.top;var w=parseInt(x.children[I].id.split("_dataIndex_")[1].split("_")[0],10),B=parseInt(x.children[I].id.split("_MarkerIndex_")[1].split("_")[0],10),A=parseInt(x.children[I].id.split("_LayerIndex_")[1].split("_")[0],10),L=x.children[I].getAttribute("transform").replace(/[^ .\d]/g,"").split(" ");p=parseFloat(L[1]),u=parseFloat(L[2]);var P=e+"_LayerIndex_"+A+"_MarkerIndex_"+B+"_dataIndex_"+w+"_cluster_"+y,N=e+"_LayerIndex_"+A+"_MarkerIndex_"+B+"_dataIndex_"+w+"_cluster_"+y+"_datalabel_"+y;y++;var E=void 0;switch(g.Shape){case"Circle":(E=this.createClusterShape("circle",P,g.Fill,g.Opacity,"translate( "+p+" "+u+" )",!0,d)).setAttribute("r",g.Height);break;case"Rectangle":(E=this.createClusterShape("rect",P,g.Fill,g.Opacity,"translate( "+p+" "+u+" )",!0,d)).setAttribute("x",-g.Width/2),E.setAttribute("y",-g.Height/2),E.setAttribute("height",g.Height),E.setAttribute("width",g.Width);break;case"Balloon":h=s(P);(E=this.createClusterShape("path",P,g.Fill,g.Opacity,"translate( "+-g.Width/2+", "+-g.Height+" ) scale( "+g.Width/30+", "+g.Height/30+" )",!0,d)).setAttribute("d","M15,0C8.8,0,3.8,5,3.8,11.2C3.8,17.5,9.4,24.4,15,30c5.6-5.6,11.2-12.5,11.2-18.8C26.2,5,21.2,0,15,0z M15,16c-2.8,0-5-2.2-5-5s2.2-5,5-5s5,2.2,5,5S17.8,16,15,16z"),E.setAttribute("stroke","transparent"),E.setAttribute("stroke-width",1),h.appendChild(E),h.setAttribute("style","visibility:visible"),h.setAttribute("style","cursor: pointer"),h.setAttribute("class","clusterGroup"),h.setAttribute("transform","translate( "+p+" "+u+" )");break;case"Image":var O=-(0+g.Width/2),R=-(0+g.Height/2);(E=this.createClusterShape("image",P,null,null,"translate( "+p+" "+u+" )",!0,d)).setAttributeNS(null,"height",g.Height),E.setAttributeNS(null,"width",g.Width),E.setAttributeNS("http://www.w3.org/1999/xlink","href",g.ImageUrl),E.setAttributeNS(null,"x",O),E.setAttributeNS(null,"y",R);break;case"Cross":case"Diamond":case"Star":case"Triangle":case"HorizontalLine":case"VerticalLine":case"InvertedTriangle":case"Pentagon":var z;z=a(g.Shape,{height:g.Height,width:g.Width},{x:0,y:0}),(E=this.createClusterShape("path",P,g.Fill,g.Opacity,"translate( "+p+" "+u+" )",!1,d)).setAttribute("d",z),E.setAttribute("stroke","transparent"),E.setAttribute("stroke-width",1)}var H=document.createElementNS("http://www.w3.org/2000/svg","text");H.setAttribute("id",N),H.setAttribute("x","0"),H.setAttribute("y",_.toString()),H.setAttribute("fill",m.Color),H.setAttribute("font-size",m.Size),H.setAttribute("font-style",m.FontStyle),H.setAttribute("font-family",m.FontFamily),H.setAttribute("font-weight",m.FontWeight),H.setAttribute("text-anchor","middle"),H.setAttribute("transform","translate( "+p+" "+u+" )"),H.setAttribute("opacity","1"),H.setAttribute("style","cursor: pointer"),H.setAttribute("style","visibility: visible"),H.setAttribute("class","clusterGroup"),H.innerHTML=(c.length+1).toString(),f.appendChild(H),f.setAttribute("class","clusterGroup"),"Balloon"!==g.Shape?f.appendChild(E):f.appendChild(h),x.children[I].style.visibility="hidden"}c=[]}}if(f.childElementCount>0){var F;if(M)x.appendChild(f);else(F=document.getElementById(e+"_LayerIndex_"+t)).appendChild(f),r=document.getElementById(e+"_MarkerGroup");for(I=0;I<f.childElementCount;I++)if("hidden"!==f.childNodes[I].style.visibility&&null!==(n=(l=f.childNodes[I]).getBoundingClientRect())&&!(l.id.indexOf("_datalabel_")>-1)){for(S=I+1;S<f.childElementCount;S++)if("hidden"!==f.childNodes[S].style.visibility){var Z=f.children[S];null===(o=Z.getBoundingClientRect())||Z.id.indexOf("_datalabel_")>-1||n.left>o.right||n.right<o.left||n.top>o.bottom||n.bottom<o.top||(b.push(Z),b.push(f.childNodes[S-1]),f.childNodes[S].style.visibility="hidden",f.childNodes[S-1].style.visibility="hidden",d.push(S))}if(b.length>0){l=f.childNodes[I];for(var X=0;X<b.length;X++)"g"===l.tagName?l.childNodes[0].textContent=l.childNodes[0].textContent+","+b[X].textContent:l.textContent=l.textContent+","+b[X].textContent,f.childNodes[I-1].textContent=(+f.childNodes[I-1].textContent+ +b[X+1].textContent).toString(),X++}b=[]}for(;0<f.childNodes.length;)M?x.insertBefore(f.childNodes[0],x.firstChild):r.insertBefore(f.childNodes[0],r.firstChild);if(M)x.removeChild(f);else(F=document.getElementById(e+"_LayerIndex_"+t)).appendChild(r),F.removeChild(f)}},o.prototype.createClusterShape=function(t,e,i,n,s,a,o){var r=document.createElementNS("http://www.w3.org/2000/svg",t);return r.setAttribute("id",e),r.setAttribute("fill",i),r.setAttribute("opacity",n),r.setAttribute("transform",s),r.setAttribute("style","visibility:visible"),r.setAttribute("style","cursor: pointer"),a?r.setAttribute("class","clusterGroup"):r.setAttribute(null,"class","clusterGroup"),r.innerHTML=o.toString(),r},o.prototype.click=function(t){var e=t.target.id,i=this.getMousePosition(t.pageX,t.pageY);e.split("_")[0];if((e.indexOf("_Left_Page_Rect")>-1||e.indexOf("_Right_Page_Rect")>-1)&&this.dotNetRef.invokeMethodAsync("TriggerLegendPaging",e.indexOf("_Left_Page_Rect")>-1?1:0,e.indexOf("_Right_Page_Rect")>-1?1:0),(e.indexOf("shapeIndex")>-1||e.indexOf("Tile")>-1||this.markerClusterExpandCheck)&&(this.mergeSeparateCluster(this.sameMarkerData,this.id),this.markerClusterExpandCheck=!1),e.indexOf("_Zooming_")>-1&&this.options.enableZoom){var n=1;if(e.indexOf("_ZoomIn_")>-1){var s=e.split("_Zooming_ToolBar_")[1].split("_")[0],a=t.type;n=0===this.factorCount?this.options.factor+1:this.scaleFactor+1,this.factorCount++,n>=1&&(this.scaleFactor=n,this.removeCluster(),this.dotNetRef.invokeMethodAsync("TriggerZoom",e,1,s,a))}if(e.indexOf("_ZoomOut_")>-1){s=e.split("_Zooming_ToolBar_")[1].split("_")[0],a=t.type;n=0===this.factorCount?this.options.factor-1:this.scaleFactor-1,this.factorCount++,n>=1&&(this.scaleFactor=n,this.removeCluster(),this.dotNetRef.invokeMethodAsync("TriggerZoom",e,1,s,a))}if(e.indexOf("_Reset_")>-1){s=e.split("_Zooming_ToolBar_")[1].split("_")[0],a=t.type;this.removeCluster(),this.dotNetRef.invokeMethodAsync("TriggerZoom",e,1,s,a)}e.indexOf("_Zoom_")>-1&&(this.zoomClick=!0,this.allowPanning=!1),e.indexOf("_Pan_")>-1&&(this.zoomClick=!1,this.allowPanning=!1)}if(e.indexOf("_LayerIndex_")>-1&&e.indexOf("_MarkerIndex_")>-1){var o=parseInt(e.split("_LayerIndex_")[1].split("_")[0],10),r=parseInt(e.split("_MarkerIndex_")[1].split("_")[0],10),l=parseInt(e.split("_dataIndex_")[1].split("_")[0],10),h=void 0;(c=document.getElementById(e)).innerHTML.length>0&&(h=c.innerHTML.split(",")),this.removeAllHighlight(),this.dotNetRef.invokeMethodAsync("TriggerMarkerClick",o,r,l,e,i.x,i.y,h,e.indexOf("cluster")>-1?"cluster":"marker")}if(e.indexOf("shapeIndex")>-1&&"Click"===this.options.tooltipDisplayMode){o=parseInt(e.split("_LayerIndex_")[1].split("_")[0],10);var d=parseInt(e.split("_shapeIndex_")[1].split("_")[0],10);this.dotNetRef.invokeMethodAsync("TriggerShapeTooltip",e,i.x,i.y,o,d,"Shape",0)}if(e.indexOf("_LayerIndex_")>-1&&e.indexOf("BubbleIndex")>-1){o=parseInt(e.split("_LayerIndex_")[1].split("_")[0],10),r=parseInt(e.split("_BubbleIndex_")[1].split("_")[0],10),l=parseInt(e.split("_dataIndex_")[1].split("_")[0],10);var c=document.getElementById(e);this.dotNetRef.invokeMethodAsync("TriggerBubbleClick",o,r,l,e,i.x,i.y)}e.indexOf("_Legend_")>-1&&(this.removeAllHighlight(),this.dotNetRef.invokeMethodAsync("TriggerLegendClick",parseInt(e.split("_Index_")[1].split("_")[0],10))),-1===e.indexOf("_shapeIndex_")&&-1===e.indexOf("_MarkerIndex_")&&-1===e.indexOf("_BubbleIndex_")&&"Click"===this.options.tooltipDisplayMode&&this.dotNetRef.invokeMethodAsync("TriggerShapeTooltip","",i.x,i.y,0,0,"",0)},o.prototype.removeCluster=function(){var t=document.querySelectorAll('[class="clusterGroup"]');if(t.length>0)for(var e=0;e<t.length;e++)document.getElementById(t[e].id).remove();var i=document.querySelectorAll('[style="visibility: hidden;"]');for(e=0;e<i.length;e++){document.getElementById(i[e].id).setAttribute("style","visibility: visible;")}},o.prototype.createImageUrl=function(t,e){var i='<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">'+t.outerHTML+"</svg>";return window.URL.createObjectURL(new Blob("SVG"===e?[i]:[(new XMLSerializer).serializeToString(t)],{type:"image/svg+xml"}))},o.prototype.imageExport=function(i,n,s){return t(this,void 0,void 0,(function(){var t;return e(this,(function(e){return t=this,[2,new Promise((function(e,a){var o=document.createElement("canvas"),r=t.element.getBoundingClientRect();o.width=r.width,o.height=r.height;var l=document.getElementById(t.element.id+"_svg"),h=t.createImageUrl(l,i),d=document.getElementById(t.element.id+"_animated_tiles").childNodes.length,c=o.getContext("2d"),p=document.getElementById(t.element.id+"_Map_title");c.fillStyle=document.getElementById(t.element.id+"_MapBorder").getAttribute("fill"),c.fillStyle="transparent"===c.fillStyle?"#ffffff":c.fillStyle,c.fillStyle=t.options.background?t.options.background:"#ffffff",c.font=p.getAttribute("font-size")+" Arial",c.fillStyle=p.getAttribute("fill"),c.fillText(p.textContent,parseFloat(p.getAttribute("x")),parseFloat(p.getAttribute("y"))),c.save();var u=document.getElementById(t.element.id+"_Tile_SVG_Parent");c.rect(parseFloat(u.style.left),parseFloat(u.style.top),parseFloat(u.style.width),parseFloat(u.style.height)),c.clip(),c.fillRect(0,0,r.width,r.height),t.exportedCount=0;for(var g=[],m=0;m<d;m++){var f=document.getElementById(t.element.id+"tile"+m),_=new Image;_.crossOrigin="Anonymous",g.push(t.renderImages(o,f,c,_,d,i,n,h,t,s)),_.src=f.children[0].getAttribute("src")}Promise.all(g).then((function(t){for(var i=0;i<t.length;i++)if(null!=t[i]){e(t[i]);break}}))}))]}))}))},o.prototype.renderImages=function(t,e,i,n,s,a,o,r,l,h){return new Promise((function(d,c){n.onload=function(){if(l.exportedCount++,i.setTransform(1,0,0,1,parseFloat(e.style.left)+10,parseFloat(e.style.top)+parseFloat(document.getElementById(l.element.id+"_tile_parent").style.top)),i.drawImage(n,0,0),l.exportedCount===s){var c=document.getElementById(l.element.id+"_Tile_SVG_Parent");r=l.createImageUrl(c.childNodes[0],a);var p=new Image;p.onload=function(){if(i.setTransform(1,0,0,1,parseFloat(c.style.left),parseFloat(c.style.top)),i.drawImage(p,0,0),h)l.triggerDownload(a,o,t.toDataURL("image/png").replace("image/png","image/octet-stream")),d(null);else{var e="JPEG"===a?t.toDataURL("image/jpeg"):"PNG"===a?t.toDataURL("image/png"):"";d(e)}},p.src=r}else d(null)}}))},o.prototype.triggerDownload=function(t,e,i){var n=document.createElement("a");n.download=e+"."+t.toLocaleLowerCase(),n.href=i,n.click()},o.prototype.getMousePosition=function(t,e){var i=this.element.getBoundingClientRect(),s=this.element.ownerDocument.defaultView.pageXOffset,a=this.element.ownerDocument.defaultView.pageYOffset,o=this.element.ownerDocument.documentElement.clientTop,r=this.element.ownerDocument.documentElement.clientLeft,l=i.left+s-r,h=i.top+a-o;return new n(t-l,e-h)},o.prototype.getBound=function(t){var e=document.getElementById(t);return{x:e.offsetLeft,y:e.offsetTop}},o.prototype.render=function(){this.wireEvents()},o}();return{getMarker:function(t,e,i,n){n&&n.blazor__instance&&n.blazor__instance.clusterExpand(t,e,i)},markerCluster:function(t,e,i,n,s){s&&s.blazor__instance&&s.blazor__instance.clusterMarkers(n,t,e.clusterTemplate)},panDirection:function(t,e,i,n,s,a){a&&a.blazor__instance&&a.blazor__instance.panning(t,e,i,n,s)},initialize:function(t,e,i){return new o(t.id,t,e,i).render(),this.getElementSize(t)},getElementSize:function(t){var e,i,n,s;if(null!==t){var a=t.getBoundingClientRect();e=a.width,i=a.height,n=a.x,s=a.y}return{width:e,height:i,isIE:sf.base.Browser.isIE,x:n,y:s}},getElementBounds:function(t){var e=document.getElementById(t);if(e){var i=e.getBoundingClientRect();return{width:i.width,height:i.height,top:i.top,bottom:i.bottom,left:i.left,right:i.right}}return null},getBound:function(t,e){var i=document.getElementById(t);return{x:i.offsetLeft,y:i.offsetTop}},getBoundData:function(t){var e=document.getElementById(t);return{x:e.getBoundingClientRect().x,y:e.getBoundingClientRect().y}},getTileZoom:function(i,n,s,a,o,r,l,h){return t(this,void 0,void 0,(function(){var t,d,c,p,u,g,m,f,_,y,b;return e(this,(function(e){switch(e.label){case 0:t=document.getElementById(i+"_animated_tiles"),d=parseInt(t.className,10),t.children[l].setAttribute("style","top:"+s+"; height:"+o+";width:"+r+"; left:"+n+"; position:absolute;"),t.children[l].innerHTML="",(c=document.createElement("img")).src=a,t.children[l].appendChild(c),p=document.getElementById(i+"_LayerCollections"),u=0,e.label=1;case 1:if(!(u<p.children.length))return[3,8];g=0,e.label=2;case 2:if(!(g<p.children[u].childElementCount))return[3,7];if(!(p.children[u].children[g].id.indexOf("MarkerGroup")>-1))return[3,6];m=0,e.label=3;case 3:return m<p.children[u].children[g].childElementCount?(f=parseInt(p.children[u].children[g].children[m].id.split("_LayerIndex_")[1].split("_")[0],10),_=parseInt(p.children[u].children[g].children[m].id.split("_MarkerIndex_")[1].split("_")[0],10),y=parseInt(p.children[u].children[g].children[m].id.split("_dataIndex_")[1].split("_")[0],10),[4,h.invokeMethodAsync("ZoomMarker",f,_,y,0,0,d,h)]):[3,6];case 4:b=e.sent(),p.children[u].children[g].children[m].setAttribute("transform","translate("+b[0]+","+b[1]+")"),e.label=5;case 5:return m++,[3,3];case 6:return g++,[3,2];case 7:return u++,[3,1];case 8:return[2,l]}}))}))},getLayer:function(t,e){var i=document.getElementById(t+"_LayerCollections").getBoundingClientRect();return{Bottom:i.bottom,Height:i.height,Left:i.left,Right:i.right,Top:i.top,Width:i.width,X:i.x,Y:i.y}},getElement:function(t,e){var i=document.getElementById(t).getBoundingClientRect();return{Bottom:i.bottom,Height:i.height,Left:i.left,Right:i.right,Top:i.top,Width:i.width,X:i.x,Y:i.y}},getSvg:function(t,e){var i=document.getElementById(t+"_svg").getBoundingClientRect();return{Bottom:i.bottom,Height:i.height,Left:i.left,Right:i.right,Top:i.top,Width:i.width,X:i.x,Y:i.y}},updateTileTranslatePoint:function(t,e,i,n,s,a,o,r){r&&r.blazor__instance&&(r.blazor__instance.tileTranslatePoint={x:t.x,y:t.y},r.blazor__instance.translatePoint={x:e.x,y:e.y},r.blazor__instance.areaRect={x:i,y:n,width:s,height:a},r.blazor__instance.tileZoomLevel=o)},updateTranslatePoint:function(t,e,i,n,s,a,o,r){r&&r.blazor__instance&&(r.blazor__instance.shapeTranslatePoint=t,r.blazor__instance.areaRect={x:e,y:i,width:n,height:s},r.blazor__instance.marginLeft=a,r.blazor__instance.marginTop=o)},updateMapBound:function(t,e){t&&t.blazor__instance&&(t.blazor__instance.baseMapBounds=e)},setZoomOnClick:function(t,e){t&&t.blazor__instance&&(t.blazor__instance.options.zoomOnClick=e)},setDoubleClickZoom:function(t,e){t&&t.blazor__instance&&(t.blazor__instance.options.doubleClickZoom=e)},setPanningStatus:function(t,e){t&&t.blazor__instance&&(t.blazor__instance.options.enablePanning=e)},setPinchingStatus:function(t,e){t&&t.blazor__instance&&(t.blazor__instance.options.enablePinchZooming=e)},updateCollection:function(t,e){t&&t.blazor__instance&&(t.blazor__instance.bubbleCollection=JSON.parse(e.bubble),t.blazor__instance.labelCollection=JSON.parse(e.dataLabel),t.blazor__instance.baseMapBounds={latitudeMax:e.latitudeMax,latitudeMin:e.latitudeMin,longitudeMax:e.longitudeMax,longitudeMin:e.longitudeMin,minBounds:e.minBounds,maxBounds:e.maxBounds,availableSize:e.availableSize},t.blazor__instance.isTileMap=e.isTileMap,t.blazor__instance.urlTemplate=e.urlTemplate,t.blazor__instance.key=e.key)},updateLayerHighlight:function(t,e,i,n){n&&n.blazor__instance&&(i?(n.blazor__instance.options.layerHighlightSettings[t].BorderColor=e.borderColor,n.blazor__instance.options.layerHighlightSettings[t].BorderWidth=e.borderWidth):(n.blazor__instance.options.layerHighlightSettings[t].Fill=e.fill,n.blazor__instance.options.layerHighlightSettings[t].Opacity=e.opacity,n.blazor__instance.options.layerHighlightSettings[t].Enable=e.enable))},updateMarkerHighlight:function(t,e,i,n,s){s&&s.blazor__instance&&(n?(s.blazor__instance.options.markerHighlightSettings[t][e].BorderColor=i.borderColor,s.blazor__instance.options.markerHighlightSettings[t][e].BorderWidth=i.borderWidth):(s.blazor__instance.options.markerHighlightSettings[t][e].Fill=i.fill,s.blazor__instance.options.markerHighlightSettings[t][e].Opacity=i.opacity,s.blazor__instance.options.markerHighlightSettings[t][e].Enable=i.enable))},updateBubbleHighlight:function(t,e,i,n,s){s&&s.blazor__instance&&(n?(s.blazor__instance.options.bubbleHighlightSettings[t][e].BorderColor=i.borderColor,s.blazor__instance.options.bubbleHighlightSettings[t][e].BorderWidth=i.borderWidth):(s.blazor__instance.options.bubbleHighlightSettings[t][e].Fill=i.fill,s.blazor__instance.options.bubbleHighlightSettings[t][e].Opacity=i.opacity,s.blazor__instance.options.bubbleHighlightSettings[t][e].Enable=i.enable))},updateTooltipDisplayMode:function(t,e){t&&t.blazor__instance&&(t.blazor__instance.options.tooltipDisplayMode=e)},updateNavigationHighlight:function(t,e,i,n,s){s&&s.blazor__instance&&(n?(s.blazor__instance.options.navigationHighlightSettings[t][e].BorderColor=i.borderColor,s.blazor__instance.options.navigationHighlightSettings[t][e].BorderWidth=i.borderWidth):(s.blazor__instance.options.navigationHighlightSettings[t][e].Fill=i.fill,s.blazor__instance.options.navigationHighlightSettings[t][e].Opacity=i.opacity,s.blazor__instance.options.navigationHighlightSettings[t][e].Enable=i.enable))},exportToImage:function(i,n,s,a){return t(this,void 0,void 0,(function(){var o,r=this;return e(this,(function(l){switch(l.label){case 0:return a&&a.blazor__instance?[4,a.blazor__instance.imageExport(i,n,s)]:[3,2];case 1:o=l.sent(),l.label=2;case 2:return o instanceof Promise?[4,o.then((function(i){return t(r,void 0,void 0,(function(){return e(this,(function(t){return[2,i]}))}))}))]:[3,4];case 3:return l.sent(),[3,5];case 4:return[2,o];case 5:return[2]}}))}))},getLegendRect:function(t,e){var i=document.getElementById(t).getBoundingClientRect(),n=t.split("_Legend_")[0],s=document.getElementById(n).getBoundingClientRect();return{x:i.left-s.left,y:i.top-s.top,width:i.width,height:i.height}},markerAnimation:function(t,e,i){for(var n=JSON.parse(e.markerData),s=0;s<n.length;s++)for(var a=0;a<n[s].MarkerAnimation.length;a++)for(var o=0;o<n[s].MarkerAnimation[a].DataSourceLength;o++){var r=document.getElementById(t+"_LayerIndex_"+s+"_MarkerIndex_"+a+"_dataIndex_"+o);this.elementAnimate(r,n[s].MarkerAnimation[a].AnimationDelay,n[s].MarkerAnimation[a].AnimationDuration,r.transform.baseVal[0].matrix.e,r.transform.baseVal[0].matrix.f,null,0,i)}},layerAnimation:function(t,e,i,n,s,a){for(var o=document.getElementById(t+"_LayerIndex_0"),r=0;r<o.children.length;r++)null!==o.children[r].getAttribute("transform")&&this.zoomAnimation(o.children[r],0,1e3,n,s,e,i,a)},slop:function(t,e){return t.x===e.x?null:(e.y-t.y)/(e.x-t.x)},interception:function(t,e){return null===e?t.x:t.y-e*t.x},zoomAnimation:function(t,e,i,n,s,a,o,r){var l=this,h=0,d={x:n.x,y:n.y},c=s-o,p={x:0,y:0},u=1;if(s!==o){var g=this.slope(a,d),m=this.intercept(a,g),f=d.x-a.x,_=d.y-a.y;new sf.base.Animation({}).animate(t,{duration:i,delay:e,progress:function(e){e.timeStamp>e.delay&&(t.style.visibility="visible",h=(e.timeStamp-e.delay)/e.duration,u=o+h*c,p.x=a.x+h*f/(u/s),sf.base.isNullOrUndefined(g)?p.y=g*p.x+m:p.y=a.y+h*_,t.setAttribute("transform","scale( "+u+" ) translate( "+p.x+" "+p.y+" )"))},end:function(e){t.setAttribute("transform","scale( "+s+" ) translate( "+d.x+" "+d.y+" )"),l.dotNetRef.invokeMethodAsync("TriggerAnimation",t)}})}else t.setAttribute("transform","scale( "+s+" ) translate( "+d.x+" "+d.y+" )")},bubbleAnimation:function(t,e,i){for(var n=JSON.parse(e.bubbleData),s=0;s<n.length;s++)for(var a=0;a<n[s].MarkerAnimation.length;a++)for(var o=0;o<n[s].MarkerAnimation[a].DataSourceLength;o++){var r=document.getElementById(t+"_LayerIndex_"+s+"_BubbleIndex_"+a+"_dataIndex_"+o);this.elementAnimate(r,n[s].MarkerAnimation[a].AnimationDelay,n[s].MarkerAnimation[a].AnimationDuration,r.transform.baseVal[0].matrix.e,r.transform.baseVal[0].matrix.f,null,0,i)}},elementAnimate:function(t,e,i,n,s,a,o,r){var l=this;sf.base.isNullOrUndefined(o)&&(o=0);var h=n,d=s,c=0;new sf.base.Animation({}).animate(t,{duration:i,delay:e,progress:function(e){e.timeStamp>e.delay&&(c=(e.timeStamp-e.delay)/e.duration,t.style.visibility="visible",t.setAttribute("transform","translate( "+(h-o*c)+" "+(d-o*c)+" ) scale("+c+")"))},end:function(e){t.setAttribute("transform",""),t.setAttribute("transform","translate( "+n+" "+s+"  )"),l.dotNetRef.invokeMethodAsync("TriggerAnimation",t.id)}})},getToolbarAlign:function(t,e){var i=e.verticalAlignment,n=e.horizontalAlignment,s=document.getElementById(t+"_Zooming_KitCollection").getBoundingClientRect(),a=0,o=0;switch(i){case 0:o=e.y;break;case 1:o=e.height/2-s.height/2;break;case 2:o=e.height-s.height-10}switch(n){case 0:a=e.x;break;case 1:a=e.width/2-s.width/2;break;case 2:a=e.width-s.width-10}var r=document.getElementById(t+"_ToolBar");r.style.left=a+"px",r.style.top=o+"px",r.style.visibility="visible";var l=e.color,h=" .e-maps-toolbar:hover > circle { stroke:"+l+"; } .e-maps-toolbar:hover > path { fill: "+l+" ;  stroke: "+l+"; }.e-maps-toolbar:hover { cursor: pointer; } .e-maps-cursor-disable:hover { cursor: not-allowed; } .e-maps-panning:hover { cursor: pointer; } .e-maps-popup-close { display: block; opacity: 0; }",d=document.createElement("style");d.appendChild(document.createTextNode(h)),r.appendChild(d)},getTemplate:function(t,e,i,n,s,a,o,r){for(var l=t[0],h=Object.keys(l),d=e,c=0;c<h.length;c++)"latitude"!==h[c].toLowerCase()&&"longitude"!==h[c].toLowerCase()&&(d=d.replace(new RegExp("{{:"+h[c]+"}}","g"),l[h[c].toString()]));var p=document.createElementNS("http://www.w3.org/2000/svg","div");p.setAttribute("id",s),p.style.position="absolute",p.style.transform="translate(-50 %, -50 %)",p.style.left=n.toString(),p.style.top=i.toString(),p.innerHTML=d.toString();var u=document.getElementById(r+"_LayerIndex_0_Markers_Template_Group");u.appendChild(p);var g=document.getElementById(r+"_Secondary_Element");return g.appendChild(u),document.getElementById(r).appendChild(g),d}}}()}});