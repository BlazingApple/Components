(window.webpackJsonp=window.webpackJsonp||[]).push([[44],{"./bundles/sf-maps.js":function(t,e,i){"use strict";i.r(e);i("./modules/sf-maps.js")},"./modules/sf-maps.js":function(t,e){window.sfBlazor=window.sfBlazor||{},window.sfBlazor.Maps=function(){"use strict";var t=function(t,e,i,n){return new(i||(i=Promise))((function(o,s){function a(t){try{r(n.next(t))}catch(t){s(t)}}function l(t){try{r(n.throw(t))}catch(t){s(t)}}function r(t){t.done?o(t.value):new i((function(e){e(t.value)})).then(a,l)}r((n=n.apply(t,e||[])).next())}))},e=function(t,e){var i,n,o,s,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function l(s){return function(l){return function(s){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,n&&(o=2&s[0]?n.return:s[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,s[1])).done)return o;switch(n=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,n=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){a.label=s[1];break}if(6===s[0]&&a.label<o[1]){a.label=o[1],o=s;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(s);break}o[2]&&a.ops.pop(),a.trys.pop();continue}s=e.call(t,a)}catch(t){s=[6,t],n=0}finally{i=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,l])}}},i=document.createElementNS("http://www.w3.org/2000/svg","rect"),n=function(t,e){this.x=t,this.y=e};function o(t){var e=document.createElementNS("http://www.w3.org/2000/svg","g");return e.setAttribute("id",t),e}function s(t,e,i){var n="";switch(t){case"Balloon":n="M15,0C8.8,0,3.8,5,3.8,11.2C3.8,17.5,9.4,24.4,15,30c5.6-5.6,11.2-12.5,11.2-18.8C26.2,5,21.2,0,15,0z M15,16c-2.8,0-5-2.2-5-5s2.2-5,5-5s5,2.2,5,5S17.8,16,15,16z";break;case"Cross":n="M "+i.x+" "+(i.y-e.height/2)+" L "+i.x+" "+(i.y+e.height/2)+" M "+(i.x-e.width/2)+" "+i.y+" L "+(i.x+e.width/2)+" "+i.y;break;case"Diamond":n="M "+i.x+" "+(i.y-e.height/2)+" L "+(i.x+e.width/2)+" "+i.y+" L "+i.x+" "+(i.y+e.height/2)+" L "+(i.x-e.width/2)+" "+i.y+" Z";break;case"Star":n="M "+(i.x+e.width/3)+" "+(i.y-e.height/2)+" L "+(i.x-e.width/2)+" "+(i.y+e.height/6)+" L "+(i.x+e.width/2)+" "+(i.y+e.height/6)+" L "+(i.x-e.width/3)+" "+(i.y-e.height/2)+" L "+i.x+" "+(i.y+e.height/2)+" L "+(i.x+e.width/3)+" "+(i.y-e.height/2)+" Z";break;case"Triangle":n="M "+i.x+" "+(i.y-e.height/2)+" L "+(i.x+e.width/2)+" "+(i.y+e.height/2)+" L "+(i.x-e.width/2)+" "+(i.y+e.height/2)+" Z";break;case"HorizontalLine":n=" M "+(i.x-e.width/2)+" "+i.y+" L "+(i.x+e.width/2)+" "+i.y;break;case"VerticalLine":n="M "+i.x+" "+(i.y-e.height/2)+" L "+i.x+" "+(i.y+e.height/2);break;case"InvertedTriangle":n="M "+(i.x-e.width/2)+" "+(i.y-e.height/2)+" L "+(i.x+e.width/2)+" "+(i.y-e.height/2)+" L "+i.x+" "+(i.y+e.height/2)+" Z";break;case"Pentagon":for(var o=void 0,s=void 0,a=0;a<5;a++)o=e.width/2*Math.cos(Math.PI/180*(72*a)),s=e.height/2*Math.sin(Math.PI/180*(72*a)),n+=(0===a?"M ":"L ")+(i.x+o)+" "+(i.y+s);n+=" Z"}return n}var a=function(){function a(t,e,i,n){this.previousMarkerId="",this.previousId="",this.moveClientX=0,this.moveClientY=0,this.clientX=0,this.clientY=0,this.enableSelectionZoom=!1,this.allowPanning=!1,this.isPanning=!1,this.isPan=!0,this.zoomClick=!1,this.mouseClick=!1,this.position=null,this.height=0,this.width=0,this.mapsBorderWidth=0,this.toolbarButtonOpacity=1,this.toolbarShapeOpacity=1,this.markerClusterExpandCheck=!1,this.svgCreated=!1,this.zoomIn=1,this.zoomOut=1,this.scaleFactor=1,this.factorCount=0,this.svg=document.createElementNS("http://www.w3.org/2000/svg","svg"),this.lastScale=1,this.clusterLocation=[],this.isTouch=!1,this.touchMoveList=[],this.touchStartList=[],this.tileTranslatePoint=null,this.isToolbarTooltip=!1,this.marginTop=0,this.marginLeft=0,this.isPinchZoomed=!1,this.panComplete=!1,this.pinchComplete=!1,window.sfBlazor=window.sfBlazor,this.tapCount=0,this.id=t,this.element=e,this.dotNetRef=n,this.layerCount=i.layerCount,this.clusterSettings=i.markerCluster?JSON.parse(i.markerCluster):null,this.dataSource=i.dataSource?JSON.parse(i.dataSource):null,this.shapeTranslatePoint=i.shapeTranslatePoint?i.shapeTranslatePoint:null,this.shapeBorderWidth=i.shapeBorderWidth,this.projectionType=i.projectionType,this.options=i,this.options.layerHighlightSettings=JSON.parse(this.options.layerHighlightSettings),this.options.markerHighlightSettings=JSON.parse(this.options.markerHighlightSettings),this.options.bubbleHighlightSettings=JSON.parse(this.options.bubbleHighlightSettings),this.options.navigationHighlightSettings=JSON.parse(this.options.navigationHighlightSettings),this.options.selectionSettings=JSON.parse(this.options.selectionSettings),this.marginLeft=0,this.urlTemplate=i.urlTemplate?i.urlTemplate:null,this.isToolbarTooltip=!1,this.isTouch=!1,this.pinchFactor=1,this.lastScale=1,this.touchStartList=[],this.touchMoveList=[],this.dataId=t,window.sfBlazor.setCompInstance(this)}return a.prototype.wireEvents=function(){sf.base.EventHandler.add(this.element,"wheel",this.mapMouseWheel.bind(this),this),sf.base.EventHandler.add(this.element,"touchmove mousemove",this.mouseMove.bind(this),this),sf.base.EventHandler.add(this.element,"touchend mouseup mouseleave",this.mouseUp.bind(this),this),sf.base.EventHandler.add(this.element,"touchstart mousedown",this.mouseDown.bind(this),this),sf.base.EventHandler.add(this.element,"click pointerdown",this.click.bind(this),this),sf.base.EventHandler.add(this.element,"dblclick",this.doubleClick.bind(this),this),sf.base.EventHandler.add(this.element,"contextmenu",this.rightClick.bind(this),this),sf.base.EventHandler.add(this.element,"keydown",this.keyDown.bind(this),this),sf.base.EventHandler.add(this.element,"keyup",this.keyUp.bind(this),this),window.addEventListener("resize",this.reSize.bind(this))},a.prototype.unwireEvents=function(){sf.base.EventHandler.remove(this.element,"wheel",this.mapMouseWheel),sf.base.EventHandler.remove(this.element,"touchmove mousemove",this.mouseMove),sf.base.EventHandler.remove(this.element,"touchend mouseup mouseleave",this.mouseUp),sf.base.EventHandler.remove(this.element,"touchstart mousedown",this.mouseDown),sf.base.EventHandler.remove(this.element,"click pointerdown",this.click),sf.base.EventHandler.remove(this.element,"dblclick",this.doubleClick),sf.base.EventHandler.remove(this.element,"contextmenu",this.rightClick),sf.base.EventHandler.remove(this.element,"keydown",this.keyDown),sf.base.EventHandler.remove(this.element,"keyup",this.keyUp),window.removeEventListener("resize",this.reSize.bind(this))},a.prototype.destroy=function(){this.unwireEvents(),this.dotNetRef=null},a.prototype.keyUp=function(t){var e=t.target.id;if(this.options.enablePanning&&this.isPanning){this.isPanning=!1;var i=document.getElementById(this.element.id+"_animated_tiles");if(this.isTileMap&&!sf.base.isNullOrUndefined(this.currentTiles)&&!sf.base.isNullOrUndefined(i)&&this.currentTiles.childElementCount!=i.childElementCount&&this.currentTiles.childElementCount<i.childElementCount)for(var n=i.childElementCount-1;n>=this.currentTiles.childElementCount;n--)i.removeChild(i.children[n]);this.currentTiles=null,sf.base.isNullOrUndefined(this.dotNetRef)||this.dotNetRef.invokeMethodAsync("UpdateTranslatePoint",this.isTileMap?this.translatePoint:this.shapeTranslatePoint,this.tileTranslatePoint,this.scaleFactor,!1)}if("Tab"===t.code&&e.indexOf("_LayerIndex_")>-1){var o=parseInt(e.split("_LayerIndex_")[1].split("_")[0],10);if(e.indexOf("shapeIndex")>-1){this.targetElementPath=t.target;var s=parseInt(e.split("_shapeIndex_")[1].split("_")[0],10);e.indexOf("shapeIndex")>-1&&this.options.layerHighlightSettings[o]&&this.options.layerHighlightSettings[o].Enable&&(this.removeAllHighlight(),this.targetElementPath.classList.contains("mapShapeSelection")||sf.base.isNullOrUndefined(this.dotNetRef)||this.dotNetRef.invokeMethodAsync("TriggerShapeHighlight",o,s,e))}}},a.prototype.triggerEnableZoom=function(t,e,i){t>=1&&(this.scaleFactor=t,this.removeCluster(),sf.base.isNullOrUndefined(this.dotNetRef)||this.dotNetRef.invokeMethodAsync("TriggerZoom",e,i))},a.prototype.keyDown=function(t){var e=1,i=t.type,n=t.target.id,o=document.getElementById(this.element.id+"_animated_tiles");if(this.isTileMap&&!sf.base.isNullOrUndefined(o)&&(this.currentTiles=o.cloneNode(!0)),"+"===t.key||"Equal"===t.code)this.options.enableZoom&&(t.preventDefault(),this.mergeSeparation(),e=0===this.factorCount?this.options.factor+1:this.scaleFactor+1,this.factorCount++,this.triggerEnableZoom(e,"ZoomIn",i));else if("-"===t.key||"Minus"===t.code)this.options.enableZoom&&(t.preventDefault(),this.mergeSeparation(),e=0===this.factorCount?this.options.factor-1:this.scaleFactor-1,this.factorCount++,this.triggerEnableZoom(e,"ZoomOut",i));else if(82===t.keyCode)t.preventDefault(),this.mergeSeparation(),this.zoomClick=!1,this.handleToolbarSelection("_Zooming_ToolBar_Pan_Path","_Zooming_ToolBar_Zoom_Path"),"Reset",this.scaleFactor=this.options.minZoom,this.removeCluster(),sf.base.isNullOrUndefined(this.dotNetRef)||this.dotNetRef.invokeMethodAsync("TriggerZoom","Reset",i);else if("ArrowUp"!==t.code&&"ArrowDown"!==t.code||!this.options.enablePanning)if("ArrowLeft"!==t.code&&"ArrowRight"!==t.code||!this.options.enablePanning){if("Enter"===t.code)if(t.preventDefault(),(n.indexOf("_Left_Page_Rect")>-1||n.indexOf("_Right_Page_Rect")>-1)&&!sf.base.isNullOrUndefined(this.dotNetRef)){var s=document.getElementById(this.id+"_Paging_Text").textContent,a=(s=s.trim().replace("\n","")).split("/").map(Number);n.indexOf("_Left_Page_Rect")>-1?document.getElementById(n).style.outlineColor=a[0]+1!=a[1]?"":"transparent":document.getElementById(n).style.outlineColor=a[0]!=a[1]+1?"":"transparent",this.dotNetRef.invokeMethodAsync("TriggerLegendPaging",n.indexOf("_Left_Page_Rect")>-1?1:0)}else if(n.indexOf("_LayerIndex_")>-1&&n.indexOf("shapeIndex")>-1){var l=parseInt(n.split("_LayerIndex_")[1].split("_")[0],10);this.shapeSelection(n,l)}}else this.isPanning=!0,t.preventDefault(),this.mergeSeparation(),this.clientY=0,this.moveClientX=this.areaRect.width/7,this.panning("ArrowLeft"===t.code?-this.moveClientX:this.moveClientX,this.clientY,t.layerX,t.layerY,this.scaleFactor,!0),this.clientX=this.moveClientX;else this.isPanning=!0,t.preventDefault(),this.mergeSeparation(),this.moveClientY=this.areaRect.height/7,this.clientX=0,this.panning(this.clientX,"ArrowUp"===t.code?-this.moveClientY:this.moveClientY,t.layerX,t.layerY,this.scaleFactor,!0),this.clientY=this.moveClientY;this.toolbarButtonColor(e,n),this.clientX=this.moveClientX,this.clientY=this.moveClientY},a.prototype.shapeSelection=function(t,e){var i=parseInt(t.split("_shapeIndex_")[1].split("_")[0],10),n=-1!==t.indexOf("_dataIndex_")?parseInt(t.split("_dataIndex_")[1].split("_")[0],10):null;this.options.selectionSettings&&this.options.selectionSettings[e]&&this.options.selectionSettings[e].Enable&&this.removeAllHighlight(),sf.base.isNullOrUndefined(this.dotNetRef)||this.dotNetRef.invokeMethodAsync("SelectMap",t,e,i,"Shape",n)},a.prototype.rightClick=function(t){var e=t.target.id,i=this.getMousePosition(t.pageX,t.pageY);sf.base.isNullOrUndefined(this.dotNetRef)||this.dotNetRef.invokeMethodAsync("TriggerMouseClick",i.x,i.y,document.getElementById(e))},a.prototype.reSize=function(){var t,e;if(this.mergeSeparation(),null!==this.element){var i=document.getElementById(this.element.id+"_svg");if(!sf.base.isNullOrUndefined(i)){i.style.display="none";var n=this.element.getBoundingClientRect();t=n.width,e=n.height,i.style.removeProperty("display")}}this.previousHeight===e&&this.previousWidth===t||(this.previousHeight=e,this.previousWidth=t,sf.base.isNullOrUndefined(this.dotNetRef)||this.dotNetRef.invokeMethodAsync("TriggerResize",t,e))},a.prototype.doubleClick=function(t){if(!sf.base.isNullOrUndefined(this.dotNetRef)){if(2===t.detail&&this.options.enableZoom&&this.options.doubleClickZoom){var e=document.getElementById(this.id).getBoundingClientRect(),i=this.scaleFactor+1;i>=1&&(this.scaleFactor=i,this.removeCluster(),this.dotNetRef.invokeMethodAsync("MouseWheelZoom",t.pageX-e.x,t.pageY-e.y,t.which,"doubleClick"))}var n=t.target.id,o=this.getMousePosition(t.pageX,t.pageY);if("DoubleClick"===this.options.tooltipDisplayMode){var s=parseInt(n.split("_LayerIndex_")[1].split("_")[0],10);if(n.indexOf("shapeIndex")>-1){var a=parseInt(n.split("_shapeIndex_")[1].split("_")[0],10);this.dotNetRef.invokeMethodAsync("TriggerShapeTooltip",n,o.x,o.y,s,a,"Shape",0)}else if(n.indexOf("_MarkerIndex_")>-1&&-1===n.indexOf("_cluster_")){var l=parseInt(n.split("_MarkerIndex_")[1].split("_")[0],10),r=parseInt(n.split("_dataIndex_")[1].split("_")[0],10);this.dotNetRef.invokeMethodAsync("TriggerShapeTooltip",n,o.x,o.y,s,r,"Marker",l)}else if(n.indexOf("_BubbleIndex_")>-1){l=parseInt(n.split("_BubbleIndex_")[1].split("_")[0],10),r=parseInt(n.split("_dataIndex_")[1].split("_")[0],10);this.dotNetRef.invokeMethodAsync("TriggerShapeTooltip",n,o.x,o.y,s,r,"Bubble",l)}else-1===n.indexOf("_shapeIndex_")&&-1===n.indexOf("_MarkerIndex_")&&-1===n.indexOf("_BubbleIndex_")&&this.dotNetRef.invokeMethodAsync("TriggerShapeTooltip","",o.x,o.y,0,0,"",0)}this.dotNetRef.invokeMethodAsync("TriggerDoubleClick",o.x,o.y,document.getElementById(n))}},a.prototype.mapMouseWheel=function(t){this.mergeSeparation();document.getElementById(this.element.id).getBoundingClientRect();var e=sf.base.isNullOrUndefined(t.wheelDelta)?-t.deltaY:t.wheelDelta,i="ZoomIn"===(e/120>0?"ZoomIn":"ZoomOut")?this.scaleFactor+1:this.scaleFactor-1,n=this.getMousePosition(t.pageX,t.pageY);this.options.enableZoom&&this.options.enableMouseWheelZoom&&i>=1&&(t.preventDefault(),this.scaleFactor=i,this.removeCluster(),sf.base.isNullOrUndefined(this.dotNetRef)||this.dotNetRef.invokeMethodAsync("MouseWheelZoom",n.x,n.y,e,"wheelZoom"))},a.prototype.mouseUp=function(t){var e,i,n=t.target.id,o=this.isTileMap?this.tileTranslatePoint:this.shapeTranslatePoint,s=!1;this.lastScale=1,"touchend"===t.type?(this.options.enablePanning&&t.preventDefault(),e=0,i=0,s=!0,this.isTouch=!1,this.touchMoveList=[],this.touchStartList=[]):(this.moveClientX=t.pageX,this.moveClientY=t.pageY,e=t.layerX,i=t.layerY);var a=this.getMousePosition(this.moveClientX,this.moveClientY);this.moveClientX=a.x,this.moveClientY=a.y;n.split("_")[0];if(this.options.doubleClickZoom&&"touchend"===t.type){this.tapCount=this.tapCount>1?0:this.tapCount+1;var l=this;sf.base.isNullOrUndefined(this.tapCountTimer)&&(this.tapCountTimer=setTimeout((function(){window.clearTimeout(l.tapCountTimer),l.tapCountTimer=null,l.tapCount=0}),1e3))}if(!(n.indexOf("_Zooming_")>-1)&&this.options.enableZoom&&!this.isPanning&&"mouseleave"!==t.type&&(this.options.zoomOnClick||this.options.doubleClickZoom&&"touchend"===t.type&&this.tapCount>1)){this.tapCount=0;var r=this.scaleFactor+1;if(r>=1){this.scaleFactor=r,this.removeCluster();var h="touchend"===t.type?t.changedTouches[0].pageX:t.pageX,d="touchend"===t.type?t.changedTouches[0].pageY:t.pageY,c=this.getMousePosition(h,d);sf.base.isNullOrUndefined(this.dotNetRef)||this.dotNetRef.invokeMethodAsync("MouseWheelZoom",c.x,c.y,"touchend"===t.type?1:t.which,this.options.zoomOnClick?"click":"doubleClick")}}if(this.allowPanning&&this.isPanning&&this.options.enablePanning||this.isPinchZoomed){var p=document.getElementById(this.element.id+"_animated_tiles");if(this.isTileMap&&this.isPinchZoomed&&(p.style.removeProperty("transform"),this.scaleFactor=this.tileZoomLevel=Math.round(this.scaleFactor),this.getTileTranslatePosition(this.scaleFactor,this.scaleFactor,this.currentTouchCenter,null),this.translatePoint.x=(this.tileTranslatePoint.x-.01*this.scaleFactor)/Math.pow(2,this.scaleFactor-1),this.translatePoint.y=(this.tileTranslatePoint.y-.01*this.scaleFactor)/Math.pow(2,this.scaleFactor-1),this.generateTiles(),this.renderMarkers()),this.isTileMap&&!sf.base.isNullOrUndefined(this.currentTiles)&&!sf.base.isNullOrUndefined(p)&&this.currentTiles.childElementCount!=p.childElementCount&&this.currentTiles.childElementCount<p.childElementCount)for(var u=p.childElementCount-1;u>=this.currentTiles.childElementCount;u--)p.removeChild(p.children[u]);this.currentTiles=null,sf.base.isNullOrUndefined(this.dotNetRef)||this.isPinchZoomed||(this.dotNetRef.invokeMethodAsync("UpdateTranslatePoint",this.isTileMap?this.translatePoint:this.shapeTranslatePoint,this.tileTranslatePoint,this.scaleFactor,!1),this.panComplete&&this.dotNetRef.invokeMethodAsync("TriggerPanningComplete",this.previousPoint.x,this.previousPoint.y,o.x,o.y,e,i,this.scaleFactor))}if(this.isPinchZoomed&&!sf.base.isNullOrUndefined(this.dotNetRef)&&(this.dotNetRef.invokeMethodAsync("UpdateTranslatePoint",this.isTileMap?this.translatePoint:this.shapeTranslatePoint,this.tileTranslatePoint,this.scaleFactor,!0),this.pinchComplete&&this.dotNetRef.invokeMethodAsync("TriggerOnZoomComplete",o.x,o.y)),this.isPanning=!1,this.allowPanning=!1,this.options.enableZoom&&this.options.enableSelectionZooming&&this.mouseClick&&this.zoomClick){this.svgCreated=!1,this.mouseClick=!1;var m=document.getElementById(this.element.id+"drawRect");if(m){m.remove(),this.mergeSeparation(),this.removeCluster();var g=0;if(this.height>0&&this.width>0){var f=this.element.getBoundingClientRect();this.isTileMap?(g=this.scaleFactor+Math.round(this.scaleFactor+(f.width/this.width+f.height/this.height)/2),g-=2):g=this.scaleFactor+Math.round((f.width/this.width+f.height/this.height)/2),this.scaleFactor=g}g>=1&&!sf.base.isNullOrUndefined(this.dotNetRef)&&this.dotNetRef.invokeMethodAsync("TriggerZoomSelection",this.position.x,this.position.y,this.height,this.width)}}if(n.indexOf("_LayerIndex_")>-1){var y=void 0,_=void 0,b=void 0,v=parseInt(n.split("_LayerIndex_")[1].split("_")[0],10);if(n.indexOf("shapeIndex")>-1&&this.shapeSelection(n,v),n.indexOf("_BubbleIndex_")>-1&&!sf.base.isNullOrUndefined(this.dotNetRef)&&(_=parseInt(n.split("_BubbleIndex_")[1].split("_")[0],10),y=-1!==n.indexOf("_dataIndex_")?parseInt(n.split("_dataIndex_")[1].split("_")[0],10):null,this.removeAllHighlight(),this.dotNetRef.invokeMethodAsync("SelectMap",n,v,y,"Bubble",_)),n.indexOf("_NavigationIndex_")>-1&&!sf.base.isNullOrUndefined(this.dotNetRef)&&(b=parseInt(n.split("_NavigationIndex_")[1].split("_")[0],10),y=-1!==n.indexOf("_Line_")?parseInt(n.split("_Line_")[1].split("_")[0],10):null,this.removeAllHighlight(),this.dotNetRef.invokeMethodAsync("SelectMap",n,v,y,"NavigationLine",b)),s&&n.indexOf("MarkerIndex")>-1&&!(n.indexOf("cluster")>-1)&&!sf.base.isNullOrUndefined(this.dotNetRef)){var x=parseInt(n.split("_LayerIndex_")[1].split("_")[0],10),I=parseInt(n.split("_MarkerIndex_")[1].split("_")[0],10);y=parseInt(n.split("_dataIndex_")[1].split("_")[0],10),this.dotNetRef.invokeMethodAsync("TriggerMouseLeave",x,I,y,a.x,a.y,s)}}var B=document.getElementById(this.element.id+"_AnnotationGroup"),S=!sf.base.isNullOrUndefined(B)&&B.contains(t.target);n.indexOf("_Zooming_")>-1||"mouseleave"===t.type||this.isPinchZoomed||!this.element.contains(t.target)||sf.base.isNullOrUndefined(this.dotNetRef)||S||this.dotNetRef.invokeMethodAsync("TriggerClickEventArgs",!1,e,i,document.getElementById(n),this.isTileMap),this.isPinchZoomed=!1},a.prototype.targetTouches=function(t){for(var e=[],i=0;i<t.length;i++)e.push({pageX:t[i].pageX,pageY:t[i].pageY});return e},a.prototype.mouseMove=function(t){var e,n,o=this,s=t.target.id;this.moveClientX=t.pageX,this.moveClientY=t.pageY;var a,l,r=this.isTileMap?this.tileTranslatePoint:this.shapeTranslatePoint,h=!1;if("touchmove"===t.type)this.moveClientX=a=t.touches[0].clientX,this.moveClientY=l=t.touches[0].clientY,2===t.touches.length&&(this.touchMoveList=this.targetTouches(t.touches)),this.options.enablePanning&&t.preventDefault(),e=0,n=0,h=!0;else if(this.moveClientX=t.pageX,this.moveClientY=t.pageY,a=t.clientX,l=t.clientY,e=t.layerX,n=t.layerY,s.indexOf("_Zooming")>-1)document.getElementById(this.element.id+"_Zooming_ToolBar").setAttribute("opacity","1");else{var d=document.getElementById(this.element.id+"_Zooming_ToolBar");sf.base.isNullOrUndefined(d)||d.setAttribute("opacity","0.3")}if(s.indexOf("_Zooming_ToolBar_")>-1){for(var c=document.getElementById(this.element.id+"_Zooming_KitCollection"),p=0;p<c.childElementCount;p++)c.children[p].setAttribute("class"," e-maps-toolbar");c&&(!this.options.enableSelectionZooming&&s.indexOf("_Zoom_")>-1&&document.getElementById(this.element.id+"_Zooming_ToolBar_Zoom_Group").setAttribute("class",""),!this.options.enablePanning&&s.indexOf("_Pan_")>-1&&document.getElementById(this.element.id+"_Zooming_ToolBar_Pan_Group").setAttribute("class",""),1===this.options.factor?(this.isTileMap?(this.removeZoomOpacity(this.options.enableSelectionZooming?this.toolbarShapeOpacity:.3,this.options.enableSelectionZooming?this.toolbarButtonOpacity:.3,this.toolbarShapeOpacity,this.toolbarButtonOpacity,.3,.3,this.options.enablePanning?this.toolbarShapeOpacity:.3,this.options.enablePanning?this.toolbarButtonOpacity:.3,.3,.3),!this.enableSelectionZoom&&this.isPan&&this.options.enablePanning&&this.removePanColor(this.toolbarSelection)):(this.options.enablePanning&&s.indexOf("_Pan_")>-1&&document.getElementById(this.element.id+"_Zooming_ToolBar_Pan_Group").setAttribute("class",""),this.removeZoomOpacity(this.options.enableSelectionZooming?this.toolbarShapeOpacity:.3,this.options.enableSelectionZooming?this.toolbarButtonOpacity:.3,this.toolbarShapeOpacity,this.toolbarButtonOpacity,.3,.3,.3,.3,.3,.3)),s.indexOf("_ZoomOut_")>-1?document.getElementById(this.element.id+"_Zooming_ToolBar_ZoomOut_Group").setAttribute("class",""):s.indexOf("_Pan_")>-1&&!this.isPan?document.getElementById(this.element.id+"_Zooming_ToolBar_Pan_Group").setAttribute("class",""):s.indexOf("_Reset_")>-1&&document.getElementById(this.element.id+"_Zooming_ToolBar_Reset_Group").setAttribute("class","")):this.options.maxZoom===this.options.factor?(this.removeZoomOpacity(.3,.3,.3,.3,this.toolbarShapeOpacity,this.toolbarButtonOpacity,this.options.enablePanning?this.toolbarShapeOpacity:.3,this.options.enablePanning?this.toolbarButtonOpacity:.3,this.toolbarShapeOpacity,this.toolbarButtonOpacity),s.indexOf("_ZoomIn_")>-1?document.getElementById(this.element.id+"_Zooming_ToolBar_ZoomIn_Group").setAttribute("class",""):s.indexOf("_Zoom_")>-1&&document.getElementById(this.element.id+"_Zooming_ToolBar_Zoom_Group").setAttribute("class","")):this.options.factor>1&&(this.removeZoomOpacity(this.options.enableSelectionZooming?this.toolbarShapeOpacity:.3,this.options.enableSelectionZooming?this.toolbarButtonOpacity:.3,this.toolbarShapeOpacity,this.toolbarButtonOpacity,this.toolbarShapeOpacity,this.toolbarButtonOpacity,this.options.enablePanning?this.toolbarShapeOpacity:.3,this.options.enablePanning?this.toolbarButtonOpacity:.3,this.toolbarShapeOpacity,this.toolbarButtonOpacity),this.enableSelectionZoom&&this.options.enableSelectionZooming&&this.removeZoomColor(this.toolbarSelection),this.options.minZoom===this.options.factor&&this.minZoomSelection(s))),this.previousId=s}(this.previousId.indexOf("_Zooming_ToolBar_")>-1&&-1===s.indexOf("_Zooming_ToolBar_")&&(this.removeZoomOpacity(this.toolbarShapeOpacity,this.toolbarButtonOpacity,this.toolbarShapeOpacity,this.toolbarButtonOpacity,this.toolbarShapeOpacity,this.toolbarButtonOpacity,this.toolbarShapeOpacity,this.toolbarButtonOpacity,this.toolbarShapeOpacity,this.toolbarButtonOpacity),this.previousId=""),sf.base.isNullOrUndefined(this.legendSettings)||"Interactive"!==this.legendSettings.mode||!(s.indexOf("_MapAreaBorder")>-1||this.isTileMap&&""===s)||sf.base.isNullOrUndefined(this.dotNetRef))||null!==document.getElementById(this.element.id+"_Interactive_Legend")&&(sf.base.Browser.isDevice&&clearTimeout(this.arrowCountTimer),this.dotNetRef.invokeMethodAsync("MapsAreaInteractive"));if(!sf.base.isNullOrUndefined(this.legendSettings)&&"Interactive"===this.legendSettings.mode&&s.indexOf("_LayerIndex")>-1&&!sf.base.isNullOrUndefined(this.dotNetRef)){var u=document.getElementById(t.target.id).getAttribute("fill");if(s.indexOf("_shapeIndex")>-1&&"Layers"===this.legendSettings.type)sf.base.Browser.isDevice?(clearTimeout(this.arrowCountTimer),this.dotNetRef.invokeMethodAsync("RenderInteractive",u,0,0,0),this.arrowCountTimer=setTimeout((function(){o.dotNetRef.invokeMethodAsync("MapsAreaInteractive")}),1500)):this.dotNetRef.invokeMethodAsync("RenderInteractive",u,0,0,0);else if(s.indexOf("_MarkerIndex_")>-1&&"Markers"===this.legendSettings.type){var m=parseInt(s.split("_LayerIndex_")[1].split("_")[0],10),g=parseInt(s.split("_MarkerIndex_")[1].split("_")[0],10),f=-1!==s.indexOf("_dataIndex_")?parseInt(s.split("_dataIndex_")[1].split("_")[0],10):null;this.dotNetRef.invokeMethodAsync("RenderInteractive",u,m,g,f)}else if(s.indexOf("_BubbleIndex_")>-1&&"Bubbles"===this.legendSettings.type){m=parseInt(s.split("_LayerIndex_")[1].split("_")[0],10);var y=parseInt(s.split("_BubbleIndex_")[1].split("_")[0],10);f=-1!==s.indexOf("_dataIndex_")?parseInt(s.split("_dataIndex_")[1].split("_")[0],10):null;this.dotNetRef.invokeMethodAsync("RenderInteractive",u,m,y,f)}}var _=this.getMousePosition(this.moveClientX,this.moveClientY);this.moveClientX=_.x,this.moveClientY=_.y;var b=s.split("_")[0];if(-1==s.indexOf("_MapAreaBorder")?this.highlightMap(t):this.removeAllHighlight(),this.options.enableZoom&&this.options.enableSelectionZooming&&this.mouseClick&&this.zoomClick&&this.options.maxZoom>this.options.factor&&this.enableSelectionZoom){t.preventDefault(),this.svgCreated||(this.startValue=this.svgPoint(this.svg,a,l),this.svgCreated=!0),this.position=this.svgPoint(this.svg,a,l);var v=document.getElementById(this.element.id).getBoundingClientRect();this.width=Math.abs(this.position.x-this.startValue.x),this.height=Math.abs(this.position.y-this.startValue.y),this.position.x>this.startValue.x&&(this.position.x=this.startValue.x),this.position.y>this.startValue.y&&(this.position.y=this.startValue.y),this.position.x=this.position.x-v.x,this.position.y=this.position.y-v.y,i.setAttributeNS(null,"x",this.position.x.toString()),i.setAttributeNS(null,"y",this.position.y.toString()),i.setAttributeNS(null,"id",this.element.id+"drawRect"),i.setAttributeNS(null,"width",this.width.toString()),i.setAttributeNS(null,"height",this.height.toString()),i.setAttributeNS(null,"fill","#d3d3d3"),i.setAttributeNS(null,"stroke-dasharray","3"),i.setAttributeNS(null,"opacity","0.5"),i.setAttributeNS(null,"stroke","#009900"),null!==document.getElementById(this.element.id+"_tile_parent")?document.getElementById(this.element.id+"_LayerCollections").parentNode.appendChild(i):document.getElementById(this.element.id+"_svg").appendChild(i)}if(this.options.enableZoom&&this.options.enablePinchZooming&&this.touchMoveList.length>=2&&this.touchStartList.length>=2&&(this.isPinchZoomed=!0,this.pinchComplete||this.panComplete||sf.base.isNullOrUndefined(this.dotNetRef)||this.dotNetRef.invokeMethodAsync("TriggerOnZoom",r.x,r.y),this.pinchZooming(t),this.pinchComplete=!0),this.allowPanning&&this.options.enablePanning&&(this.clientX!==this.moveClientX||this.clientY!==this.moveClientY)&&!this.isPinchZoomed){if(this.isPanning=!0,!this.isTileMap){var x=document.getElementById(this.element.id+"_LayerCollections");for(p=0;p<x.children.length;p++)for(var I=0;I<x.children[p].childElementCount;I++)if(x.children[p].children[I].id.indexOf("Polygon_Group")>-1){this.scaleFactor=x.children[p].children[I].transform.baseVal[0].matrix.a;break}if(this.clientX!==this.moveClientX&&this.clientY!==this.moveClientY){var B=this.clientX-this.moveClientX,S=this.clientY-this.moveClientY,T=r.x-B/this.scaleFactor,M=r.y-S/this.scaleFactor;this.panComplete||this.pinchComplete||sf.base.isNullOrUndefined(this.dotNetRef)||(this.previousPoint=this.isTileMap?this.tileTranslatePoint:this.shapeTranslatePoint,this.dotNetRef.invokeMethodAsync("TriggerPanning",r.x,r.y,T,M,e,n,this.scaleFactor)),this.panning(B,S,e,n,this.scaleFactor,!1),this.panComplete=!this.isTouch||2!==this.touchMoveList.length||2!==this.touchStartList.length,this.clientX=this.moveClientX,this.clientY=this.moveClientY}}if(s.indexOf(b)>-1)if(null!==(x=document.getElementById(t.currentTarget.id+"_animated_tiles"))){this.isTileMap=!0,this.scaleFactor=parseInt(x.className,10);B=this.clientX-this.moveClientX,S=this.clientY-this.moveClientY,this.getTileGeoLocation(e,n);this.panComplete||sf.base.isNullOrUndefined(this.dotNetRef)||2===this.touchMoveList.length||2===this.touchStartList.length||(this.previousPoint=this.isTileMap?this.tileTranslatePoint:this.shapeTranslatePoint,this.dotNetRef.invokeMethodAsync("TriggerTilePanning",this.previousPoint.x,this.previousPoint.y,r.x,r.y,e,n,this.scaleFactor)),this.panning(B,S,e,n,this.scaleFactor,!1),this.panComplete=!this.isTouch||2!==this.touchMoveList.length||2!==this.touchStartList.length,this.clientX=this.moveClientX,this.clientY=this.moveClientY}}if(!sf.base.isNullOrUndefined(this.dotNetRef)){if(!(this.allowPanning||this.mouseClick&&this.zoomClick)&&s.indexOf("shapeIndex")>-1&&"MouseMove"===this.options.tooltipDisplayMode){m=parseInt(s.split("_LayerIndex_")[1].split("_")[0],10);var O=parseInt(s.split("_shapeIndex_")[1].split("_")[0],10);this.dotNetRef.invokeMethodAsync("TriggerShapeTooltip",s,_.x,_.y,m,O,"Shape",0)}if((""===s||-1===s.indexOf(this.element.id))&&!sf.base.isNullOrUndefined(t.target.offsetParent)){var k=t.target.offsetParent.id;s=k.indexOf("_MarkerIndex_")>-1?k:s}if((-1===s.indexOf("_shapeIndex_")&&-1===s.indexOf("_MarkerIndex_")&&-1===s.indexOf("_BubbleIndex_")&&"MouseMove"===this.options.tooltipDisplayMode||this.isToolbarTooltip&&-1===s.indexOf("_Zooming_ToolBar_")&&"MouseMove"!==this.options.tooltipDisplayMode)&&this.dotNetRef.invokeMethodAsync("TriggerShapeTooltip","",_.x,_.y,0,0,"",0),this.isToolbarTooltip=!1,s.indexOf("_Zooming_ToolBar_")>-1){this.isToolbarTooltip=!0;var C=s.split("_Zooming_ToolBar_")[1].split("_")[0];this.dotNetRef.invokeMethodAsync("TriggerShapeTooltip",s,_.x,_.y,0,0,C,0)}if(s.indexOf("_LayerIndex_")>-1&&s.indexOf("_MarkerIndex_")>-1||h&&s.indexOf("MarkerIndex")>-1&&!(s.indexOf("cluster")>-1)){m=parseInt(s.split("_LayerIndex_")[1].split("_")[0],10),g=parseInt(s.split("_MarkerIndex_")[1].split("_")[0],10),f=parseInt(s.split("_dataIndex_")[1].split("_")[0],10);this.dotNetRef.invokeMethodAsync("TriggerMouseMove",m,g,f,s,_.x,_.y,s.indexOf("cluster")>-1?"cluster":"marker",h)}if(s.indexOf("_LayerIndex_")>-1&&s.indexOf("_BubbleIndex_")>-1){m=parseInt(s.split("_LayerIndex_")[1].split("_")[0],10),g=parseInt(s.split("_BubbleIndex_")[1].split("_")[0],10),f=parseInt(s.split("_dataIndex_")[1].split("_")[0],10);this.dotNetRef.invokeMethodAsync("TriggerBubbleMouseMove",m,g,f,s,_.x,_.y)}if(this.previousMarkerId.indexOf("_MarkerIndex_")>-1&&this.previousMarkerId!=s){m=parseInt(this.previousMarkerId.split("_LayerIndex_")[1].split("_")[0],10),g=parseInt(this.previousMarkerId.split("_MarkerIndex_")[1].split("_")[0],10),f=parseInt(this.previousMarkerId.split("_dataIndex_")[1].split("_")[0],10);this.dotNetRef.invokeMethodAsync("TriggerMouseLeave",m,g,f,_.x,_.y,h)}}this.previousMarkerId=s.indexOf("MarkerIndex")>-1&&!(s.indexOf("cluster")>-1)?s:""},a.prototype.mouseDown=function(t){var e=t.target.id,i=this.options.factor+(e.indexOf("_ZoomIn_")>1&&"0.3"!==document.getElementById(this.element.id+"_Zooming_ToolBar_ZoomIn_Rect").getAttribute("stroke-opacity")?1:0)+(e.indexOf("_ZoomOut_")>1&&"0.3"!==document.getElementById(this.element.id+"_Zooming_ToolBar_ZoomOut_Rect").getAttribute("stroke-opacity")?-1:0);i=e.indexOf("_Reset_")>1?this.options.minZoom:i,this.isPinchZoomed=!1,this.isTouch=!1,this.panComplete=!1,this.pinchComplete=!1,this.currentTiles=null;var n=document.getElementById(this.element.id+"_animated_tiles");this.isTileMap&&!sf.base.isNullOrUndefined(n)&&(this.currentTiles=n.cloneNode(!0)),"touchstart"===t.type?(this.options.enablePanning&&t.preventDefault(),this.clientX=t.touches[0].clientX,this.clientY=t.touches[0].clientY,2===t.touches.length&&(this.touchStartList=this.targetTouches(t.touches)),this.isTouch=!0):(this.clientX=t.pageX,this.clientY=t.pageY);var o=this.getMousePosition(this.clientX,this.clientY);if(this.clientX=o.x,this.clientY=o.y,this.options.enableZoom&&this.options.enableSelectionZooming&&this.zoomClick&&(this.mouseClick=!0,t.preventDefault()),this.mouseClick||-1!==e.indexOf("ToolBar_Pan")||(e.indexOf("_MapAreaBorder")>-1&&this.options.enablePanning&&(this.allowPanning=!0),!this.enableSelectionZoom&&e.indexOf("")>-1&&!(e.indexOf("Zooming")>-1)&&this.options.enablePanning&&(this.allowPanning=!0)),this.isTouch&&e.indexOf("MarkerIndex")>-1&&!(e.indexOf("cluster")>-1)&&!sf.base.isNullOrUndefined(this.dotNetRef)){var s=parseInt(e.split("_LayerIndex_")[1].split("_")[0],10),a=parseInt(e.split("_MarkerIndex_")[1].split("_")[0],10),l=parseInt(e.split("_dataIndex_")[1].split("_")[0],10);this.dotNetRef.invokeMethodAsync("TriggerMarkerClick",s,a,l,e,o.x,o.y,null,"marker",this.isTouch)}this.toolbarButtonColor(i,e)},a.prototype.toolbarButtonColor=function(t,e){document.getElementById(this.element.id+"_Zooming_KitCollection")&&(1===t?(document.getElementById(this.element.id+"_Zooming_ToolBar_Reset_Rect")&&document.getElementById(this.element.id+"_Zooming_ToolBar_Reset_Group").setAttribute("class",""),document.getElementById(this.element.id+"_Zooming_ToolBar_ZoomOut_Rect")&&document.getElementById(this.element.id+"_Zooming_ToolBar_ZoomOut_Group").setAttribute("class",""),this.removePanColor(this.toolbarColor),this.isTileMap&&(!this.enableSelectionZoom||this.previousId.indexOf("_Reset_")>-1)?(document.getElementById(this.element.id+"_Zooming_ToolBar_Pan_Rect")&&"0.3"!==document.getElementById(this.element.id+"_Zooming_ToolBar_Pan_Rect").getAttribute("stroke-opacity")&&this.removePanColor(this.toolbarSelection),this.allowPanning?this.removeZoomOpacity(this.options.enableSelectionZooming?this.toolbarShapeOpacity:.3,this.options.enableSelectionZooming?this.toolbarButtonOpacity:.3,this.toolbarShapeOpacity,this.toolbarButtonOpacity,this.toolbarShapeOpacity,this.toolbarButtonOpacity,this.options.enablePanning?this.toolbarShapeOpacity:.3,this.options.enablePanning?this.toolbarButtonOpacity:.3,this.toolbarShapeOpacity,this.toolbarButtonOpacity):this.removeZoomOpacity(this.options.enableSelectionZooming?this.toolbarShapeOpacity:.3,this.options.enableSelectionZooming?this.toolbarButtonOpacity:.3,this.toolbarShapeOpacity,this.toolbarButtonOpacity,.3,.3,this.options.enablePanning?this.toolbarShapeOpacity:.3,this.options.enablePanning?this.toolbarButtonOpacity:.3,.3,.3),document.getElementById(this.element.id+"_Zooming_ToolBar_Pan_Rect")&&!this.enableSelectionZoom&&this.isPan&&this.options.enablePanning&&this.removePanColor(this.toolbarSelection)):this.removeZoomOpacity(this.options.enableSelectionZooming?this.toolbarShapeOpacity:.3,this.options.enableSelectionZooming?this.toolbarButtonOpacity:.3,this.toolbarShapeOpacity,this.toolbarButtonOpacity,.3,.3,.3,.3,.3,.3)):(this.options.maxZoom===t||this.options.maxZoom<t)&&!this.allowPanning?(document.getElementById(this.element.id+"_Zooming_ToolBar_ZoomIn_Rect")&&document.getElementById(this.element.id+"_Zooming_ToolBar_ZoomIn_Group").setAttribute("class",""),document.getElementById(this.element.id+"_Zooming_ToolBar_Zoom_Rect")&&document.getElementById(this.element.id+"_Zooming_ToolBar_Zoom_Group").setAttribute("class",""),""!=this.previousId&&this.removeZoomOpacity(.3,.3,.3,.3,this.toolbarShapeOpacity,this.toolbarButtonOpacity,this.options.enablePanning?this.toolbarShapeOpacity:.3,this.options.enablePanning?this.toolbarButtonOpacity:.3,this.toolbarShapeOpacity,this.toolbarButtonOpacity),this.options.maxZoom===t&&this.enableSelectionZoom&&document.getElementById(this.element.id+"_Zooming_ToolBar_Zoom_Rect")&&(document.getElementById(this.element.id+"_Zooming_ToolBar_Zoom_Path").setAttribute("fill",this.toolbarColor),document.getElementById(this.element.id+"_Zooming_ToolBar_Zoom_Path").setAttribute("stroke",this.toolbarColor),this.isPan=!1),this.options.maxZoom>=t&&1!=t&&!this.enableSelectionZoom&&this.isPan&&this.options.enablePanning&&this.removePanColor(this.toolbarSelection),this.options.minZoom===t&&this.minZoomSelection(e)):t>1&&(this.removeZoomOpacity(this.options.enableSelectionZooming?this.toolbarShapeOpacity:.3,this.options.enableSelectionZooming?this.toolbarButtonOpacity:.3,this.toolbarShapeOpacity,this.toolbarButtonOpacity,this.toolbarShapeOpacity,this.toolbarButtonOpacity,this.options.enablePanning?this.toolbarShapeOpacity:.3,this.options.enablePanning?this.toolbarButtonOpacity:.3,this.toolbarShapeOpacity,this.toolbarButtonOpacity),this.options.maxZoom>=t&&1!=t&&(!this.enableSelectionZoom&&this.isPan&&this.options.enablePanning&&this.removePanColor(this.toolbarSelection),this.enableSelectionZoom&&this.isTileMap&&this.removePanColor(this.toolbarColor)),this.enableSelectionZoom&&this.options.enableSelectionZooming&&this.removeZoomColor(this.toolbarSelection),this.options.minZoom===t&&this.minZoomSelection(e)))},a.prototype.pinchZooming=function(t){this.pinchFactor=this.scaleFactor;var e=this.scaleFactor;if(this.isTileMap){a=this.getTouchCenterPoint();var i=Math.sqrt(Math.pow(this.touchMoveList[0].pageX-this.touchMoveList[1].pageX,2)+Math.pow(this.touchMoveList[0].pageY-this.touchMoveList[1].pageY,2)),n=this.pinchFactor;sf.base.isNullOrUndefined(this.pinchDistance)||(this.pinchDistance>i?n-=1:this.pinchDistance<i&&(n+=1),(n=Math.min(this.options.maxZoom,Math.max(this.options.minZoom,n)))!=this.pinchFactor&&(this.pinchFactor=n,this.tileZoomLevel=this.pinchFactor,this.scaleFactor=this.pinchFactor,this.currentTouchCenter=a,this.getTileTranslatePosition(e,this.pinchFactor,{x:a.x,y:a.y},null),this.translatePoint.x=(this.tileTranslatePoint.x-.01*this.scaleFactor)/Math.pow(2,this.scaleFactor-1),this.translatePoint.y=(this.tileTranslatePoint.y-.01*this.scaleFactor)/Math.pow(2,this.scaleFactor-1),this.generateTiles(),this.renderMarkers(),this.clusterMarkerProcess())),this.pinchDistance=i}else{var o=this.areaRect;this.previousScale=this.scaleFactor,this.previousPoint=this.shapeTranslatePoint;this.tileTranslatePoint;var s=this.calculateScale(this.touchStartList,this.touchMoveList),a=this.getTouchCenter(this.touchMoveList),l=s/this.lastScale;this.lastScale=s,this.pinchFactor*=l,this.pinchFactor=Math.min(this.options.maxZoom,Math.max(this.options.minZoom,this.pinchFactor));var r=Math.abs(this.baseMapBounds.minBounds.x-this.baseMapBounds.maxBounds.x),h=Math.abs(this.baseMapBounds.minBounds.y-this.baseMapBounds.maxBounds.y),d=Math.abs(this.baseMapBounds.maxBounds.y-this.baseMapBounds.minBounds.y)*this.pinchFactor,c=this.shapeTranslatePoint.x-(o.width/this.scaleFactor-o.width/this.pinchFactor)/(o.width/a.x),p=this.shapeTranslatePoint.y-(o.height/this.scaleFactor-o.height/this.pinchFactor)/(o.height/a.y);c=d<this.areaRect.height?o.x+(-this.baseMapBounds.minBounds.x+(o.width/2-r/2)):c,p=d<this.areaRect.height?o.y+(-this.baseMapBounds.minBounds.y+(o.height/2-h/2)):p,this.scaleFactor=this.pinchFactor,this.shapeTranslatePoint={x:c,y:p},this.applyTransform(this.scaleFactor,this.shapeTranslatePoint)}},a.prototype.minZoomSelection=function(t){this.removeZoomOpacity(this.options.enableSelectionZooming?this.toolbarShapeOpacity:.3,this.options.enableSelectionZooming?this.toolbarButtonOpacity:.3,this.toolbarShapeOpacity,this.toolbarButtonOpacity,.3,.3,this.options.enablePanning?this.toolbarShapeOpacity:.3,this.options.enablePanning?this.toolbarButtonOpacity:.3,.3,.3),t.indexOf("_ZoomOut_")>-1&&document.getElementById(this.element.id+"_Zooming_ToolBar_ZoomOut_Group").setAttribute("class",""),t.indexOf("_Reset_")>-1&&document.getElementById(this.element.id+"_Zooming_ToolBar_Reset_Group").setAttribute("class","")},a.prototype.removeZoomOpacity=function(t,e,i,n,o,s,a,l,r,h){document.getElementById(this.element.id+"_Zooming_ToolBar_Zoom_Rect")&&(document.getElementById(this.element.id+"_Zooming_ToolBar_Zoom_Rect").setAttribute("stroke-opacity",e.toString()),document.getElementById(this.element.id+"_Zooming_ToolBar_Zoom_Path").setAttribute("opacity",t.toString())),document.getElementById(this.element.id+"_Zooming_ToolBar_ZoomIn_Rect")&&(document.getElementById(this.element.id+"_Zooming_ToolBar_ZoomIn_Rect").setAttribute("stroke-opacity",n.toString()),document.getElementById(this.element.id+"_Zooming_ToolBar_ZoomIn_Path").setAttribute("opacity",i.toString())),document.getElementById(this.element.id+"_Zooming_ToolBar_ZoomOut_Rect")&&(document.getElementById(this.element.id+"_Zooming_ToolBar_ZoomOut_Rect").setAttribute("stroke-opacity",s.toString()),document.getElementById(this.element.id+"_Zooming_ToolBar_ZoomOut_Path").setAttribute("opacity",o.toString())),document.getElementById(this.element.id+"_Zooming_ToolBar_Pan_Rect")&&(document.getElementById(this.element.id+"_Zooming_ToolBar_Pan_Rect").setAttribute("stroke-opacity",l.toString()),document.getElementById(this.element.id+"_Zooming_ToolBar_Pan_Path").setAttribute("opacity",a.toString())),document.getElementById(this.element.id+"_Zooming_ToolBar_Reset_Rect")&&(document.getElementById(this.element.id+"_Zooming_ToolBar_Reset_Rect").setAttribute("stroke-opacity",h.toString()),document.getElementById(this.element.id+"_Zooming_ToolBar_Reset_Path").setAttribute("opacity",r.toString()))},a.prototype.removePanColor=function(t){document.getElementById(this.element.id+"_Zooming_ToolBar_Pan_Rect")&&(document.getElementById(this.element.id+"_Zooming_ToolBar_Pan_Path").setAttribute("fill",t),document.getElementById(this.element.id+"_Zooming_ToolBar_Pan_Path").setAttribute("stroke",t))},a.prototype.removeZoomColor=function(t){document.getElementById(this.element.id+"_Zooming_ToolBar_Zoom_Rect")&&(document.getElementById(this.element.id+"_Zooming_ToolBar_Zoom_Path").setAttribute("fill",t),document.getElementById(this.element.id+"_Zooming_ToolBar_Zoom_Path").setAttribute("stroke",t))},a.prototype.getTileTranslatePosition=function(t,e,i,n){var o=256*Math.pow(2,t),s=256*Math.pow(2,e),a=(i.x-this.tileTranslatePoint.x)/o*100,l=(i.y-this.tileTranslatePoint.y)/o*100,r=this.baseMapBounds.availableSize;this.tileTranslatePoint.x=1===e?r.width/2-256:i.x-a*s/100,this.tileTranslatePoint.y=1===e?r.height/2-256:i.y-l*s/100},a.prototype.calculateScale=function(t,e){var i=this.getDistance(t[0],t[1]);return this.getDistance(e[0],e[1])/i},a.prototype.getDistance=function(t,e){var i=t.pageX-e.pageX,n=t.pageY-e.pageY;return Math.sqrt(i*i+n*n)},a.prototype.sum=function(t,e){return t+e},a.prototype.getTouchCenter=function(t){return{x:t.map((function(t){return t.pageX})).reduce(this.sum)/t.length,y:t.map((function(t){return t.pageY})).reduce(this.sum)/t.length}},a.prototype.getTouchCenterPoint=function(){for(var t=[],e=0;e<this.touchMoveList.length;e++)t.push(this.getMousePosition(this.touchMoveList[e].pageX,this.touchMoveList[e].pageY));return{x:(t[0].x+t[1].x)/2,y:(t[0].y+t[1].y)/2}},a.prototype.highlightMap=function(t){var e=t.target,i=e.id;if(e.classList.contains("highlightLine")||e.classList.contains("highlightShape")||e.classList.contains("highlightMarker")||e.classList.contains("highlightBubble")||e.classList.contains("highlightNavigation")||this.removeAllHighlight(),this.targetElementPath=e,i.indexOf("_LayerIndex_")>-1&&!sf.base.isNullOrUndefined(this.dotNetRef)){var n=parseInt(i.split("_LayerIndex_")[1].split("_")[0],10),o=i.indexOf("_dataIndex_")>-1?parseInt(i.split("_dataIndex_")[1].split("_")[0],10):0;if(i.indexOf("shapeIndex")>-1&&-1==i.indexOf("LabelIndex_")&&this.options.layerHighlightSettings[n]&&this.options.layerHighlightSettings[n].Enable){if(!e.classList.contains("mapShapeSelection")){var s=parseInt(i.split("_shapeIndex_")[1].split("_")[0],10);this.dotNetRef.invokeMethodAsync("TriggerShapeHighlight",n,s,i)}}else if(i.indexOf("_BubbleIndex_")>-1){var a=parseInt(i.split("_BubbleIndex_")[1].split("_")[0],10);this.options.bubbleHighlightSettings[n][a]&&this.options.bubbleHighlightSettings[n][a].Enable&&!e.classList.contains("mapBubbleSelection")&&this.dotNetRef.invokeMethodAsync("TriggerItemHighlight","Bubble",n,a,o,i)}else if(i.indexOf("_NavigationIndex_")>-1){var l=parseInt(i.split("_NavigationIndex_")[1].split("_")[0],10);this.options.navigationHighlightSettings[n][l]&&this.options.navigationHighlightSettings[n][l].Enable&&!e.classList.contains("mapNavigationSelection")&&this.dotNetRef.invokeMethodAsync("TriggerItemHighlight","Navigation",n,l,0,i)}else if(i.indexOf("_MarkerIndex_")>-1&&-1===i.indexOf("_cluster_")&&!(i.indexOf("markerClusterConnectorLine")>-1)){var r=parseInt(i.split("_MarkerIndex_")[1].split("_")[0],10);this.options.markerHighlightSettings[n][r]&&this.options.markerHighlightSettings[n][r].Enable&&!e.classList.contains("mapMarkerSelection")&&this.dotNetRef.invokeMethodAsync("TriggerItemHighlight","Marker",n,r,o,i)}}else if(i.indexOf("_Legend_Shape_")>-1){var h=parseInt(i.split("_Index_")[1],10),d=this.legendDetails[h];if("Layers"===this.legendSettings.type){if(!e.classList.contains("mapShapeSelection"))for(var c=0;c<d.length;c++)if(this.options.layerHighlightSettings[d[c].layerIndex]&&!sf.base.isNullOrUndefined(this.options.layerHighlightSettings[d[c].layerIndex])&&this.options.layerHighlightSettings[d[c].layerIndex].Enable){e.classList.add("highlightShape");var p=document.getElementById(this.element.id+"_LayerIndex_"+d[c].layerIndex+"_shapeIndex_"+d[c].settingIndex);this.handleHighlight(p,"Shape",this.options.layerHighlightSettings[d[c].layerIndex])}}else if("Markers"===this.legendSettings.type){if(!e.classList.contains("mapMarkerSelection"))for(c=0;c<d.length;c++)if(this.options.markerHighlightSettings[d[c].layerIndex]&&!sf.base.isNullOrUndefined(this.options.markerHighlightSettings[d[c].layerIndex][d[c].settingIndex])&&this.options.markerHighlightSettings[d[c].layerIndex][d[c].settingIndex].Enable){e.classList.add("highlightMarker");p=document.getElementById(this.element.id+"_LayerIndex_"+d[c].layerIndex+"_MarkerIndex_"+d[c].settingIndex+"_dataIndex_"+d[c].dataIndex);this.handleHighlight(p,"Marker",this.options.markerHighlightSettings[d[c].layerIndex][d[c].settingIndex])}}else if("Bubbles"===this.legendSettings.type&&!e.classList.contains("mapBubbleSelection"))for(c=0;c<d.length;c++)if(this.options.bubbleHighlightSettings[d[c].layerIndex]&&!sf.base.isNullOrUndefined(this.options.bubbleHighlightSettings[d[c].layerIndex][d[c].settingIndex])&&this.options.bubbleHighlightSettings[d[c].layerIndex][d[c].settingIndex].Enable){e.classList.add("highlightBubble");p=document.getElementById(this.element.id+"_LayerIndex_"+d[c].layerIndex+"_BubbleIndex_"+d[c].settingIndex+"_dataIndex_"+d[c].dataIndex);this.handleHighlight(p,"Bubble",this.options.bubbleHighlightSettings[d[c].layerIndex][d[c].settingIndex])}}},a.prototype.removeAllHighlight=function(){this.removeHighlight("Shape"),this.removeHighlight("Line"),this.removeHighlight("Marker"),this.removeHighlight("Bubble"),this.removeHighlight("Navigation")},a.prototype.handleHighlight=function(t,e,i){if(("Marker"===e||"Bubble"===e||"Shape"===e)&&!sf.base.isNullOrUndefined(this.legendDetails)&&0!==this.legendDetails.length)for(var n=0;n<this.legendDetails.length;n++)for(var o=0;o<this.legendDetails[n].length;o++)if("Marker"===e&&t.id===this.element.id+"_LayerIndex_"+this.legendDetails[n][o].layerIndex+"_MarkerIndex_"+this.legendDetails[n][o].settingIndex+"_dataIndex_"+this.legendDetails[n][o].dataIndex||"Bubble"===e&&t.id===this.element.id+"_LayerIndex_"+this.legendDetails[n][o].layerIndex+"_BubbleIndex_"+this.legendDetails[n][o].settingIndex+"_dataIndex_"+this.legendDetails[n][o].dataIndex||"Shape"===e&&t.id===this.element.id+"_LayerIndex_"+this.legendDetails[n][o].layerIndex+"_shapeIndex_"+this.legendDetails[n][o].settingIndex){document.getElementById(this.element.id+"_Legend_Shape_Index_"+n).classList.add("highlight"+e);break}if("Arrow"!==e){var s=!sf.base.isNullOrUndefined(t.getAttribute("data-geometry"))&&t.getAttribute("data-geometry").indexOf("LineString")>-1?"Line":e;t.classList.add("highlight"+s),null!==document.querySelector("#highlight"+s+"Style")&&0!==document.querySelector("#highlight"+s+"Style").length?this.customizeStyle("highlight"+s+"Style","highlight"+s,i,t.id):this.createStyle("highlight"+s+"Style","highlight"+s,i,t.id)}else t.setAttribute("fill",i.Fill),t.setAttribute("fill-opacity",i.opacity),t.setAttribute("stroke-opacity",i.BorderOpacity)},a.prototype.removeHighlight=function(t){var e=document.querySelectorAll(".highlight"+t);if(e&&e.length>0)for(var i=0;i<e.length;i++)if(e[i].classList.remove("highlight"+t),"Navigation"===t&&""!==e[i].id&&(""!==e[i].getAttribute("marker-start")||""!==e[i].getAttribute("marker-end"))){var n=document.getElementById(e[i].id+"_triangle"),o=parseInt(e[i].id.split("_LayerIndex_")[1].split("_")[0],10),s=parseInt(e[i].id.split("_NavigationIndex_")[1].split("_")[0],10);sf.base.isNullOrUndefined(n)||(n.setAttribute("fill",this.navigation[o][s].ArrowColor),n.setAttribute("opacity","1"))}},a.prototype.createStyle=function(t,e,i,n){var o=document.createElement("style");o.id=t,this.highlightStyle(o,e,i,n),document.body.appendChild(o)},a.prototype.highlightStyle=function(t,e,i,n){if(n.indexOf("NavigationIndex")>-1){var o=sf.base.isNullOrUndefined(i.Fill)?sf.base.isNullOrUndefined(i.BorderColor)?"transparent":i.BorderColor:i.Fill,s=parseInt(n.split("_LayerIndex_")[1].split("_")[0],10),a=parseInt(n.split("_NavigationIndex_")[1].split("_")[0],10);this.navigation[s][a].Angle,t.innerHTML="."+e+" {fill: none;fill-opacity:"+i.Opacity+";stroke:"+o+";stroke-width:"+i.BorderWidth+";stroke-opacity:"+i.BorderOpacity}else e.indexOf("Line")>-1?t.innerHTML="."+e+" {fill: transparent;fill-opacity:"+i.Opacity+";stroke:"+i.Fill+";stroke-width:"+(this.isTileMap?i.BorderWidth/Math.pow(2,this.options.factor-1):i.BorderWidth/this.options.factor)+";stroke-opacity:"+i.BorderOpacity:t.innerHTML="."+e+" {fill:"+i.Fill+";fill-opacity:"+i.Opacity+";stroke:"+i.BorderColor+";stroke-width:"+(this.isTileMap?i.BorderWidth/Math.pow(2,this.options.factor-1):i.BorderWidth/this.options.factor)+";stroke-opacity:"+i.BorderOpacity},a.prototype.customizeStyle=function(t,e,i,n){var o=document.getElementById(t);this.highlightStyle(o,e,i,n)},a.prototype.renderMarkers=function(){for(var t=document.getElementById(this.element.id+"_LayerCollections"),e=0;e<this.layerCount;e++){var i=document.getElementById(this.element.id+"_LayerIndex_"+e+"_Markers_Template_Group");this.markerTemplateTranslate(i,0,this.translatePoint.x,this.translatePoint.y,this.scaleFactor);var n=document.getElementById(this.element.id+"_LayerIndex_"+e+"_DataLabel_Group");this.labelTemplateTranslate(n,this.translatePoint.x,this.translatePoint.y,this.scaleFactor)}for(var o=0;o<t.childElementCount;o++){var s=t.children[o];if("g"===s.tagName){s.id.indexOf("_LayerIndex_")>-1&&parseFloat(s.id.split("_LayerIndex_")[1].split("_")[0]);for(var a=0;a<s.children.length;a++){var l=s.children[a];if(l.COMMENT_NODE!==l.nodeType)if(l.id.indexOf("Polygon")>-1)l.setAttribute("transform","scale("+Math.pow(2,this.scaleFactor-1)+") translate( "+this.translatePoint.x+" "+this.translatePoint.y+" )");else if(l.id.indexOf("_MarkerGroup")>-1)for(e=0;e<l.childElementCount;e++)this.markerTranslate(l.children[e],0,this.translatePoint.x,this.translatePoint.y,this.scaleFactor,!1);else if(l.id.indexOf("_line_Group")>-1)if(this.isTileMap)for(var r=0;r<l.childElementCount;r++){var h=document.getElementById(l.children[r].id);for(e=0;e<h.childElementCount;e++)if(""!==h.children[e].id){var d=parseInt(h.children[e].id.split("_LayerIndex_")[1].split("_")[0],10),c=parseInt(h.children[e].id.split("_NavigationIndex_")[1].split("_")[0],10);this.navigationTranslate(h.children[e],0,d,c)}}else l.setAttribute("transform","scale("+this.scaleFactor+") translate( "+this.translatePoint.x+" "+this.translatePoint.y+" )");else if(l.id.indexOf("_dataLableIndex_Group")>-1){var p=Math.pow(2,this.scaleFactor-1);for(e=0;e<l.children.length;e++)this.dataLabelTranslate(l.children[e],0,this.translatePoint.x,this.translatePoint.y,p,"DataLabel")}}}}},a.prototype.setMarkerTranslate=function(t,e,i,n,o){"Balloon"!==this.dataSource[e][i][n][this.markerSettings[e][i].ShapeValuePath]&&"Balloon"!=this.markerSettings[e][i].Type||t.id.indexOf("cluster")>-1?"Rectangle"!==this.dataSource[e][i][n][this.markerSettings[e][i].ShapeValuePath]&&"Rectangle"!=this.markerSettings[e][i].Type||t.id.indexOf("cluster")>-1?this.isTileMap&&t.classList.contains("e-maps-cluster")?t.setAttribute("transform","translate( "+(o.x-this.areaRect.x)+" "+(o.y-this.areaRect.y)+" )"):t.setAttribute("transform","translate( "+o.x+" "+o.y+" )"):t.setAttribute("transform","translate( "+(o.x-this.markerSettings[e][i].Width/2)+" "+(o.y-this.markerSettings[e][i].Height/2)+" )"):t.setAttribute("transform","translate( "+(o.x-this.markerSettings[e][i].Width/2)+" "+(o.y-this.markerSettings[e][i].Height)+" )scale("+this.markerSettings[e][i].Width/30+" "+this.markerSettings[e][i].Height/30+" )")},a.prototype.markerTranslate=function(t,e,i,n,o,s){if(t.COMMENT_NODE!==t.nodeType&&t.TEXT_NODE!==t.nodeType){var a=parseInt(t.id.split("_LayerIndex_")[1].split("_")[0],10),l=parseInt(t.id.split("_MarkerIndex_")[1].split("_")[0],10),r=parseInt(t.id.split("_dataIndex_")[1].split("_")[0],10),h=sf.base.isNullOrUndefined(this.markerSettings[a][l].LatitudeValuePath)||""===this.markerSettings[a][l].LatitudeValuePath?"Latitude":this.markerSettings[a][l].LatitudeValuePath,d=sf.base.isNullOrUndefined(this.markerSettings[a][l].LongitudeValuePath)||""===this.markerSettings[a][l].LongitudeValuePath?"Longitude":this.markerSettings[a][l].LongitudeValuePath,c=0!==this.dataSource[a].length&&0!==this.dataSource[a][l].length?this.dataSource[a][l][r][d]:null,p=0!==this.dataSource[a].length&&0!==this.dataSource[a][l].length?this.dataSource[a][l][r][h]:null;if(p&&c)if(this.isTileMap){var u=this.convertTileLatLongToPoint({x:c,y:p},this.tileZoomLevel,this.tileTranslatePoint,!0);u.x=u.x+this.markerSettings[a][l].X,u.y=u.y+this.markerSettings[a][l].Y,s?(t.style.left=u.x-this.areaRect.x+"px",t.style.top=u.y-this.areaRect.y+"px"):this.setMarkerTranslate(t,a,l,r,u)}else{var m=this.convertGeoToPoint(p,c,e);m.x=(m.x+i)*o+this.markerSettings[a][l].X,m.y=(m.y+n)*o+this.markerSettings[a][l].Y,s?(t.style.left=m.x-this.areaRect.x+"px",t.style.top=m.y-this.areaRect.y+"px"):this.setMarkerTranslate(t,a,l,r,m)}}},a.prototype.navigationTranslate=function(t,e,i,n){if(!sf.base.isNullOrUndefined(this.navigation[i])){var o=this.navigation[i][n].Angle,s=void 0,a=void 0,l=[];if(this.navigation[i][n].Latitude.length===this.navigation[i][n].Longitude.length)for(var r=0;r<this.navigation[i][n].Latitude.length;r++){var h=this.isTileMap?this.convertTileLatLongToPoint({x:this.navigation[i][n].Longitude[r],y:this.navigation[i][n].Latitude[r]},this.tileZoomLevel,this.tileTranslatePoint,!0):this.convertGeoToPoint(this.navigation[i][n].Latitude[r],this.navigation[i][n].Longitude[r],e);l.push(h)}for(var d=0;d<l.length-1;d++){o=1<(o=-1>o?-1:o)?1:o;var c=this.convertRadius(l[d],l[d+1]);o<=1&&o>0&&(s=0,l[d].x>l[d+1].x&&(s=1)),o>=-1&&o<0&&(s=1,l[d].x>l[d+1].x&&(s=0)),a=0===(o=Math.abs(o))?"M "+l[d].x+","+l[d].y+"L "+l[d+1].x+","+l[d+1].y+" ":"M "+l[d].x+","+l[d].y+" A "+(c/2+(1-o)*c/(10*o))+" "+(c/2+(1-o)*c/(10*o))+" 0,0,"+s+" , "+l[d+1].x+","+l[d+1].y+" ",document.getElementById(this.id+"_LayerIndex_"+i+"_NavigationIndex_"+n+"_Line_"+d).setAttribute("d",a)}}},a.prototype.dataLabelTranslate=function(t,e,i,n,o,s){if(t.COMMENT_NODE!==t.nodeType&&t.TEXT_NODE!==t.nodeType){var a,l,r=parseInt(t.id.split("_LayerIndex_")[1].split("_")[0],10),h=parseFloat(t.id.split("_shapeIndex_")[1].split("_")[0]);if("Template"!==s){a=(d=this.labelCollection[r][h]).LocationX,l=d.LocationY;a=(a+i)*o-d.BorderSize.Height/4+d.OffsetX,l=(l+n)*o+d.BorderSize.Height/4+d.OffsetY,t.id.indexOf("_RectIndex_")>-1?(t.setAttribute("x",(a-parseInt(t.getAttribute("width"))/2).toString()),t.setAttribute("y",(l-(5+parseInt(t.getAttribute("height"))/2)).toString())):t.setAttribute("transform","translate( "+a+" "+l+" )")}else{var d;a=((d=this.dataLabelTemplateCollection[r][h]).LocationX+i)*o+d.OffsetX,l=(d.LocationY+n)*o+d.OffsetY,t.style.left=a+"px",t.style.top=l+"px"}}},a.prototype.convertTileLatLongToPoint=function(t,e,i,n){var o=256*Math.pow(2,e),s=(t.x+180)/360,a=Math.sin(t.y*Math.PI/180),l=.5-Math.log((1+a)/(1-a))/(4*Math.PI),r=t.x,h=t.y;return n&&(r=s*o+.5+i.x,h=l*o+.5+i.y),{x:r,y:h}},a.prototype.panning=function(t,e,i,n,o,s){if(this.mergeSeparation(),this.isTileMap){a=this.tileTranslatePoint.x-t,l=this.tileTranslatePoint.y-e;this.tileTranslatePoint.x=a,this.tileTranslatePoint.y=l,(this.tileTranslatePoint.y>-10&&e<0||this.tileTranslatePoint.y<-256*(Math.pow(2,o)-2)&&e>0)&&(this.tileTranslatePoint.x=a+t,this.tileTranslatePoint.y=l+e),s&&(t=0,e=0),this.translatePoint.x=(this.tileTranslatePoint.x-t)/Math.pow(2,o-1),this.translatePoint.y=(this.tileTranslatePoint.y-e)/Math.pow(2,o-1),this.generateTiles(),this.renderMarkers()}else{this.shapeTranslatePoint;var a=this.shapeTranslatePoint.x-t/o,l=this.shapeTranslatePoint.y-e/o,r=document.getElementById(this.element.id+"_LayerCollections").getBoundingClientRect(),h=document.getElementById(this.element.id+"_svg").getBoundingClientRect(),d=document.getElementById(this.element.id+"_Legend_Group"),c=sf.base.isNullOrUndefined(d)?0:d.getClientRects()[0].height,p=t<0?r.left<=h.left+this.areaRect.x:r.left+r.width>=h.left+h.width+this.areaRect.x+this.marginLeft,u=e<0?r.top<=h.top+this.areaRect.y:r.top+r.height+c+this.marginTop>=h.top+h.height;p&&u?(this.shapeTranslatePoint={x:a,y:l},this.applyTransform(this.scaleFactor,this.shapeTranslatePoint)):p?(this.shapeTranslatePoint={x:a,y:this.shapeTranslatePoint.y},this.applyTransform(this.scaleFactor,this.shapeTranslatePoint)):u&&(this.shapeTranslatePoint={x:this.shapeTranslatePoint.x,y:l},this.applyTransform(this.scaleFactor,this.shapeTranslatePoint))}},a.prototype.applyTransform=function(t,e){for(var i=this.isTileMap?this.translatePoint.x:e.x,n=this.isTileMap?this.translatePoint.y:e.y,o=document.getElementById(this.element.id+"_LayerCollections"),s=this.calculateFactor(),a=0;a<o.children.length;a++){var l=o.children[a];if(l.COMMENT_NODE!==l.nodeType&&"g"===l.tagName){l.id.indexOf("_LayerIndex_")>-1&&parseFloat(l.id.split("_LayerIndex_")[1].split("_")[0]);for(var r=0;r<l.children.length;r++){var h=l.children[r];if(h.COMMENT_NODE!==h.nodeType&&!sf.base.isNullOrUndefined(h.id))if(h.id.indexOf("Polygon")>-1||h.id.indexOf("_line_Group")>-1)h.setAttribute("transform","scale("+t+") translate( "+i+" "+n+" )");else if(h.id.indexOf("_MarkerGroup")>-1)for(var d=0;d<h.children.length;d++)sf.base.isNullOrUndefined(h.children[d].id)||this.markerTranslate(h.children[d],s,i,n,t,!1);else if(h.id.indexOf("_bubble_Group_")>-1)for(d=0;d<h.children.length;d++){var c=h.children[d];if(!sf.base.isNullOrUndefined(c.id)){var p=parseFloat(c.id.split("_LayerIndex_")[1].split("_")[0]),u=parseFloat(c.id.split("_BubbleIndex_")[1].split("_")[0]),m=parseFloat(c.id.split("_BubbleIndex_")[1].split("_")[2]);if(this.bubbleCollection[p]&&this.bubbleCollection[p][u]){var g=this.bubbleCollection[p][u][m],f=(g.ZoomTranslatePoint.X+i)*t,y=(g.ZoomTranslatePoint.Y+n)*t;1==g.Type&&(f-=g.Radius,y-=g.Radius),c.setAttribute("transform","translate( "+f+" "+y+" )")}}}else if(h.id.indexOf("_dataLableIndex_Group")>-1)for(d=0;d<h.children.length;d++)this.dataLabelTranslate(h.children[d],s,i,n,t,"DataLabel")}}}for(var _=0;_<this.layerCount;_++){var b=document.getElementById(this.element.id+"_LayerIndex_"+_+"_Markers_Template_Group");this.markerTemplateTranslate(b,s,i,n,t);var v=document.getElementById(this.element.id+"_LayerIndex_"+_+"_DataLabel_Group");this.labelTemplateTranslate(v,i,n,t)}},a.prototype.markerTemplateTranslate=function(t,e,i,n,o){if(t)for(var s=0;s<t.childElementCount;s++)this.markerTranslate(t.children[s],e,i,n,o,!0)},a.prototype.labelTemplateTranslate=function(t,e,i,n){if(t)for(var o=this.isTileMap?Math.pow(2,n-1):n,s=0;s<t.childElementCount;s++)this.dataLabelTranslate(t.children[s],0,e,i,o,"Template")},a.prototype.calculateFactor=function(){var t,e,i,n=1,o=this.baseMapBounds,s=this.areaRect.width,a=this.areaRect.height;if(o){var l=this.convertGeoToPoint(o.latitudeMin,o.longitudeMin,null),r=this.convertGeoToPoint(o.latitudeMax,o.longitudeMax,null);e=r.y-l.y,i=r.x-l.x}else e=i=500;return t=e<a?parseFloat(Math.abs(100*Number(a/Number(e.toString()+"e+1"))).toString().split(".")[0])/10:a/e,n=i<s?parseFloat(Math.abs(100*Number(s/Number(i.toString()+"e+1"))).toString().split(".")[0])/10:s/i,Math.min(n,t)},a.prototype.convertRadius=function(t,e){var i=e.x-t.x,n=e.y-t.y;return Math.sqrt(Math.pow(i,2)+Math.pow(n,2))},a.prototype.convertGeoToPoint=function(t,e,i){var n,o,s,a,l={width:this.areaRect.width,height:this.areaRect.height},r=this.degreesToRadians(t),h=this.degreesToRadians(e),d=null==i?Math.min(l.width,l.height):Math.min(l.width,l.height)*i;switch(this.projectionType){case"Mercator":var c={x:d/2,y:d/2};n=c.x+e*(d/360);var p=this.calculateBound(Math.sin(this.degreesToRadians(t)),-.9999,.9999);o=c.y+.5*Math.log((1+p)/(1-p))*(-d/(2*Math.PI));break;case"Winkel3":((s=this.aitoff(h,r)).x+h/(Math.PI/2))/2,(s.y+r)/2;break;case"Miller":h,1.25*Math.log(Math.tan(Math.PI/4+.4*r));break;case"Eckert3":2/(a=Math.sqrt(Math.PI*(4+Math.PI)))*h*(1+Math.sqrt(1-4*r*r/(Math.PI*Math.PI))),4/a*r;break;case"AitOff":(s=this.aitoff(h,r)).x,s.y;break;case"Eckert5":h*(1+Math.cos(r))/Math.sqrt(2+Math.PI),2*r/Math.sqrt(2+Math.PI);break;case"Equirectangular":h,r;break;case"Eckert6":a=(1+Math.PI/2)*Math.sin(r);for(var u=1/0,m=0;m<10&&Math.abs(u)>1e-6;m++)r-=u=(r+Math.sin(r)-a)/(1+Math.cos(r));a=Math.sqrt(2+Math.PI),h*(1+Math.cos(r))/a,2*r/a}return{x:n,y:o}},a.prototype.aitoff=function(t,e){var i=Math.cos(e),n=Math.sin(Math.cos(i*Math.cos(t/=2)));return{x:2*i*Math.sin(t)*n,y:Math.sin(e)*n}},a.prototype.degreesToRadians=function(t){return t*(Math.PI/180)},a.prototype.calculateBound=function(t,e,i){return sf.base.isNullOrUndefined(e)||(t=Math.max(t,e)),sf.base.isNullOrUndefined(i)||(t=Math.min(t,i)),t},a.prototype.getTileGeoLocation=function(t,e){var i=this.getBound(this.element.id),n=this.getBound(this.element.id+"_tile_parent");return this.pointToLatLong(t+this.areaRect.x-(n.x-i.x),e+this.areaRect.y-(n.y-i.y))},a.prototype.pointToLatLong=function(t,e){var i=256*Math.pow(2,this.scaleFactor),n=this.clip(t-this.translatePoint.x*this.scaleFactor,0,i-1)/i-.5,o=.5-this.clip(e-this.translatePoint.y*this.scaleFactor,0,i-1)/i;return{latitude:90-360*Math.atan(Math.exp(2*-o*Math.PI))/Math.PI,longitude:360*n}},a.prototype.generateTiles=function(){var t,e=this.baseMapBounds.availableSize.width,i=this.baseMapBounds.availableSize.height,n=0,o=0,s=0;n=t=Math.pow(2,this.tileZoomLevel);var a=[];this.tileTranslatePoint.x+256*n<e&&(o=this.tileTranslatePoint.x>0?Math.ceil(this.tileTranslatePoint.x/256):0,s=this.tileTranslatePoint.x+256*n<e?Math.ceil((e-(this.tileTranslatePoint.x+256*n))/256):0),n+=o+s,n=this.horizontalPanXCount>=n?this.horizontalPanXCount:n,this.horizontalPan=!1;for(var l=Math.min(t,(-this.tileTranslatePoint.y+i)/256+1),r=Math.min(n,(-this.tileTranslatePoint.x+e+256*s)/256+1),h=-(this.tileTranslatePoint.x+256*o+256)/256,d=-(this.tileTranslatePoint.y+256)/256,c=Math.round(h);c<Math.round(r);c++)for(var p=Math.round(d);p<Math.round(l);p++){var u=256*c+this.tileTranslatePoint.x,m=256*p+this.tileTranslatePoint.y;if(u>-256&&u<=e&&m>-256&&m<i&&p>=0){var g=c;c<0&&(g=g%t+t);var f={x:g%t,y:p,left:u,top:m,height:256,width:256,src:null};-1===this.urlTemplate.indexOf("virtualearth")?f.src=this.urlTemplate.replace("level",this.scaleFactor.toString()).replace("tileX",f.x.toString()).replace("tileY",f.y.toString()):f.src=this.getBingMap(f,this.urlTemplate),a.push(f)}}var y=document.getElementById(this.element.id+"_animated_tiles"),_=[];for(p=0;p<a.length;p++){var b=document.getElementById(this.element.id+"tile"+p),v=null,x=!1;_.push(p),b?(b.style.removeProperty("display"),v=b.children[0]):((b=document.createElement("div")).id=this.element.id+"tile"+p,b.style.userSelect="none",v=document.createElement("img"),x=!0),v.src!==a[p].src&&v.setAttribute("src",a[p].src),b.style.position="absolute",b.style.left=a[p].left+"px",b.style.top=a[p].top+"px",b.style.height=a[p].height+"px",b.style.width=a[p].width+"px",x&&(b.appendChild(v),y.appendChild(b))}for(var I=a.length;I<y.childElementCount;I++){for(var B=!1,S=0;S<this.currentTiles.childElementCount;S++)B||this.currentTiles.children[S].id!==y.children[I].id||(B=!0);B?y.children[I].style.display="none":y.removeChild(y.children[I])}},a.prototype.getBingMap=function(t,e){for(var i="",n=["t0","t1","t2","t3"],o=Math.min(this.tileZoomLevel,this.options.maxZoom);o>0;o--){var s=0,a=1<<o-1;0!=(t.x&a)&&s++,0!=(t.y&a)&&(s+=2),i=i+""+s}var l=n[Math.min(parseInt(i.substr(i.length-1,1),10),n.length)];return(e=e.replace("{quadkey}",i).replace("{subdomain}",l))+"&mkt=en-US&ur=IN&Key="+this.key},a.prototype.clip=function(t,e,i){return Math.min(Math.max(t,e),i)},a.prototype.svgPoint=function(t,e,i){var n=this.svg.createSVGPoint();return n.x=e-(this.isTileMap?this.areaRect.x:0),n.y=i-(this.isTileMap?this.areaRect.y:0),n.matrixTransform(t.getScreenCTM().inverse())},a.prototype.clusterExpand=function(t,e){var i,n=JSON.parse(e.dataSource),o=parseInt(t[0].split("_LayerIndex_")[1].split("_")[0],10),s=this.markerClusterCollection[o],a=t[0].split("_LayerIndex_"),l=parseInt(a[1].split("_")[0],10),r=[],h=[];if(t[0].indexOf("_MarkerIndex_")>-1){var d=parseInt(a[1].split("_MarkerIndex_")[1].split("_")[0],10),c=parseInt(a[1].split("_dataIndex_")[1].split("_")[0],10);if(!isNaN(d)){i=n[c];var p=[];if(t[0].indexOf("_cluster_")>-1&&s.AllowClustering)for(var u=0;u<n.length;u++)n[u].Latitude===i.Latitude&&n[u].Longitude===i.Longitude&&p.push({data:i,index:l});if(t[0].indexOf("_cluster_")>-1){var m=document.getElementById(t[0].indexOf("_datalabel_")>-1?t[0].split("_datalabel_")[0]:t[0]),g=void 0;"Balloon"===this.markerClusterCollection[o].Shape||sf.base.isNullOrUndefined(m)?sf.base.isNullOrUndefined(m.firstElementChild)||(g=m.firstElementChild.innerHTML.split(",").map(String)):g=m.innerHTML.split(",").map(String),p=[];for(var f=0;f<g.length;f++){var y=this.dataSource[o][parseInt(g[f].split(":")[0])][parseInt(g[f].split(":")[1])];p.push({data:y,index:parseInt(g[f].split(":")[1])}),y.text="",r.push(y)}!1,h.push({data:p,layerIndex:l,markerIndex:d,dataIndex:c,targetClusterIndex:+(t[0].split("_cluster_")[1].indexOf("_datalabel_")>-1?t[0].split("_cluster_")[1].split("_datalabel_")[0]:t[0].split("_cluster_")[1]),isClusterSame:!1})}}}if(h.length>0){this.clusterData=h;var _=document.getElementById(a[0]+"_LayerIndex_"+o+"_MarkerGroup");this.markerClusterExpandCheck?(this.mergeSeparateCluster(this.clusterData,a[0]),this.markerClusterExpandCheck=!1):(this.clusterSeparate(this.clusterData,_,!0,a[0],s),this.markerClusterExpandCheck=!0)}},a.prototype.mergeSeparateCluster=function(t,e){var i,n=t[0].layerIndex,o=t[0].targetClusterIndex,s=t[0].markerIndex,a=e+"_LayerIndex_"+n+"_MarkerIndex_"+s+"_dataIndex_"+t[0].dataIndex+"_cluster_"+o,l=this.getElementId(a),r=this.getElementId(a+"_datalabel_"+o);sf.base.isNullOrUndefined(l)||(l.style.visibility="visible"),sf.base.isNullOrUndefined(r)||(r.style.visibility="visible");var h=t[0].data.length;if(0!=this.clusterLocation.length){var d=[];d="g"==l.tagName?l.firstElementChild.innerHTML.split(",").map(String):l.innerHTML.split(",").map(String);for(var c=0;c<h;c++){var p=parseInt(d[c].split(":")[0]),u=parseInt(d[c].split(":")[1]),m=e+"_LayerIndex_"+n+"_MarkerIndex_"+p;if(i=this.getElementId(m+"_dataIndex_"+u),!sf.base.isNullOrUndefined(i)){if(-1===i.parentElement.id.indexOf("Template")){var g=this.markerSettings[n][s];"Balloon"===g.Type?i.setAttribute("transform","translate( "+this.clusterLocation[c].x+" "+this.clusterLocation[c].y+")scale( "+g.Width/30+" "+g.Height/30+" ) "):i.setAttribute("transform","translate( "+this.clusterLocation[c].x+" "+this.clusterLocation[c].y+")")}else i.style.left=this.clusterLocation[c].x+"px",i.style.top=this.clusterLocation[c].y+"px";i.style.visibility="hidden",i.style.content="marker",i.classList.add("e-maps-marker-hidden")}}}this.clusterLocation=[],this.removeElement(e+"_LayerIndex_"+n+"_MarkerIndex_"+s+"_markerClusterConnectorLine")},a.prototype.removeElement=function(t){var e=document.getElementById(t);sf.base.isNullOrUndefined(e)||e.remove()},a.prototype.drawPath=function(t){var e=document.getElementById(t.id);return sf.base.isNullOrUndefined(e)&&(e=document.createElementNS("http://www.w3.org/2000/svg","path")),e.setAttribute("id",t.id),e.setAttribute("d",t.d),e.setAttribute("opacity",t.opacity.toString()),e.setAttribute("stroke",t.stroke),e.setAttribute("stroke-width",t.strokeWidth.toString()),e},a.prototype.clusterSeparate=function(t,e,i,n,s){var a=t[0].layerIndex,l=t[0].markerIndex,r=t[0].targetClusterIndex,h=t[0].dataIndex,d=(document.getElementById(n).getBoundingClientRect(),i?this.getElementId:e.querySelector.bind(e)),c=i?"":"#",p=n+"_LayerIndex_"+a+"_MarkerIndex_"+l,u=p+"_dataIndex_"+h+"_cluster_"+r,m=d(c+""+u),g=d(c+""+u+"_datalabel_"+r);m.style.visibility="hidden",g.style.visibility="hidden";var f=d(c+""+p+"_dataIndex_"+h),y=+m.getAttribute("transform").split("translate(")[1].trim().split(" ")[0],_=+m.getAttribute("transform").split("translate(")[1].trim().split(" ")[1].split(")")[0].trim(),b=30,v=6.28*b,x=0,I=Math.round(v/25);x+=I;var B=t[0].data.length,S=Math.round(25/v*100),T=(S=B<I?100/B:S)/100*360,M=B<I?45:0,O=1,k="M "+y+" "+_+" ",C="",P=[];P="g"==m.tagName?m.firstElementChild.innerHTML.split(",").map(String):m.innerHTML.split(",").map(String);for(var E=0;E<B;E++){var L=parseInt(P[E].split(":")[0]),w=parseInt(P[E].split(":")[1]),A=n+"_LayerIndex_"+a+"_MarkerIndex_"+L;if(x===E||Math.round(M)>=360){for(M=0,v=6.28*(b=30*++O),I=Math.round(v/25),S=Math.round(25/v*100);S*I<100;)I++;T=S/100*360,x+=I}var Z=y+b*Math.sin(2*Math.PI*M/360),N=_+b*Math.cos(2*Math.PI*M/360);if(C+=k+"L "+Z+" "+N+" ",f=d(c+""+A+"_dataIndex_"+w),sf.base.isNullOrUndefined(f.getAttribute("transform")))f.parentElement.id.indexOf("Template")>-1&&this.clusterLocation.push({x:parseFloat(f.style.left.replace("px","")),y:parseFloat(f.style.top.replace("px",""))});else{var R=parseFloat(f.getAttribute("transform").split("translate(")[1].trim().split(" ")[0]),H=parseFloat(f.getAttribute("transform").split("translate(")[1].trim().split(" ")[1].split(")")[0].trim());this.clusterLocation.push({x:R,y:H})}var F=this.markerSettings[a][L];-1===f.parentElement.id.indexOf("Template")?"Balloon"===F.Type?f.setAttribute("transform","translate( "+(Z-F.Width/2)+" "+(N-F.Height)+"  ) scale( "+F.Width/30+" "+F.Height/30+" ) "):f.setAttribute("transform","translate( "+Z+" "+N+")"):(f.style.left=Z+"px",f.style.top=N+"px"),f.style.visibility="visible",g.style.visibility="hidden",M+=T}var U={d:C,id:n+"_LayerIndex_"+a+"_MarkerIndex_"+l+"_dataIndex_"+h+"_markerClusterConnectorLine",stroke:sf.base.isNullOrUndefined(s.LineColor)?"#000000":s.LineColor,opacity:s.LineOpacity,strokeWidth:s.LineWidth};e=i?d(n+"_LayerIndex_"+a+"_MarkerGroup"):e;var D=o(n+"_LayerIndex_"+a+"_MarkerIndex_"+l+"_markerClusterConnectorLine");D.appendChild(this.drawPath(U)),e.insertBefore(D,e.querySelector("#"+p+"_dataIndex_0"))},a.prototype.getElementId=function(t){return document.getElementById(t)},a.prototype.shapeHighlightHandle=function(t,e,i){var n=this.options.layerHighlightSettings[i];this.handleHighlight(this.targetElementPath,"Shape",{BorderColor:n.BorderColor,BorderWidth:n.BorderWidth/this.scaleFactor,BorderOpacity:n.BorderOpacity,Enable:n.Enable,EnableMultiSelect:n.EnableMultiSelect,Fill:t,Opacity:e})},a.prototype.itemHighlightHandle=function(t,e,i,n,o){if("Bubble"===o){var s=this.options.bubbleHighlightSettings[i][n];this.handleHighlight(this.targetElementPath,"Bubble",{BorderColor:s.BorderColor,BorderWidth:s.BorderWidth,BorderOpacity:s.BorderOpacity,Enable:s.Enable,EnableMultiSelect:s.EnableMultiSelect,Fill:t,Opacity:e})}if("Marker"===o){var a=this.options.markerHighlightSettings[i][n];this.handleHighlight(this.targetElementPath,"Marker",{BorderColor:a.BorderColor,BorderWidth:a.BorderWidth,BorderOpacity:a.BorderOpacity,Enable:a.Enable,EnableMultiSelect:a.EnableMultiSelect,Fill:t,Opacity:e})}if("Navigation"===o){for(var l=this.options.navigationHighlightSettings[i][n],r=0;r<=this.navigation[i][n].Latitude.length;r++){var h=document.getElementById(this.element.id+"_LayerIndex_"+i+"_NavigationIndex_0_Line_"+r);this.handleHighlight(h,"Navigation",{BorderColor:l.BorderColor,BorderWidth:l.BorderWidth,BorderOpacity:l.BorderOpacity,Enable:l.Enable,EnableMultiSelect:l.EnableMultiSelect,Fill:t,Opacity:e})}if(""!==this.targetElementPath.getAttribute("marker-start")||""!==this.targetElementPath.getAttribute("marker-end")){var d=document.getElementById(this.targetElementPath.id+"_triangle");this.handleHighlight(d,"Arrow",{BorderColor:d.BorderColor,BorderWidth:d.BorderWidth,BorderOpacity:d.BorderOpacity,Enable:d.Enable,EnableMultiSelect:d.EnableMultiSelect,Fill:t,Opacity:e})}}},a.prototype.elementAnimate=function(t,e,i,n,o,s,a,l,r,h,d){var c=this;sf.base.isNullOrUndefined(a)&&(a=0);var p=n,u=o,m=0;new sf.base.Animation({}).animate(t,{duration:i,delay:e,progress:function(e){e.timeStamp>e.delay&&(m=(e.timeStamp-e.delay)/e.duration,t.style.visibility="visible",t.setAttribute("transform","translate( "+(p-a*m)+" "+(u-a*m)+" ) scale("+m+")"))},end:function(e){t.style.visibility="visible",t.setAttribute("transform",""),"Balloon"===l||"Balloon"===r?t.setAttribute("transform","translate( "+n+" "+o+"  ) scale( "+h/30+" "+d/30+" ) "):t.setAttribute("transform","translate( "+n+" "+o+"  )"),sf.base.isNullOrUndefined(c.dotNetRef)||c.dotNetRef.invokeMethodAsync("TriggerAnimation",t)}})},a.prototype.markerAnimation=function(t,e){for(var i=JSON.parse(e.markerData),n=0;n<i.length;n++)for(var o=0;o<i[n].MarkerAnimation.length;o++)if(i[n].MarkerAnimation[o].IsMarkerShape)for(var s=0;s<i[n].MarkerAnimation[o].DataSourceLength;s++){var a=document.getElementById(t+"_LayerIndex_"+n+"_MarkerIndex_"+o+"_dataIndex_"+s),l=sf.base.isNullOrUndefined(this.dataSource[i[n].MarkerAnimation[o].Layer][o][s][i[n].MarkerAnimation[o].ShapeValuePath])?" ":this.dataSource[i[n].MarkerAnimation[o].Layer][o][s][i[n].MarkerAnimation[o].ShapeValuePath];this.elementAnimate(a,i[n].MarkerAnimation[o].AnimationDelay,i[n].MarkerAnimation[o].AnimationDuration,a.transform.baseVal[0].matrix.e,a.transform.baseVal[0].matrix.f,null,0,i[n].MarkerAnimation[o].MarkerType,l,i[n].MarkerAnimation[o].Width,i[n].MarkerAnimation[o].Height)}},a.prototype.bubbleAnimation=function(t,e){for(var i=JSON.parse(e.bubbleData),n=0;n<i.length;n++)for(var o=0;o<i[n].MarkerAnimation.length;o++)for(var s=0;s<i[n].MarkerAnimation[o].DataSourceLength;s++){var a=document.getElementById(t+"_LayerIndex_"+n+"_BubbleIndex_"+o+"_dataIndex_"+s);sf.base.isNullOrUndefined(a)||this.elementAnimate(a,i[n].MarkerAnimation[o].AnimationDelay,i[n].MarkerAnimation[o].AnimationDuration,a.transform.baseVal[0].matrix.e,a.transform.baseVal[0].matrix.f,null,0," "," ",0,0)}},a.prototype.toolbarOpacity=function(t,e){this.removeZoomOpacity(e,t,e,t,e,t,e,t,e,t)},a.prototype.clusterMarkerProcess=function(){for(var t=!1,e=0;e<this.layerCount;e++)t||(this.mergeSeparation(),this.removeCluster(),t=!0),this.clusterMarkers(e)},a.prototype.clusterMarkers=function(t){var e=this.markerClusterCollection[t];if(e.AllowClustering){var i=void 0,n=void 0,a=this.id,l=[],r=[],h=0,d=0,c=o(a+"_LayerIndex_"+t+"_cluster"),p=3.75,u=0,m=void 0,g=void 0,f=void 0,y=[],_=void 0,b=document.getElementById(a),v=document.getElementById(a+"_LayerIndex_"+t+"_MarkerGroup");if(!sf.base.isNullOrUndefined(v)&&v.childElementCount<=0&&v.childElementCount<=0&&(v=document.getElementById(a+"_LayerIndex_"+t+"_Markers_Template_Group"),_=!0),v=sf.base.isNullOrUndefined(v)?document.getElementById(a+"_LayerIndex_"+t+"_Markers_Template_Group"):v)for(var x=0;x<v.childElementCount;x++)if(!(v.children[x].id.indexOf("markerClusterConnectorLine")>-1)){l=[];var I=parseInt(v.children[x].id.split("_MarkerIndex_")[1].split("_")[0],10),B=parseInt(v.children[x].id.split("_dataIndex_")[1].split("_")[0],10),S=("Balloon"===this.markerSettings[t][I].Type||"Image"===this.markerSettings[t][I].Type)&&sf.base.isNullOrUndefined(this.markerSettings[t][I].ShapeValuePath);if("hidden"!==v.children[x].style.visibility){var T=(g=v.children[x]).getBoundingClientRect();if(l.push(I.toString()+":"+B.toString()),null!==T){for(var M=x+1;M<v.childElementCount;M++)if("hidden"!==v.children[M].style.visibility){g=v.children[M];var O=parseInt(g.id.split("_MarkerIndex_")[1].split("_")[0],10),k=parseInt(g.id.split("_dataIndex_")[1].split("_")[0],10),C=g.getBoundingClientRect();null!==C&&(T.left>C.right||T.right<C.left||T.top>C.bottom||T.bottom<C.top||(r.push(C),v.children[M].style.visibility="hidden",v.children[M].style.content="marker",v.children[M].classList.add("e-maps-marker-hidden"),l.push(O.toString()+":"+k.toString())))}if(h=T.left+T.width/2,d=T.top+(S?T.height:T.height/2),r.length>0){var P=b.getBoundingClientRect();h=this.isTileMap?h-P.left-this.areaRect.x:h-P.left,d=this.isTileMap?d-P.top-this.areaRect.y:d-P.top;var E=parseInt(v.children[x].id.split("_dataIndex_")[1].split("_")[0],10),L=parseInt(v.children[x].id.split("_LayerIndex_")[1].split("_")[0],10);v.children[x].getAttribute("transform")?(h+=this.isTileMap?0:_?this.areaRect.x:0,d+=this.isTileMap?0:_?this.areaRect.y:0):(h=parseFloat(v.children[x].style.left.replace("px",""))+(this.isTileMap?0:_?this.areaRect.x:0),d=parseFloat(v.children[x].style.top.replace("px",""))+(this.isTileMap?0:_?this.areaRect.y:0));var w=a+"_LayerIndex_"+L+"_MarkerIndex_"+I+"_dataIndex_"+E+"_cluster_"+u,A=a+"_LayerIndex_"+L+"_MarkerIndex_"+I+"_dataIndex_"+E+"_cluster_"+u+"_datalabel_"+u;u++;var Z=void 0;switch(e.Shape){case"Circle":(Z=this.createClusterShape("circle",w,e.Fill,e.Opacity,"translate( "+h+" "+d+" )",!0,l,e)).setAttribute("r",(e.Height+e.Width)/4);break;case"Rectangle":(Z=this.createClusterShape("rect",w,e.Fill,e.Opacity,"translate( "+h+" "+d+" )",!0,l,e)).setAttribute("x",-e.Width/2),Z.setAttribute("y",-e.Height/2),Z.setAttribute("height",e.Height),Z.setAttribute("width",e.Width);break;case"Balloon":f=o(w);(Z=this.createClusterShape("path",w,e.Fill,e.Opacity,"translate( "+-e.Width/2+", "+-e.Height+" ) scale( "+e.Width/30+", "+e.Height/30+" )",!0,l,e)).classList.remove("clusterGroup"),Z.setAttribute("d","M15,0C8.8,0,3.8,5,3.8,11.2C3.8,17.5,9.4,24.4,15,30c5.6-5.6,11.2-12.5,11.2-18.8C26.2,5,21.2,0,15,0z M15,16c-2.8,0-5-2.2-5-5s2.2-5,5-5s5,2.2,5,5S17.8,16,15,16z"),f.appendChild(Z),f.style.visibility="visible",f.style.cursor="pointer",f.setAttribute("class","clusterGroup"),_&&f.classList.add("e-maps-cluster"),f.setAttribute("transform","translate( "+h+" "+d+" )");break;case"Image":var N=-(0+e.Width/2),R=-(0+e.Height/2);(Z=this.createClusterShape("image",w,null,null,"translate( "+h+" "+d+" )",!0,l,e)).setAttributeNS(null,"height",e.Height),Z.setAttributeNS(null,"width",e.Width),Z.setAttributeNS("http://www.w3.org/1999/xlink","href",e.ImageUrl),Z.setAttributeNS(null,"x",N),Z.setAttributeNS(null,"y",R);break;case"Cross":case"Diamond":case"Star":case"Triangle":case"HorizontalLine":case"VerticalLine":case"InvertedTriangle":case"Pentagon":var H;H=s(e.Shape,{height:e.Height,width:e.Width},{x:0,y:0}),(Z=this.createClusterShape("path",w,e.Fill,e.Opacity,"translate( "+h+" "+d+" )",!1,l,e)).setAttribute("d",H),"Cross"!==e.Shape&&"HorizontalLine"!==e.Shape&&"VerticalLine"!==e.Shape||(Z.setAttribute("stroke",e.Fill),Z.setAttribute("stroke-width",((e.Width+e.Height)/4).toString()))}"Balloon"!==e.Shape&&(_&&this.isTileMap||Z.setAttribute("class","clusterGroup")),_&&"Balloon"!==e.Shape&&Z.classList.add("e-maps-cluster");var F=document.createElementNS("http://www.w3.org/2000/svg","text");F.setAttribute("id",A),F.setAttribute("x","0"),F.setAttribute("y",p.toString()),F.setAttribute("fill",e.LabelColor),F.setAttribute("font-size",e.LabelSize),F.setAttribute("font-style",e.LabelFontStyle),F.setAttribute("font-family",e.LabelFontFamily),F.setAttribute("font-weight",e.LabelFontWeight),F.setAttribute("text-anchor","middle"),F.setAttribute("transform","translate( "+h+" "+d+" )"),F.setAttribute("opacity",e.LabelOpacity),F.style.visibility="visible",F.style.cursor="pointer",F.setAttribute("class","clusterGroup"),F.innerHTML=(r.length+1).toString(),_&&F.classList.add("e-maps-cluster"),c.appendChild(F),c.setAttribute("class","clusterGroup"),"Balloon"!==e.Shape?c.appendChild(Z):c.appendChild(f),v.children[x].style.visibility="hidden",v.children[x].style.content="marker",v.children[x].classList.add("e-maps-marker-hidden")}r=[]}}}if(c.childElementCount>0){var U=document.getElementById(a+"_LayerIndex_"+t);U.appendChild(c),m=document.getElementById(a+"_LayerIndex_"+t+"_MarkerGroup");for(x=0;x<c.childElementCount;x++)if("hidden"!==c.children[x].style.visibility&&null!==(i=(g=c.children[x]).getBoundingClientRect())&&!(g.id.indexOf("_datalabel_")>-1)){for(M=x+1;M<c.childElementCount;M++)if("hidden"!==c.children[M].style.visibility){var D=c.children[M];I=parseInt(D.id.split("_MarkerIndex_")[1].split("_")[0],10),B=parseInt(D.id.split("_dataIndex_")[1].split("_")[0],10);null===(n=D.getBoundingClientRect())||D.id.indexOf("_datalabel_")>-1||i.left>n.right||i.right<n.left||i.top>n.bottom||i.bottom<n.top||(y.push(D),y.push(c.children[M-1]),c.children[M].style.visibility="hidden",c.children[M-1].style.visibility="hidden",l.push(I.toString()+":"+B.toString()))}if(y.length>0){g=c.children[x];for(var z=0;z<y.length;z++)"g"===g.tagName?g.children[0].textContent=g.children[0].textContent+","+y[z].textContent:g.textContent=g.textContent+","+y[z].textContent,c.children[x-1].textContent=(+c.children[x-1].textContent+ +y[z+1].textContent).toString(),z++}y=[]}for(;0<c.children.length;)m.insertBefore(c.children[0],m.firstChild);(U=document.getElementById(a+"_LayerIndex_"+t)).appendChild(m),U.removeChild(c)}}},a.prototype.createClusterShape=function(t,e,i,n,o,s,a,l){var r=document.createElementNS("http://www.w3.org/2000/svg",t);return r.setAttribute("id",e),r.setAttribute("fill",i),r.setAttribute("stroke",l.BorderColor),r.setAttribute("stroke-width",l.BorderWidth),r.setAttribute("stroke-dasharray",l.DashArray),r.setAttribute("fill-opacity",n),r.setAttribute("stroke-opacity",l.BorderOpacity),r.setAttribute("transform",o),r.setAttribute("style","visibility:visible"),r.setAttribute("style","cursor: pointer"),s?r.setAttribute("class","clusterGroup"):r.setAttribute(null,"class","clusterGroup"),r.innerHTML=a,r},a.prototype.mergeSeparation=function(){this.markerClusterExpandCheck&&this.clusterData&&(this.mergeSeparateCluster(this.clusterData,this.id),this.markerClusterExpandCheck=!1)},a.prototype.click=function(t){if("pointerdown"!==t.type||"mouse"!==t.pointerType){var e=t.target.id,i=this.getMousePosition(t.pageX,t.pageY);e.split("_")[0];if((e.indexOf("_Left_Page_Rect")>-1||e.indexOf("_Right_Page_Rect")>-1)&&!sf.base.isNullOrUndefined(this.dotNetRef)&&this.dotNetRef.invokeMethodAsync("TriggerLegendPaging",e.indexOf("_Left_Page_Rect")>-1?1:0),e.indexOf("_Zooming_")>-1&&this.options.enableZoom){var n="pointerdown"===t.type?"click":t.type,o=1;if(this.mergeSeparation(),e.indexOf("_ZoomIn_")>-1&&(o=0===this.factorCount?this.options.factor+1:this.scaleFactor+1,this.factorCount++,this.triggerEnableZoom(o,e.split("_Zooming_ToolBar_")[1].split("_")[0],n)),e.indexOf("_ZoomOut_")>-1&&(o=0===this.factorCount?this.options.factor-1:this.scaleFactor-1,this.factorCount++,this.triggerEnableZoom(o,e.split("_Zooming_ToolBar_")[1].split("_")[0],n)),e.indexOf("_Reset_")>-1&&!sf.base.isNullOrUndefined(this.dotNetRef)){this.zoomClick=!1,this.handleToolbarSelection("_Zooming_ToolBar_Pan_Path","_Zooming_ToolBar_Zoom_Path");var s=e.split("_Zooming_ToolBar_")[1].split("_")[0];this.removeCluster(),this.dotNetRef.invokeMethodAsync("TriggerZoom",s,n)}e.indexOf("_Zoom_")>-1&&"0.3"!==document.getElementById(this.id+"_Zooming_ToolBar_Zoom_Rect").getAttribute("stroke-opacity")&&(this.zoomClick=!0,this.handleToolbarSelection("_Zooming_ToolBar_Zoom_Path","_Zooming_ToolBar_Pan_Path"),this.allowPanning=!1,this.enableSelectionZoom=!0),e.indexOf("_Pan_")>-1&&"0.3"!==document.getElementById(this.id+"_Zooming_ToolBar_Pan_Rect").getAttribute("stroke-opacity")&&(this.zoomClick=!1,this.handleToolbarSelection("_Zooming_ToolBar_Pan_Path","_Zooming_ToolBar_Zoom_Path"),this.allowPanning=!1,this.enableSelectionZoom=!1,this.isPan=!0)}if((e.indexOf("MapAreaBorder")>-1||e.indexOf("shapeIndex")>-1||e.indexOf("_Legend_")>-1||e.indexOf("BubbleIndex")>-1||e.indexOf("Zooming")>-1||e.indexOf("MapMargin")>-1||""===e)&&this.mergeSeparation(),(""===e||-1===e.indexOf(this.element.id))&&!sf.base.isNullOrUndefined(t.target.offsetParent)){var a=t.target.offsetParent.id;e=a.indexOf("_MarkerIndex_")>-1?a:e}if(e.indexOf("_LayerIndex_")>-1&&e.indexOf("_MarkerIndex_")>-1&&!sf.base.isNullOrUndefined(this.dotNetRef)){var l=parseInt(e.split("_LayerIndex_")[1].split("_")[0],10),r=parseInt(e.split("_MarkerIndex_")[1].split("_")[0],10),h=parseInt(e.split("_dataIndex_")[1].split("_")[0],10),d=document.getElementById(e),c=void 0;(e.indexOf("cluster")>-1||e.indexOf("Cluster")>-1)&&(this.mergeSeparation(),e.indexOf("_cluster_")>-1&&e.indexOf("_datalabel_")>-1&&(d=document.getElementById(e.split("_datalabel")[0])),"Balloon"===this.markerClusterCollection[l].Shape?!sf.base.isNullOrUndefined(d.firstElementChild)&&d.firstElementChild.innerHTML.length>0&&(c=d.firstElementChild.innerHTML.split(",")):!sf.base.isNullOrUndefined(d)&&d.innerHTML.length>0&&(c=d.innerHTML.split(","))),this.removeAllHighlight(),e.indexOf("markerClusterConnectorLine")>-1||this.dotNetRef.invokeMethodAsync("TriggerMarkerClick",l,r,h,e,i.x,i.y,c,e.indexOf("cluster")>-1?"cluster":"marker",this.isTouch)}if(e.indexOf("shapeIndex")>-1&&"Click"===this.options.tooltipDisplayMode&&!sf.base.isNullOrUndefined(this.dotNetRef)){l=parseInt(e.split("_LayerIndex_")[1].split("_")[0],10);var p=parseInt(e.split("_shapeIndex_")[1].split("_")[0],10);this.dotNetRef.invokeMethodAsync("TriggerShapeTooltip",e,i.x,i.y,l,p,"Shape",0)}if(e.indexOf("_LayerIndex_")>-1&&e.indexOf("BubbleIndex")>-1&&!sf.base.isNullOrUndefined(this.dotNetRef)){l=parseInt(e.split("_LayerIndex_")[1].split("_")[0],10),r=parseInt(e.split("_BubbleIndex_")[1].split("_")[0],10),h=parseInt(e.split("_dataIndex_")[1].split("_")[0],10),d=document.getElementById(e);this.dotNetRef.invokeMethodAsync("TriggerBubbleClick",l,r,h,e,i.x,i.y)}e.indexOf("_Legend_")>-1&&!sf.base.isNullOrUndefined(this.dotNetRef)&&(this.removeAllHighlight(),this.dotNetRef.invokeMethodAsync("TriggerLegendClick",parseInt(e.split("_Index_")[1].split("_")[0],10))),-1!==e.indexOf("_shapeIndex_")||-1!==e.indexOf("_MarkerIndex_")||-1!==e.indexOf("_BubbleIndex_")||"Click"!==this.options.tooltipDisplayMode||sf.base.isNullOrUndefined(this.dotNetRef)||this.dotNetRef.invokeMethodAsync("TriggerShapeTooltip","",i.x,i.y,0,0,"",0)}},a.prototype.handleToolbarSelection=function(t,e){var i=document.getElementById(this.element.id+t);i&&(i.setAttribute("stroke",this.toolbarSelection),i.setAttribute("fill",this.toolbarSelection));var n=document.getElementById(this.element.id+e);n&&(n.setAttribute("stroke",this.toolbarColor),n.setAttribute("fill",this.toolbarColor))},a.prototype.removeCluster=function(){var t=document.querySelectorAll('[class="clusterGroup"]');if(t.length>0)for(var e=0;e<t.length;e++)document.getElementById(t[e].id).remove();else if((t=document.querySelectorAll('[class="clusterGroup e-maps-cluster"]')).length>0)for(var i=0;i<t.length;i++)document.getElementById(t[i].id).remove();for(var n=document.querySelectorAll('[class="e-maps-marker-hidden"]'),o=0;o<n.length;o++){var s=document.getElementById(n[o].id);s.style.visibility="visible",s.classList.remove("e-maps-marker-hidden")}},a.prototype.createImageUrl=function(t,e){var i='<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">'+t.outerHTML+"</svg>";return window.URL.createObjectURL(new Blob("SVG"===e?[i]:[(new XMLSerializer).serializeToString(t)],{type:"image/svg+xml"}))},a.prototype.imageExport=function(i,n,o){return t(this,void 0,void 0,(function(){var t;return e(this,(function(e){return t=this,[2,new Promise((function(e,s){var a=document.createElement("canvas"),l=t.element.getBoundingClientRect();a.width=l.width,a.height=l.height;var r=document.getElementById(t.element.id+"_svg"),h=t.createImageUrl(r,i),d=document.getElementById(t.element.id+"_animated_tiles").children.length,c=a.getContext("2d"),p=document.getElementById(t.element.id+"_Map_title"),u=document.getElementById(t.element.id+"_MapBorder");sf.base.isNullOrUndefined(u)||(c.fillStyle=document.getElementById(t.element.id+"_MapBorder").getAttribute("fill"),c.fillStyle="transparent"===c.fillStyle?"#ffffff":c.fillStyle,c.fillStyle=t.options.background?t.options.background:"#ffffff"),sf.base.isNullOrUndefined(p)||(c.font=p.getAttribute("font-size")+" Arial",c.fillStyle=p.getAttribute("fill"),c.fillText(p.textContent,parseFloat(p.getAttribute("x")),parseFloat(p.getAttribute("y")))),c.save();var m=document.getElementById(t.element.id+"_Tile_SVG_Parent");c.rect(parseFloat(m.style.left),parseFloat(m.style.top),parseFloat(m.style.width),parseFloat(m.style.height)),c.clip(),c.fillRect(0,0,l.width,l.height),t.exportedCount=0;for(var g=[],f=0;f<d;f++){var y=document.getElementById(t.element.id+"tile"+f),_=new Image;_.crossOrigin="Anonymous",g.push(t.renderImages(a,y,c,_,d,i,n,h,t,o)),_.src=y.children[0].getAttribute("src")}Promise.all(g).then((function(t){for(var i=0;i<t.length;i++)if(null!=t[i]){e(t[i]);break}}))}))]}))}))},a.prototype.renderImages=function(t,e,i,n,o,s,a,l,r,h){return new Promise((function(d,c){n.onload=function(){r.exportedCount++,i.setTransform(1,0,0,1,parseFloat(e.style.left)+10,parseFloat(e.style.top)+parseFloat(document.getElementById(r.element.id+"_tile_parent").style.top));if(i.drawImage(n,0,0,257,257),r.exportedCount===o){var c=document.getElementById(r.element.id+"_Tile_SVG_Parent");l=r.createImageUrl(c.children[0],s);var p=new Image;p.onload=function(){if(i.setTransform(1,0,0,1,parseFloat(c.style.left),parseFloat(c.style.top)),i.drawImage(p,0,0),h)r.triggerDownload(s,a,t.toDataURL("image/png").replace("image/png","image/octet-stream")),d(null);else{var e="JPEG"===s?t.toDataURL("image/jpeg"):"PNG"===s?t.toDataURL("image/png"):"";d(e)}},p.src=l}else d(null)}}))},a.prototype.triggerDownload=function(t,e,i){var n=document.createElement("a");n.download=e+"."+t.toLocaleLowerCase(),n.href=i,n.click()},a.prototype.getMousePosition=function(t,e){var i=this.element.getBoundingClientRect(),o=this.element.ownerDocument.defaultView.pageXOffset,s=this.element.ownerDocument.defaultView.pageYOffset,a=this.element.ownerDocument.documentElement.clientTop,l=this.element.ownerDocument.documentElement.clientLeft,r=i.left+o-l,h=i.top+s-a;return new n(t-r,e-h)},a.prototype.getBound=function(t){var e=document.getElementById(t);return{x:e.offsetLeft,y:e.offsetTop}},a.prototype.createToolbarStyle=function(t,e){var i=document.getElementById(this.element.id+"_Zooming_ToolBar_Zoom_Path");sf.base.isNullOrUndefined(i)||i.setAttribute("stroke",this.toolbarColor),this.enableSelectionZoom||(this.zoomClick=!1);var n=document.getElementById(this.element+"_zoomToolbar_style");n&&n.parentNode.removeChild(n);var o=".e-maps-toolbar:hover { opacity:1; } .e-maps-toolbar:hover > circle { stroke:"+t+"; } .e-maps-toolbar:hover > path { fill: "+t+" ;  stroke: "+t+"; }.e-maps-toolbar:hover { cursor: pointer; } .e-maps-cursor-disable:hover { cursor: not-allowed; } .e-maps-panning:hover { cursor: pointer; } .e-maps-popup-close { display: block; opacity: 0; }",s=document.createElement("style");s.id=this.element+"_zoomToolbar_style",s.appendChild(document.createTextNode(o)),e.appendChild(s)},a.prototype.render=function(){this.wireEvents()},a}();return{getMarker:function(t,e,i){var n=window.sfBlazor.getCompInstance(i);n&&n.element&&n.clusterExpand(t,e)},markerCluster:function(t){var e=window.sfBlazor.getCompInstance(t);e&&e.element&&e.clusterMarkerProcess()},clusterSeperation:function(t){var e=window.sfBlazor.getCompInstance(t);e&&e.element&&e.mergeSeparation()},itemHighlight:function(t,e,i,n,o,s){var a=window.sfBlazor.getCompInstance(s);a&&a.element&&a.itemHighlightHandle(t,e,i,n,o)},shapeHighlight:function(t,e,i,n){var o=window.sfBlazor.getCompInstance(n);o&&o.element&&o.shapeHighlightHandle(t,e,i)},panDirection:function(t,e,i,n,o,s){var a=window.sfBlazor.getCompInstance(s);if(a&&a.element){var l=document.getElementById(a.element.id+"_animated_tiles");a.isTileMap&&!sf.base.isNullOrUndefined(l)&&(a.currentTiles=l.cloneNode(!0)),a.panning(t,e,i,n,o,!1),sf.base.isNullOrUndefined(a.dotNetRef)||a.dotNetRef.invokeMethodAsync("UpdateTranslatePoint",a.isTileMap?a.translatePoint:a.shapeTranslatePoint,a.tileTranslatePoint,a.scaleFactor,!1)}},initialize:function(t,e,i){return new a(t.id,t,e,i).render(),this.getElementSize(t.id)},updateInstance:function(t,e){var i=window.sfBlazor.getCompInstance(t);i&&i.element&&(i.dataSource=e.dataSource?JSON.parse(e.dataSource):null,i.options.layerHighlightSettings=JSON.parse(e.layerHighlightSettings),i.options.markerHighlightSettings=JSON.parse(e.markerHighlightSettings),i.options.bubbleHighlightSettings=JSON.parse(e.bubbleHighlightSettings),i.options.navigationHighlightSettings=JSON.parse(e.navigationHighlightSettings),i.options.selectionSettings=JSON.parse(e.selectionSettings))},getElementSize:function(t){var e,i,n,o,s=document.getElementById(t);if(null!==s){var a=s.getBoundingClientRect();e=a.width,i=a.height,n=a.x,o=a.y}return{width:e,height:i,isIE:sf.base.Browser.isIE,x:n,y:o}},getElementBounds:function(t){var e=document.getElementById(t);if(e){var i=e.getBoundingClientRect();return{width:i.width,height:i.height,top:i.top,bottom:i.bottom,left:i.left,right:i.right}}return null},getBound:function(t){var e=document.getElementById(t);return{x:e.offsetLeft,y:e.offsetTop}},getBoundData:function(t){var e=document.getElementById(t);return{x:e.getBoundingClientRect().x,y:e.getBoundingClientRect().y}},getTileZoom:function(i,n,o,s,a,l,r){return t(this,void 0,void 0,(function(){var t,h,d,c,p,u,m,g,f,y,_;return e(this,(function(e){switch(e.label){case 0:t=document.getElementById(i+"_animated_tiles"),h=parseInt(t.className,10),t.children[r].setAttribute("style","top:"+o+"; height:"+a+";width:"+l+"; left:"+n+"; position:absolute;"),t.children[r].innerHTML="",(d=document.createElement("img")).src=s,t.children[r].appendChild(d),c=document.getElementById(i+"_LayerCollections"),p=0,e.label=1;case 1:if(!(p<c.children.length))return[3,8];u=0,e.label=2;case 2:if(!(u<c.children[p].childElementCount))return[3,7];if(!(c.children[p].children[u].id.indexOf("MarkerGroup")>-1))return[3,6];m=0,e.label=3;case 3:return m<c.children[p].children[u].childElementCount?(g=parseInt(c.children[p].children[u].children[m].id.split("_LayerIndex_")[1].split("_")[0],10),f=parseInt(c.children[p].children[u].children[m].id.split("_MarkerIndex_")[1].split("_")[0],10),y=parseInt(c.children[p].children[u].children[m].id.split("_dataIndex_")[1].split("_")[0],10),[4,this.dotNetRef.invokeMethodAsync("ZoomMarker",g,f,y,0,0,h)]):[3,6];case 4:_=e.sent(),c.children[p].children[u].children[m].setAttribute("transform","translate("+_[0]+","+_[1]+")"),e.label=5;case 5:return m++,[3,3];case 6:return u++,[3,2];case 7:return p++,[3,1];case 8:return[2,r]}}))}))},getLayer:function(t){var e=document.getElementById(t+"_LayerCollections").getBoundingClientRect();return{Bottom:e.bottom,Height:e.height,Left:e.left,Right:e.right,Top:e.top,Width:e.width,X:e.x,Y:e.y}},getElement:function(t){var e=document.getElementById(t).getBoundingClientRect();return{Bottom:e.bottom,Height:e.height,Left:e.left,Right:e.right,Top:e.top,Width:e.width,X:e.x,Y:e.y}},getSvg:function(t){var e=document.getElementById(t+"_svg").getBoundingClientRect();return{Bottom:e.bottom,Height:e.height,Left:e.left,Right:e.right,Top:e.top,Width:e.width,X:e.x,Y:e.y}},updateTileTranslatePoint:function(t,e,i,n,o,s,a,l,r,h){var d=window.sfBlazor.getCompInstance(h);d&&d.element&&(d.tileTranslatePoint={x:t.x,y:t.y},d.translatePoint={x:e.x,y:e.y},d.areaRect={x:i,y:n,width:o,height:s},d.marginLeft=a,d.marginTop=l,d.tileZoomLevel=d.options.factor=d.scaleFactor=r,(r===d.options.maxZoom||r>1||1===r)&&""===d.previousId&&(d.toolbarOpacity(d.toolbarButtonOpacity,d.toolbarShapeOpacity),r===d.options.maxZoom&&document.getElementById(d.id+"_Zooming_ToolBar_Zoom_Rect")&&(document.getElementById(d.id+"_Zooming_ToolBar_Zoom_Path").setAttribute("fill",d.toolbarColor),document.getElementById(d.id+"_Zooming_ToolBar_Zoom_Path").setAttribute("stroke",d.toolbarColor),d.isPan=!1)),d.isTileMap&&d.previousId.indexOf("_Reset_")>-1&&(d.options.enablePanning||document.getElementById(d.id+"_Zooming_ToolBar_Pan_Rect")&&(document.getElementById(d.id+"_Zooming_ToolBar_Pan_Path").setAttribute("fill",d.toolbarColor),document.getElementById(d.id+"_Zooming_ToolBar_Pan_Path").setAttribute("stroke",d.toolbarColor)),d.enableSelectionZoom=!d.enableSelectionZoom&&d.enableSelectionZoom),d.isPan=!!(d.previousId.indexOf("_Reset_")>-1&&d.options.enablePanning)||d.isPan)},updateTranslatePoint:function(t,e,i,n,o,s,a,l,r){var h=window.sfBlazor.getCompInstance(r);h&&h.element&&(h.shapeTranslatePoint=t,h.areaRect={x:e,y:i,width:n,height:o},h.marginLeft=s,h.marginTop=a,h.options.factor=h.scaleFactor=l,h.previousId.indexOf("_Reset_")>-1&&document.getElementById(h.id+"_Zooming_ToolBar_Pan_Rect")&&(1===h.options.minZoom&&(document.getElementById(h.id+"_Zooming_ToolBar_Pan_Path").setAttribute("fill",h.toolbarColor),document.getElementById(h.id+"_Zooming_ToolBar_Pan_Path").setAttribute("stroke",h.toolbarColor)),h.enableSelectionZoom=!1,h.isPan=!0),l===h.options.maxZoom&&h.enableSelectionZoom&&(h.isPan=!1),(l===h.options.maxZoom||l>1||1===l)&&""===h.previousId&&(h.toolbarOpacity(h.toolbarButtonOpacity,h.toolbarShapeOpacity),l===h.options.maxZoom&&document.getElementById(h.id+"_Zooming_ToolBar_Zoom_Rect")&&(document.getElementById(h.id+"_Zooming_ToolBar_Zoom_Path").setAttribute("fill",h.toolbarColor),document.getElementById(h.id+"_Zooming_ToolBar_Zoom_Path").setAttribute("stroke",h.toolbarColor))))},updateZoomSettings:function(t,e){var i=window.sfBlazor.getCompInstance(t);i&&i.element&&(i.options.enableZoom=e.enable,i.options.zoomOnClick=e.zoomOnClick,i.options.doubleClickZoom=e.doubleClickZoom,i.options.enablePanning=e.enablePanning,i.options.enablePinchZooming=e.pinchZooming,i.options.enableSelectionZooming=e.enableSelectionZooming,i.options.enableMouseWheelZoom=e.mouseWheelZoom)},updateCollection:function(t,e){var i=window.sfBlazor.getCompInstance(t);i&&i.element&&(i.bubbleCollection=JSON.parse(e.bubble),i.labelCollection=JSON.parse(e.dataLabel),i.dataLabelTemplateCollection=JSON.parse(e.dataLabelTemplate),i.markerSettings=JSON.parse(e.markerSettings),i.navigation=JSON.parse(e.navigationLine),i.markerClusterCollection=JSON.parse(e.markerCluster),i.baseMapBounds={latitudeMax:e.latitudeMax,latitudeMin:e.latitudeMin,longitudeMax:e.longitudeMax,longitudeMin:e.longitudeMin,minBounds:e.minBounds,maxBounds:e.maxBounds,availableSize:e.availableSize},i.isTileMap=e.isTileMap,i.legendSettings=JSON.parse(e.legendSettings),i.legendDetails=null!=e.legendDetails?JSON.parse(e.legendDetails):null,i.urlTemplate=e.urlTemplate,i.key=e.key,i.dataSource=JSON.parse(e.markerDataSource),i.toolbarSelection=e.toolbarSelection,i.toolbarColor=e.toolbarColor,i.mapsBorderWidth=e.mapsBorder,i.toolbarButtonOpacity=e.toolbarButtonOpacity,i.toolbarShapeOpacity=e.toolbarShapeOpacity,i.removeAllHighlight())},updateLayerHighlight:function(t,e,i,n){var o=window.sfBlazor.getCompInstance(n);o&&o.element&&(i?(o.options.layerHighlightSettings[t].BorderColor=e.borderColor,o.options.layerHighlightSettings[t].BorderWidth=e.borderWidth,o.options.layerHighlightSettings[t].BorderOpacity=e.borderOpacity):(o.options.layerHighlightSettings[t].Fill=e.fill,o.options.layerHighlightSettings[t].Opacity=e.opacity,o.options.layerHighlightSettings[t].Enable=e.enable))},updateMarkerHighlight:function(t,e,i,n,o){var s=window.sfBlazor.getCompInstance(o);s&&s.element&&(n?(s.options.markerHighlightSettings[t][e].BorderColor=i.borderColor,s.options.markerHighlightSettings[t][e].BorderWidth=i.borderWidth,s.options.markerHighlightSettings[t][e].BorderOpacity=i.borderOpacity):(s.options.markerHighlightSettings[t][e].Fill=i.fill,s.options.markerHighlightSettings[t][e].Opacity=i.opacity,s.options.markerHighlightSettings[t][e].Enable=i.enable))},updateBubbleHighlight:function(t,e,i,n,o){var s=window.sfBlazor.getCompInstance(o);s&&s.element&&(n?(s.options.bubbleHighlightSettings[t][e].BorderColor=i.borderColor,s.options.bubbleHighlightSettings[t][e].BorderWidth=i.borderWidth,s.options.bubbleHighlightSettings[t][e].BorderOpacity=i.borderOpacity):(s.options.bubbleHighlightSettings[t][e].Fill=i.fill,s.options.bubbleHighlightSettings[t][e].Opacity=i.opacity,s.options.bubbleHighlightSettings[t][e].Enable=i.enable))},updateTooltipDisplayMode:function(t,e){var i=window.sfBlazor.getCompInstance(t);i&&i.element&&(i.options.tooltipDisplayMode=e)},updateNavigationHighlight:function(t,e,i,n,o){var s=window.sfBlazor.getCompInstance(o);s&&s.element&&(n?(s.options.navigationHighlightSettings[t][e].BorderColor=i.borderColor,s.options.navigationHighlightSettings[t][e].BorderWidth=i.borderWidth,s.options.navigationHighlightSettings[t][e].BorderOpacity=i.borderOpacity):(s.options.navigationHighlightSettings[t][e].Fill=i.fill,s.options.navigationHighlightSettings[t][e].Opacity=i.opacity,s.options.navigationHighlightSettings[t][e].Enable=i.enable))},exportToImage:function(i,n,o,s){return t(this,void 0,void 0,(function(){var a,l,r=this;return e(this,(function(h){switch(h.label){case 0:return(l=window.sfBlazor.getCompInstance(s))&&l.element?[4,l.imageExport(i,n,o)]:[3,2];case 1:a=h.sent(),h.label=2;case 2:return a instanceof Promise?[4,a.then((function(i){return t(r,void 0,void 0,(function(){return e(this,(function(t){return[2,i]}))}))}))]:[3,4];case 3:return h.sent(),[3,5];case 4:return[2,a];case 5:return[2]}}))}))},getLegendRect:function(t,e){var i=document.getElementById(t).getBoundingClientRect(),n=t.split("_Legend_")[0],o=document.getElementById(n).getBoundingClientRect();return{x:i.left-o.left,y:i.top-o.top,width:i.width,height:i.height}},markerAnimation:function(t,e){var i=window.sfBlazor.getCompInstance(t);i&&i.element&&i.markerAnimation(t,e)},layerAnimation:function(t,e,i,n,o,s){var a=window.sfBlazor.getCompInstance(t);if(a&&a.element)for(var l=document.getElementById(t+"_LayerIndex_0"),r=0;r<l.children.length;r++)null!==l.children[r].getAttribute("transform")&&this.zoomAnimation(l.children[r],0,s,n,o,e,i,a)},slope:function(t,e){return t.x===e.x?null:(e.y-t.y)/(e.x-t.x)},interception:function(t,e){return null===e?t.x:t.y-e*t.x},zoomAnimation:function(t,e,i,n,o,s,a,l){var r=0,h={x:n.x,y:n.y},d=o-a,c={x:0,y:0},p=1;if(o!==a){var u=this.slope(s,h),m=this.interception(s,u),g=h.x-s.x,f=h.y-s.y;t.style.removeProperty("visibility"),this.animate(t,i,(function(t){t.timeStamp>t.delay&&(r=(t.timeStamp-t.delay)/t.duration,p=a+r*d,c.x=s.x+r*g/(p/o),sf.base.isNullOrUndefined(u)?c.y=s.y+r*f:c.y=u*c.x+m,l.applyTransform(p,c))}),(function(e){l.applyTransform(o,h),this.markerCluster(l.id),sf.base.isNullOrUndefined(this.dotNetRef)||this.dotNetRef.invokeMethodAsync("TriggerAnimation",t)}))}else t.setAttribute("transform","scale( "+o+" ) translate( "+h.x+" "+h.y+" )")},bubbleAnimation:function(t,e){var i=window.sfBlazor.getCompInstance(t);i&&i.element&&i.bubbleAnimation(t,e)},animate:function(t,e,i,n){var o,s=this,a=null;o=window.requestAnimationFrame((function l(r){a||(a=r);var h=r-a;h<e?(i.call(s,{element:t,delay:0,timeStamp:h,duration:e}),window.requestAnimationFrame(l)):(window.cancelAnimationFrame(o),n.call(s,{element:t}),t.setAttribute("style","visibility:visible"))}))},getToolbarAlign:function(t,e){var i=e.verticalAlignment,n=e.horizontalAlignment,o=document.getElementById(t+"_Zooming_KitCollection").getBoundingClientRect(),s=0,a=0;switch(i){case 0:a=e.y;break;case 1:a=e.height/2-o.height/2+e.mapsBorder;break;case 2:a=e.height-o.height+e.mapsBorder-2*e.buttonPadding}switch(n){case 0:s=e.x;break;case 1:s=e.width/2-o.width/2+e.mapsBorder;break;case 2:s=e.width-o.width-2*e.buttonPadding+e.mapsBorder}var l=document.getElementById(t+"_ToolBar");l.style.left=s+"px",l.style.top=a+"px",l.style.visibility="visible";var r=e.color,h=window.sfBlazor.getCompInstance(t);h&&h.element&&h.createToolbarStyle(r,l)},getTemplate:function(t,e,i,n,o,s,a,l){for(var r=t[0],h=Object.keys(r),d=e,c=0;c<h.length;c++)"latitude"!==h[c].toLowerCase()&&"longitude"!==h[c].toLowerCase()&&(d=d.replace(new RegExp("{{:"+h[c]+"}}","g"),r[h[c].toString()]));var p=document.createElementNS("http://www.w3.org/2000/svg","div");p.setAttribute("id",o),p.style.position="absolute",p.style.transform="translate(-50 %, -50 %)",p.style.left=n.toString(),p.style.top=i.toString(),p.innerHTML=d.toString();var u=document.getElementById(l+"_LayerIndex_0_Markers_Template_Group");u.appendChild(p);var m=document.getElementById(l+"_Secondary_Element");return m.appendChild(u),document.getElementById(l).appendChild(m),d},dispose:function(t){var e=window.sfBlazor.getCompInstance(t);sf.base.isNullOrUndefined(e)||e.destroy()}}}()}}]);(async()=>{await import(`${document.baseURI}_content/Syncfusion.Blazor/scripts/syncfusion-blazor-base.min.js?v=20.4.38`).then(()=>{sfBlazor.loadDependencies('sfmaps');})})();