(window.webpackJsonp=window.webpackJsonp||[]).push([[52],{"./bundles/sf-pivotview.js":function(e,t,o){"use strict";o.r(t);o("./modules/sf-pivotview.js")},"./modules/sf-pivotview.js":function(e,t){window.sfBlazor=window.sfBlazor||{},window.sfBlazor.PivotView=function(){"use strict";var e="e-icons",t="e-group-row",o="e-headercell",r="e-format",i="e-pivot-formula",s="e-remove-report",l="e-pivot-toolbar",n="e-list-icon",a="e-hover",c="e-popup",d="e-popup-open",u="e-rowsheader",p="e-columnsheader",h="e-cellselectionbackground",f="e-selectionbackground",m="e-table",g="e-dlg-closeicon-btn.e-icon-btn",v=function(){function e(e){this.parent=e,this.parent.pivotButtonModule=this}return e.prototype.createPivotButtonDrop=function(){for(var e=0,t=[].slice.call(this.parent.parentElement.querySelectorAll(".e-axis-content"));e<t.length;e++){var o=t[e];new sf.base.Droppable(o,{}),this.unWireEvents(o),this.wireEvents(o)}},e.prototype.setPivotButtonDrag=function(){for(var e=0,t=[].slice.call(this.parent.parentElement.querySelectorAll("."+(this.parent instanceof I?"e-grouping-bar":"e-pivotfieldlist")+"-button"));e<t.length;e++){var o=t[e],r=!!sf.base.closest(o,".e-group-all-fields"),i=o.querySelector(".e-pivot-button");this.parent.pivotButtonModule.createDraggable(r,this.parent instanceof I?i.querySelector(".e-content"):i.firstElementChild,r?this.parent.commonActionModule.getFieldInfo(i.getAttribute("data-uid")).fieldItem:JSON.parse(i.getAttribute("data-fieldInfo")))}},e.prototype.createDraggable=function(e,t,o){var r=this;this.draggable=new sf.base.Draggable(t,{clone:!0,enableTailMode:!0,enableAutoScroll:!1,helper:this.createDragClone.bind(this,o,e),dragStart:this.onDragStart.bind(this,e),drag:function(e){r.draggable.setProperties({cursorAt:{top:!sf.base.isNullOrUndefined(e.event.targetTouches)||sf.base.Browser.isDevice?60:-20}})},dragStop:this.onDragStop.bind(this,e),abort:this.parent instanceof I?this.parent.groupingBarSettings.allowDragAndDrop&&o.allowDragAndDrop?"":".e-pivot-button":o.allowDragAndDrop?"":".e-pivot-button"}),e||(this.unWireEvents(this.parent instanceof I?sf.base.closest(t,".e-grouping-bar-button"):t),this.wireEvents(this.parent instanceof I?sf.base.closest(t,".e-grouping-bar-button"):t))},e.prototype.createDragClone=function(e,t,o){var r=t?null:sf.base.closest(o.element,".e-pivot-button");e=r?JSON.parse(r.getAttribute("data-fieldInfo")):e;var i=sf.base.createElement("div",{id:this.parent.element.id+"_DragClone",className:"e-button-drag-clone"}),s=sf.base.createElement("span",{className:"e-text-content",innerHTML:e?e.caption?e.caption:e.name:""});return i.appendChild(s),document.body.appendChild(i),i},e.prototype.onDragStart=function(e,t){var o=this,r=sf.base.closest(t.element,"."+(e?this.parent instanceof I?"e-pivot-button":"e-list-item":"e-pivot-button"));this.parent.dotNetRef.invokeMethodAsync("TriggerNodeDraggingEvent",r.getAttribute("data-uid")).then((function(i){if(i.cancel)o.parent.isDragging=!1,o.draggable.intDestroy(t.event),sf.base.detach(document.getElementById(o.parent.element.id+"_DragClone"));else{o.parent.isDragging=!0;var s=o.parent.fieldList[r.getAttribute("data-uid")],l=["e-rows","e-columns","e-filters"];if(sf.base.addClass([e?o.parent instanceof I?r:r.querySelector(".e-list-text"):r],"e-list-selected"),s&&"CalculatedField"===s.aggregateType)for(var n=0,a=l;n<a.length;n++){var c=a[n];sf.base.addClass([o.parent.parentElement.querySelector("."+c)],"e-drag-restrict")}if(document.getElementById(o.parent.element.id+"_DragClone")){var d=sf.popups.getZindexPartial(r);document.getElementById(o.parent.element.id+"_DragClone").style.zIndex=d?d.toString():"100000"}t.bindEvents(t.dragElement)}}))},e.prototype.onDragStop=function(e,t){this.parent.isDragging=!1;var o=!1;t.target&&t.element&&sf.base.closest(t.element,".e-group-all-fields")&&!sf.base.closest(t.target,".e-droppable")&&(o=!0);var r=sf.base.closest(t.element,"."+(e?this.parent instanceof I?"e-pivot-button":"e-list-item":"e-pivot-button"));this.parent.parentElement.querySelector(".e-list-selected")&&sf.base.removeClass([].slice.call(this.parent.parentElement.querySelectorAll(".e-list-selected")),"e-list-selected");for(var i=0,s=["e-rows","e-columns","e-filters"];i<s.length;i++){var l=s[i];sf.base.removeClass([this.parent.parentElement.querySelector("."+l)],"e-drag-restrict")}sf.base.removeClass([e?this.parent instanceof I?r:r.querySelector(".e-list-text"):r],"e-list-selected"),document.getElementById(this.parent.element.id+"_DragClone")&&sf.base.remove(t.helper?t.helper:document.getElementById(this.parent.element.id+"_DragClone")),document.body.style.cursor="auto",!this.isNodeDropped(e,t,r)||!e&&o||this.nodeStateModified(e,t,o,r.getAttribute("data-uid"))},e.prototype.nodeStateModified=function(e,t,o,r){var i=sf.base.closest(t.target,".e-droppable")?JSON.stringify(sf.base.closest(t.target,".e-droppable").className.split(" ")):void 0,s=e||!t.element.parentElement?void 0:JSON.stringify({isvalue:t.element.parentElement.getAttribute("isvalue")});this.parent.dotNetRef.invokeMethodAsync("OnFieldDropped",window.sfBlazor.getDomObject("target",t.target).xPath,i,s,!(!e&&!o),r)},e.prototype.isNodeDropped=function(e,t,o){var r=!0,i=o.getAttribute("data-uid");if(this.parent.fieldList[i]&&this.parent.fieldList[i].isSelected||!e){var s=e?this.getButton(i):o,l=sf.base.closest(s,".e-droppable"),n=sf.base.closest(t.target,".e-droppable");if(s&&l&&l===n){for(var a=[].slice.call(l.querySelectorAll(".e-pivot-button")),c=sf.base.closest(t.target,".e-pvt-btn-div"),d=void 0,u=-1,p=0;p<a.length;p++)if(a[p].id===s.id&&(d=p),c){var h=c.querySelector(".e-pivot-button");a[p].id===h.id&&(u=p)}(d===u||d===a.length-1&&-1===u)&&(sf.base.removeClass([].slice.call(this.parent.parentElement.querySelectorAll(".e-drop-indicator")),"e-drop-hover"),r=!1)}}return r},e.prototype.getButton=function(e){for(var t=0,o=[].slice.call(this.parent.parentElement.querySelectorAll(".e-pivot-button"));t<o.length;t++){var r=o[t];if(r.id===e)return r}},e.prototype.getButtonPosition=function(e,t){var o=sf.base.closest(e,".e-pvt-btn-div");if(o){o=o.querySelector(".e-pivot-button");for(var r=this.parent instanceof I?this.parent.parentElement.querySelector(".e-chart-grouping-bar"):void 0,i=[].slice.call((r&&"Chart"===this.parent.currentView?r:this.parent.parentElement).querySelector(".e-"+t).querySelectorAll(".e-pivot-button")),s=0,l=i.length;s<l;s++)if(i[s].id===o.id)return s}return-1},e.prototype.wireEvents=function(e){sf.base.EventHandler.add(e,"mouseover",this.parent.commonActionModule.updateDropIndicator,this),sf.base.EventHandler.add(e,"mouseleave",this.parent.commonActionModule.updateDropIndicator,this)},e.prototype.unWireEvents=function(e){sf.base.EventHandler.remove(e,"mouseover",this.parent.commonActionModule.updateDropIndicator),sf.base.EventHandler.remove(e,"mouseleave",this.parent.commonActionModule.updateDropIndicator)},e.prototype.destroy=function(){for(var e=0,t=[].slice.call(this.parent.parentElement.querySelectorAll(".e-axis-content"));e<t.length;e++){var o=t[e];this.unWireEvents(o)}this.draggable&&this.draggable.isDestroyed&&this.draggable.destroy()},e}(),y=function(){function e(e){this.parent=e,this.parent.groupingBarModule=this,this.parent.pivotButtonModule=new v(this.parent)}return e.prototype.updatePivotButtons=function(){this.createPivotButtonDrop(),this.parent.pivotButtonModule.setPivotButtonDrag()},e.prototype.createPivotButtonDrop=function(){for(var e=0,t=[].slice.call(this.parent.element.querySelectorAll(".e-axis-container"));e<t.length;e++){var o=t[e].firstElementChild;this.parent.groupingBarSettings.allowDragAndDrop&&new sf.base.Droppable(o,{}),this.unWireEvent(o),this.wireEvent(o)}},e.prototype.refreshUI=function(){var e=this.parent.element.querySelector(".e-pivot-grouping-bar");if(e){e.style.minWidth="400px";var r=e.querySelector(".e-group-rows"),i=e.querySelector(".e-group-values"),s=e.querySelector(".e-group-columns"),l=e.querySelector(".e-group-filters"),n=e.querySelector(".e-left-axis-fields"),a=e.querySelector(".e-right-axis-fields");e.style.width=sf.base.select("#"+this.parent.element.id+"_grid",this.parent.element).offsetWidth+"px";var c=this.parent.element.querySelector(".e-frozenheader").querySelector("colgroup").children[0],d=e.offsetWidth-parseInt(c.style.width,10)+"px";if(n.style.minWidth=c.style.width,i.style.width=c.style.width,a.style.width=d,sf.base.select("#"+this.parent.element.id+"_grid",this.parent.element)){var u=this.parent.element.querySelector(".e-frozenheader").querySelector(".e-columnheader");u.querySelector("."+o).classList.add(t),u.style.height=u.querySelector(".e-rhandler").style.height="auto",sf.base.select("#"+this.parent.element.id+"_grid",this.parent.element).querySelector(".e-group-rows")&&u.querySelector(".e-axis-row")?r?(r.style.height=this.parent.element.querySelector(".e-headercontent").offsetHeight+"px",sf.base.remove(u.querySelector(".e-axis-row")),u.querySelector("."+t).appendChild(e.querySelector(".e-axis-row"))):(r=sf.base.select("#"+this.parent.element.id+"_grid",this.parent.element).querySelector(".e-group-rows")).style.height="auto":(r.style.height=this.parent.element.querySelector(".e-headercontent").offsetHeight+"px",u.querySelector("."+t).appendChild(e.querySelector(".e-axis-row"))),u.querySelector("."+t).querySelector(".e-headercelldiv").style.display="none",u.querySelector("."+t).querySelector(".e-sortfilterdiv").style.display="none";for(var p=[].slice.call(this.parent.element.querySelector(".e-movableheader").querySelector("thead").querySelectorAll("tr")).filter((function(e){return e.childNodes.length>0})),h=0,f=p;h<f.length;h++){var m=f[h];sf.base.setStyleAttribute(m,{height:"auto"})}var g=this.parent.element.querySelector(".e-headercontent").offsetHeight;r.style.height=g+"px",s.style.height=l.style.height="auto";var v=i.offsetHeight/2;v>s.offsetHeight&&(sf.base.setStyleAttribute(l,{height:sf.base.formatUnit(v)}),sf.base.setStyleAttribute(s,{height:sf.base.formatUnit(v+2)})),this.parent.element.querySelector(".e-frozenheader").querySelector(".e-rhandler")&&(u.style.height=this.parent.element.querySelector(".e-frozenheader").querySelector(".e-rhandler").style.height=g+"px");for(var y=g/p.length,b=0,S=p;b<S.length;b++){m=S[b];sf.base.setStyleAttribute(m,{height:y+"px"});for(var w=0,q=[].slice.call(m.querySelectorAll(".e-rhandler"));w<q.length;w++){var C=q[w];sf.base.setStyleAttribute(C,{height:sf.base.closest(C,"th").offsetHeight+"px"})}}}}},e.prototype.wireEvent=function(e){sf.base.EventHandler.add(e,"mouseover",this.dropIndicatorUpdate,this),sf.base.EventHandler.add(e,"mouseleave",this.dropIndicatorUpdate,this)},e.prototype.unWireEvent=function(e){sf.base.EventHandler.remove(e,"mouseover",this.dropIndicatorUpdate),sf.base.EventHandler.remove(e,"mouseleave",this.dropIndicatorUpdate)},e.prototype.dropIndicatorUpdate=function(e){(this.parent.isDragging&&e.target.classList.contains("e-droppable")&&"mouseover"===e.type||"mouseleave"===e.type)&&(sf.base.removeClass([].slice.call(this.parent.element.querySelectorAll(".e-drop-indicator")),"e-drop-hover"),sf.base.removeClass([].slice.call(this.parent.element.querySelectorAll(".e-drop-indicator-last")),"e-drop-hover"))},e.prototype.destroy=function(){for(var e=0,t=[].slice.call(this.parent.element.querySelectorAll(".e-axis-container"));e<t.length;e++){var o=t[e];this.unWireEvent(o.firstElementChild)}},e}(),b=function(){function t(e){this.parent=e,this.parent.calculatedFieldModule=this}return t.prototype.getNodeLocation=function(e,t){var o=e.querySelector('li[data-uid="'+CSS.escape(JSON.parse(t))+'"]').getBoundingClientRect();return JSON.stringify([o.top+(window.scrollY||document.documentElement.scrollTop),o.left])},t.prototype.setSelectionRange=function(e){e&&sf.base.select("#"+this.parent.element.id+"droppable").setSelectionRange(e,e),sf.base.select("#"+this.parent.element.id+"droppable").focus()},t.prototype.getIconInfo=function(e,t){var o=document.elementFromPoint(t,e);if(o){if(o.classList.contains(r))return JSON.stringify(r);if(o.classList.contains("e-edit"))return JSON.stringify("e-edit");if(o.classList.contains(s))return JSON.stringify(s);if(o.classList.contains("e-edited"))return JSON.stringify("e-edited")}},t.prototype.emptyFieldName=function(e){sf.base.addClass([document.getElementById(e+"ddlelement")],["e-empty-field","e-pivot-calc-input"]),document.getElementById(e+"ddlelement").focus()},t.prototype.editCalculatedFieldInfo=function(e,t,o,r){var i=sf.base.closest(document.elementFromPoint(o,t),"li");e?("pivot"===this.parent.options.dataType&&(sf.base.addClass(sf.base.select("#"+this.parent.element.id+"calculateddialog").querySelectorAll(".e-edited"),"e-edit"),sf.base.removeClass(sf.base.select("#"+this.parent.element.id+"calculateddialog").querySelectorAll(".e-edited"),"e-edited"),sf.base.addClass([i.querySelector("."+n)],"e-edited"),sf.base.removeClass([i.querySelector("."+n)],"e-edit"),i.querySelector(".e-edited").setAttribute("title",r)),sf.base.select("#"+this.parent.element.id+"droppable").value=i.getAttribute("data-uid")):this.updatedCalculatedFieldInfo(i,r)},t.prototype.updatedCalculatedFieldInfo=function(e,t){"pivot"===this.parent.options.dataType&&(sf.base.addClass(sf.base.select("#"+this.parent.element.id+"calculateddialog").querySelectorAll(".e-edited"),"e-edit"),sf.base.removeClass(sf.base.select("#"+this.parent.element.id+"calculateddialog").querySelectorAll(".e-edited"),"e-edited"),e.querySelector(".e-edit").setAttribute("title",t)),sf.base.select("#"+this.parent.element.id+"droppable").value=""},t.prototype.updateNodeExpandIcons=function(t,o){for(var r=t.querySelector('li[data-uid="'+CSS.escape(o)+'"]'),i=[].slice.call(r.querySelectorAll("li")),l=0;l<i.length;l++){var a=i[l].querySelector(".e-text-content");if("CalculatedField"===i[l].getAttribute("data-type")&&a&&i[l].querySelector("."+n+".e-calc-member")&&!i[l].querySelector("."+s)){var c=sf.base.createElement("span",{className:s+" "+e+" "+n});a.classList.add("e-calcfieldmember"),a.appendChild(c)}(i[l].querySelector(".e-calc-dimension-icon,.e-calc-measure-icon,.e-measure-icon")||i[l].querySelector(".e-dimensionCDB-icon,.e-attributeCDB-icon,.e-hierarchyCDB-icon")||i[l].querySelector(".e-level-members,.e-namedSetCDB-icon"))&&this.createDraggable(i[l])}return this.olapExpand(r)},t.prototype.olapExpand=function(e){if(e&&e.querySelector("."+n)&&e.querySelector(".e-icon-expandable")&&e.querySelector("."+n).className.indexOf("e-folderCDB-icon")>-1){var t=e.querySelector("."+n);return sf.base.removeClass([t],"e-folderCDB-icon"),sf.base.addClass([t],"e-folderCDB-open-icon"),JSON.stringify(!1)}return e&&e.querySelector("."+n)&&e.querySelector(".e-icon-collapsible")&&e.querySelector("."+n).className.indexOf("e-folderCDB-open-icon")>-1?(e=e.querySelector("."+n),sf.base.removeClass([e],"e-folderCDB-open-icon"),sf.base.addClass([e],"e-folderCDB-icon"),JSON.stringify(!1)):JSON.stringify(!0)},t.prototype.updateEditOptions=function(t){var o=[].slice.call(sf.base.selectAll("#"+t+" .e-acrdn-item"));sf.base.addClass(sf.base.selectAll("#"+t),"e-pivot-accord");for(var r=0;r<o.length;r++)if(o[r].querySelector('[data-type="CalculatedField"]')){var i=o[r].querySelector(".e-acrdn-header .e-toggle-icon");sf.base.removeClass([i],"e-toggle-icon"),sf.base.addClass([i],"e-acrdn-header-icon");var l=i.querySelector(".e-tgl-collapse-icon");sf.base.removeClass([l],"e-tgl-collapse-icon"),sf.base.addClass([l],[n,"e-edit"]),i.appendChild(sf.base.createElement("span",{className:s+" "+e+" "+n}))}},t.prototype.updateAccordionLabel=function(e){var t=document.elementFromPoint(JSON.parse(e).ClientX,JSON.parse(e).ClientY),o=t.parentElement.querySelector(".e-label").innerText,r=sf.base.closest(t,".e-acrdn-item").querySelector("[data-field").getAttribute("data-caption"),i=sf.base.closest(t,".e-adaptive-calc-radio-btn").querySelector(".input");sf.base.closest(t,".e-acrdn-item").querySelector(".e-label").innerText=r+" ("+o+")",sf.base.closest(t,".e-acrdn-item").querySelector("[data-type").setAttribute("data-type",i.getAttribute("data-value"))},t.prototype.accordionClick=function(e,t,o){var r=document.elementFromPoint(JSON.parse(e),JSON.parse(t));if(sf.base.closest(r,".e-acrdn-header-icon")){var i=sf.base.closest(r,".e-acrdn-header").querySelector(".e-pivot-calc-check input");if(i){var l=void 0,a=sf.base.closest(r,".e-acrdn-header-icon");return a.querySelector(".e-edit")&&r.classList.contains("e-edit")?(sf.base.addClass([a.querySelector("."+n)],"e-edited"),sf.base.removeClass([a.querySelector("."+n)],"e-edit"),l="e-edit"):a.querySelector(".e-edited")&&r.classList.contains("e-edited")?(sf.base.addClass([a.querySelector("."+n)],"e-edit"),sf.base.removeClass([a.querySelector("."+n)],"e-edited"),l="e-edited"):a.querySelector("."+s)&&r.classList.contains(s)&&(l=s),JSON.stringify([i.getAttribute("data-field"),l,i.getAttribute("id").split(o+"_")[1]])}}return JSON.stringify([])},t.prototype.getAccordionValue=function(){for(var e="",t=[].slice.call(document.querySelectorAll(".e-accordion .e-check")),o=0;o<t.length;o++){var r=t[o].parentElement.querySelector("[data-field]").getAttribute("data-field"),i=t[o].parentElement.querySelector("[data-type]").getAttribute("data-type");-1===i.indexOf("CalculatedField")?e=e+'"'+i+"("+r+')"':e+=t[o].parentElement.querySelector("[data-formula]").getAttribute("data-formula")}return e},t.prototype.createFormulaDroppable=function(t,o,l,a,c,d,u){var p=document.getElementById(this.parent.element.id+u);if(p.querySelector("."+i)){new sf.base.Droppable(p.querySelector("."+i),{});for(var h=[].slice.call(p.querySelectorAll(".e-pivot-treeview ul li")),f=0;f<h.length;f++){var m=h[f].getAttribute("data-field");if("olap"===this.parent.options.dataType){h[f].querySelector(".e-measure-icon")&&(h[f].querySelector("."+n).style.display="none");var g=h[f].querySelector(".e-text-content");"CalculatedField"===h[f].getAttribute("data-type")&&g&&h[f].querySelector("."+n+".e-calc-member")&&(g.classList.add("e-calcfieldmember"),g.appendChild(sf.base.createElement("span",{className:s+" "+e+" "+n}))),(h[f].querySelector(".e-calc-dimension-icon,.e-calc-measure-icon,.e-measure-icon")||h[f].querySelector(".e-dimensionCDB-icon,.e-attributeCDB-icon,.e-hierarchyCDB-icon")||h[f].querySelector(".e-level-members,.e-namedSetCDB-icon"))&&this.createDraggable(h[f])}else if("pivot"===this.parent.options.dataType&&!h[f].querySelector(".e-text-content span.e-drag")&&h[f].querySelector(".e-text-content span")){var v=h[f].getAttribute("data-type"),y=sf.base.createElement("span",{attrs:{tabindex:"-1","aria-disabled":"false",title:o},className:e+" e-drag"}),b=sf.base.createElement("div",{className:" e-iconspace"});sf.base.prepend([y],h[f].querySelector(".e-text-content")),sf.base.append([b,h[f].querySelector("."+r)],h[f].querySelector(".e-text-content")),"CalculatedField"===v&&(h[f].querySelector("."+r).setAttribute("title",l),sf.base.addClass([h[f].querySelector("."+r)],s),c&&d===m&&(sf.base.select("#"+this.parent.element.id+"droppable",p).value=h[f].getAttribute("data-uid")),sf.base.addClass([h[f].querySelector(".e-iconspace")],[c&&d===m?"e-edited":"e-edit",e,n]),h[f].querySelector(".e-edit,.e-edited").setAttribute("title",c&&d===m?a:t),h[f].querySelector(".e-edit,.e-edited").setAttribute("aria-disabled","false"),h[f].querySelector(".e-edit,.e-edited").setAttribute("tabindex","-1"),sf.base.removeClass([h[f].querySelector("."+r)],r),sf.base.removeClass([h[f].querySelector(".e-iconspace")],"e-iconspace")),this.createDraggable(y)}}}},t.prototype.createDraggable=function(e){new sf.base.Draggable(e,{dragTarget:".e-list-item",clone:!0,enableTailMode:!0,enableAutoScroll:!1,helper:this.calculatedDragClone.bind(this),dragStart:this.onCalcDragStart.bind(this),drag:this.onDragging.bind(this),dragStop:this.onCalcDragStop.bind(this)})},t.prototype.onDragging=function(t){var o=sf.base.select("#"+this.parent.element.id+"_DragClone ."+e);t.target&&t.target.classList.contains(i)?(sf.base.removeClass([o],"e-drag-restrict"),sf.base.addClass([t.target],"e-copy-drop")):(sf.base.addClass([o],"e-drag-restrict"),sf.base.removeClass([t.target],"e-copy-drop"),sf.base.addClass([o],"e-icon-expandable"),sf.base.removeClass([o],n))},t.prototype.onCalcDragStop=function(e){var t=document.getElementById(this.parent.element.id+"droppable"),o=sf.base.closest(e.element,".e-list-item");sf.base.removeClass([t],"e-copy-drop"),sf.base.removeClass([o.querySelector(".e-list-text")],"e-list-selected");var r=t.selectionStart;e.target.id===this.parent.element.id+"droppable"&&this.parent.dotNetRef.invokeMethodAsync("UpdateCalcDroppable",o.getAttribute("data-uid"),r,e.target.id),document.getElementById(this.parent.element.id+"_DragClone")&&sf.base.remove(e.helper),document.body.style.cursor="auto",this.parent.isDragging=!1},t.prototype.onCalcDragStart=function(e){var t=sf.base.closest(e.element,".e-list-item"),o=document.getElementById(this.parent.element.id+"_DragClone");if(o&&t&&("pivot"===this.parent.options.dataType&&e.target&&e.target.classList.contains("e-drag")||"olap"===this.parent.options.dataType&&(t.querySelector(".e-calc-dimension-icon,.e-calc-measure-icon,.e-measure-icon")||t.querySelector(".e-dimensionCDB-icon,.e-attributeCDB-icon,.e-hierarchyCDB-icon")||t.querySelector(".e-level-members,.e-namedSetCDB-icon")))){sf.base.addClass([t.querySelector(".e-list-text")],"e-list-selected");var r=sf.popups.getZindexPartial(t);o.style.zIndex=r?r.toString():document.querySelector(".e-pivot-calc-dialog-div.e-olap-calc-dialog-div").style.zIndex+1,o.style.display="inline",this.parent.isDragging=!0}else this.parent.isDragging=!1;e.bindEvents(e.dragElement)},t.prototype.calculatedDragClone=function(t){var o=sf.base.createElement("div",{id:this.parent.element.id+"_DragClone",className:"e-drag-item e-treeview e-pivot-calc"}),r=sf.base.createElement("div",{className:"e-text-content e-calcfieldmember"});return r.appendChild(sf.base.createElement("div",{className:e})),r.appendChild(sf.base.createElement("span",{className:"e-list-text",innerHTML:sf.base.closest(t.element,"li").getAttribute("data-caption")})),o.appendChild(r),document.body.appendChild(o),o},t}(),S=function(){function e(e){this.parent=e,this.parent.toolbarModule=this}return e.prototype.renderToolbar=function(){this.parent.element.querySelector("."+l)&&this.updateItemElements(this.parent.element.querySelector("."+l))},e.prototype.updateItemElements=function(e){for(var t=0,o=[].slice.call(e.querySelectorAll(".e-toolbar-item"));t<o.length;t++){var r=o[t];r.querySelector("button")?r.classList.contains("e-overlay")||r.querySelector("button").setAttribute("tabindex","0"):r.querySelector(".e-menu.e-menu-parent")&&(r.querySelector(".e-menu.e-menu-parent").setAttribute("tabindex","-1"),!r.classList.contains("e-overlay")&&r.querySelector(".e-menu-item.e-menu-caret-icon")&&r.querySelector(".e-menu-item.e-menu-caret-icon").setAttribute("tabindex","0"))}},e.prototype.focusToolBar=function(){sf.base.removeClass(document.querySelector("."+l).querySelectorAll(".e-menu-item.e-focused"),"e-focused"),sf.base.removeClass(document.querySelector("."+l).querySelectorAll(".e-menu-item.e-selected"),"e-selected"),document.querySelector(".e-toolbar-items")&&sf.base.addClass([document.querySelector(".e-toolbar-items")],"e-focused")},e.prototype.selectInputRange=function(e){if(e.querySelector(".e-pivotview-report-input")){var t=e.querySelector(".e-pivotview-report-input input");t.setSelectionRange(t.value.length,t.value.length)}},e.prototype.copyMdxQuery=function(e){if(e.querySelector(".e-mdx-query-content")){var t=e.querySelector(".e-mdx-query-content");try{t.select(),document.execCommand("copy")}catch(e){window.alert("Oops, unable to copy")}}else;},e}(),w=function(){function t(e){this.parent=e,this.parent.treeRendererModule=this}return t.prototype.updateFieldListIcons=function(e,t){if(this.parent.fieldList)for(var o=document.getElementById(e),r=[].slice.call(o.querySelectorAll("ul li")),i=0;i<r.length;i++){var s=r[i].getAttribute("data-uid");this.updateTreeNode(r[i],s,t)}},t.prototype.updateTreeNode=function(t,o,r){var i=!1;i="olap"!==this.parent.options.dataType||this.updateOlapTreeNode(t);var s=t.querySelector(".e-text-content");if(t.querySelector("."+n)&&s){var l=t.querySelector("."+n);s.insertBefore(l,t.querySelector(".e-list-text"))}if(i&&!this.parent.isAdaptive){var a=this.parent.commonActionModule.getFieldInfo(o);i=!1;var c=sf.base.createElement("span",{attrs:{tabindex:"-1","aria-disabled":"false"}});c.appendChild(sf.base.createElement("span",{attrs:{tabindex:"-1",title:a.fieldItem?a.fieldItem.allowDragAndDrop?r:"":r,"aria-disabled":"false"},className:e+" e-drag "+(a.fieldItem?a.fieldItem.allowDragAndDrop?"":"e-disable-drag":"")})),t.querySelector(".e-checkbox-wrapper")&&!t.querySelector(".e-drag")&&s&&s.insertBefore(c,t.querySelector(".e-checkbox-wrapper")),this.parent.pivotButtonModule.createDraggable(!0,c,a.fieldItem)}t.querySelector(".e-check")&&sf.base.addClass([t.querySelector(".e-list-text")],"e-selected-node")},t.prototype.updateOlapTreeNode=function(e){if("olap"!==this.parent.options.dataType||!e)return!0;var t=e.querySelector(".e-text-content");return t.querySelector(".e-calcMemberGroupCDB,.e-measureGroupCDB-icon,.e-folderCDB-icon,.e-folderCDB-open-icon,.e-dimensionCDB-icon,.e-kpiCDB-icon")&&(t.querySelector(".e-checkbox-wrapper").style.display="none"),t.querySelector("."+n)&&t.querySelector("."+n).className.indexOf("e-level-members")>-1&&(this.parent.isAdaptive?t.querySelector(".e-checkbox-wrapper").style.display="none":t.querySelector(".e-checkbox-wrapper").style.visibility="hidden"),!!(t.querySelector(".e-hierarchyCDB-icon,.e-attributeCDB-icon,.e-namedSetCDB-icon")||t.querySelector(".e-measure-icon,.e-kpiGoal-icon,.e-kpiStatus-icon,.e-kpiTrend-icon,.e-kpiValue-icon")||t.querySelector(".e-calc-measure-icon,.e-calc-dimension-icon"))&&(!t.querySelector(".e-measure-icon")||(t.querySelector("."+n).style.display="none",!0))},t}(),q=function(){function e(e,t,o,r){window.sfBlazor=window.sfBlazor,this.element=t,this.dotNetRef=r,this.dataId=e,window.sfBlazor.setCompInstance(this),this.getOptions(t,o)}return e.prototype.getOptions=function(e,t){this.element=e,this.options=t,this.parentElement=document.getElementById(e.id+"_Dialog_Container"),this.isAdaptive=sf.base.Browser.isDevice,this.pivotGridModule=t.pivotGridModule?window.sfBlazor.getCompInstance(t.pivotGridModule):this.pivotGridModule,this.pivotGridModule&&sf.base.isNullOrUndefined(this.pivotGridModule.pivotFieldListModule)&&(this.pivotGridModule.pivotFieldListModule=this),this.fieldList=t.fieldList?t.fieldList:this.fieldList,this.dataSourceSettings=t.dataSourceSettings,this.parentElement&&sf.base.select("#"+this.parentElement.id+"_title",this.parentElement)&&sf.base.setStyleAttribute(sf.base.select("#"+this.parentElement.id+"_title",this.parentElement),{width:"100%"})},e.prototype.initModules=function(){this.treeRendererModule=new w(this),this.commonActionModule=new E(this),this.pivotButtonModule=new v(this),this.options.allowCalculatedField&&(this.calculatedFieldModule=new b(this)),this.unWireEvents(),this.wireEvents()},e.prototype.contentReady=function(){this.initModules(),this.pivotButtonModule&&(this.pivotButtonModule.createPivotButtonDrop(),this.pivotButtonModule.setPivotButtonDrag()),this.parentElement&&sf.base.select("#"+this.parentElement.id+"_title",this.parentElement)&&sf.base.setStyleAttribute(sf.base.select("#"+this.parentElement.id+"_title",this.parentElement),{width:"100%"})},e.prototype.onShowFieldList=function(e,t){e.querySelector(".e-toggle-field-list")&&sf.base.addClass([e.querySelector(".e-toggle-field-list")],"e-hide"),t.style.top=parseInt(t.style.top,10)<0?"0px":t.style.top},e.prototype.removeFieldListIcon=function(e){document.getElementById(e.id+"calculateddialog")&&!document.getElementById(e.id+"calculateddialog").classList.contains("e-popup-close")||!e.querySelector(".e-toggle-field-list")||sf.base.removeClass([e.querySelector(".e-toggle-field-list")],"e-hide")},e.prototype.updateFieldList=function(e){var t=e.querySelector(".e-footer-content");sf.base.select("#"+e.id+"_dialog-content",e)?(sf.base.setStyleAttribute(sf.base.select("#"+e.id+"_dialog-content",e),{padding:"0"}),sf.base.addClass([t],"e-field-list-footer")):e.querySelector(".e-adaptive-container").appendChild(t)},e.prototype.updateSelectedNodes=function(e,t){e=sf.base.closest(e,".e-text-content"),"check"===t?sf.base.addClass([e.querySelector(".e-list-text")],"e-selected-node"):sf.base.removeClass([e.querySelector(".e-list-text")],"e-selected-node");var o=sf.base.closest(e,"li");if(o&&o.querySelector("ul"))for(var r=0,i=[].slice.call(o.querySelectorAll("li"));r<i.length;r++){var s=i[r];"check"===t?sf.base.addClass([s.querySelector(".e-list-text")],"e-selected-node"):sf.base.removeClass([s.querySelector(".e-list-text")],"e-selected-node")}},e.prototype.removeFocusedElements=function(){this.element.querySelectorAll(".e-btn-focused").length>0&&sf.base.removeClass(this.element.querySelectorAll(".e-btn-focused"),"e-btn-focused")},e.prototype.wireEvents=function(){sf.base.EventHandler.add(document,"click",this.removeFocusedElements,this)},e.prototype.unWireEvents=function(){sf.base.EventHandler.remove(document,"click",this.removeFocusedElements)},e.prototype.destroy=function(e){this.unWireEvents(),this.commonActionModule.destroy(),this.pivotButtonModule.destroy(),this.isDestroyed=e},e}(),C=function(){function e(e){this.keyConfigs={shiftF:"shift+F",shiftS:"shift+S",shiftE:"shift+E",delete:"delete",enter:"enter",escape:"escape",upArrow:"upArrow",downArrow:"downArrow"},this.parent=e,this.parent.parentElement.tabIndex=-1===this.parent.parentElement.tabIndex?0:this.parent.parentElement.tabIndex,this.keyboardModule=new sf.base.KeyboardEvents(this.parent.parentElement,{keyAction:this.keyActionHandler.bind(this),keyConfigs:this.keyConfigs,eventName:"keydown"})}return e.prototype.keyActionHandler=function(e){switch(e.action){case"shiftF":this.processFilter(e);break;case"shiftS":this.processSort(e);break;case"shiftE":this.processEdit(e);break;case"delete":this.processDelete(e);break;case"enter":this.processEnter(e);break;case"escape":this.processClose(e);break;case"upArrow":case"downArrow":this.processFilterNodeSelection(e)}},e.prototype.getButtonElement=function(e){for(var t=[].slice.call(this.parent.parentElement.querySelectorAll(".e-pivot-button")),o=0,r=t.length;o<r;o++)if(t[o].getAttribute("data-uid")===e.getAttribute("data-uid"))return t[o];return e},e.prototype.processEnter=function(e){var t=e.target;if(t&&sf.base.closest(t,".e-pivot-button"))return t.querySelector(".e-dropdown-icon")&&sf.base.closest(t,".e-values")?t.querySelector(".e-dropdown-icon").click():t.querySelector(".e-edit")?t.querySelector(".e-edit").click():!t.querySelector(".e-sort")||sf.base.closest(t,".e-values")||sf.base.closest(t,".e-axis-filter")?t.querySelector(".e-btn-filter")&&!sf.base.closest(t,".e-values")&&t.querySelector(".e-btn-filter").click():(t.querySelector(".e-sort").click(),this.getButtonElement(t).focus()),e.stopPropagation(),void e.preventDefault()},e.prototype.processSort=function(e){var t=e.target;if(t&&sf.base.closest(t,".e-pivot-button")&&t.querySelector(".e-sort")&&!sf.base.closest(t,".e-values")&&!sf.base.closest(t,".e-axis-filter"))return t.querySelector(".e-sort").click(),this.getButtonElement(t).focus(),e.stopPropagation(),void e.preventDefault()},e.prototype.processEdit=function(e){var t=e.target;if(t&&sf.base.closest(t,".e-pivot-button")&&t.querySelector(".e-edit"))return t.querySelector(".e-edit").click(),e.stopPropagation(),void e.preventDefault()},e.prototype.processFilter=function(e){var t=e.target;if(t&&sf.base.closest(t,".e-pivot-button")&&t.querySelector(".e-btn-filter")&&!sf.base.closest(t,".e-values"))return t.querySelector(".e-btn-filter").click(),e.stopPropagation(),void e.preventDefault()},e.prototype.processFilterNodeSelection=function(e){var t=e.target;if(t&&sf.base.closest(t,".e-select-all")&&40===e.keyCode){if((r=sf.base.closest(t,".e-member-editor-outer-container").querySelector(".e-member-editor-container"))&&r.querySelector("li")){var o=r.querySelector("li");return r.querySelector("li#_active")&&(sf.base.removeClass([r.querySelector("li#_active")],[a,"e-node-focus"]),r.querySelector("li#_active").removeAttribute("id")),o.setAttribute("id","_active"),sf.base.addClass([o],[a,"e-node-focus"]),r.focus(),e.stopPropagation(),void e.preventDefault()}}else if(t&&sf.base.closest(t,".e-member-editor-container")&&38===e.keyCode){var r;if((r=sf.base.closest(t,".e-member-editor-container")).querySelector("li#_active."+a+".e-node-focus")&&r.querySelector("li")&&r.querySelector("li")===r.querySelector("li#_active."+a+".e-node-focus")){sf.base.removeClass(r.querySelectorAll("li.e-prev-active-node"),"e-prev-active-node");var i=sf.base.closest(t,".e-member-editor-outer-container").querySelector(".e-select-all");if(i&&i.querySelector("li"))return(o=i.querySelector("li")).setAttribute("id","_active"),sf.base.addClass([o],[a,"e-node-focus"]),i.focus(),e.stopPropagation(),void e.preventDefault()}}},e.prototype.processDelete=function(e){var t=e.target;if(t&&sf.base.closest(t,".e-pivot-button")&&t.querySelector(".e-remove"))return t.querySelector(".e-remove").click(),e.stopPropagation(),void e.preventDefault()},e.prototype.processClose=function(e){var t=e.target;if(t&&sf.base.closest(t,"."+c+"."+d)){var o=sf.base.closest(t,"."+c+"."+d).blazor__instance,r=this;if(o&&!o.closeOnEscape){var i=o.element.getAttribute("data-fieldName");o.dotNetRef.invokeMethodAsync("CloseDialog",{altKey:e.altKey,ctrlKey:e.ctrlKey,code:e.code,key:e.key,location:e.location,repeat:e.repeat,shiftKey:e.shiftKey,metaKey:e.metaKey,type:e.type}).then((function(){if(r.parent.parentElement)for(var t=0,o=[].slice.call(r.parent.parentElement.querySelectorAll(".e-pivot-button"));t<o.length;t++){var s=o[t];if(s.getAttribute("data-uid")===i){s.focus();break}}e.preventDefault()}))}else this.closeDialog(sf.base.closest(t,"."+c+"."+d),e)}},e.prototype.closeDialog=function(e,t){return e.querySelector("."+g)?(e.querySelector("."+g).click(),void t.preventDefault()):e.querySelector(".e-cancel-btn")?(e.querySelector(".e-cancel-btn").click(),void t.preventDefault()):void 0},e.prototype.destroy=function(){this.keyboardModule&&this.keyboardModule.destroy()},e}(),E=function(){function e(e){this.parent=e,this.parent.commonActionModule=this,this.keyboardModule=new C(e),this.getElementInfo()}return e.prototype.getElementInfo=function(){if(this.parent instanceof I){var e=this.parent.element.getBoundingClientRect();this.parent.dotNetRef.invokeMethodAsync("GetElementInfo",e.width,e.height)}},e.prototype.updateActiveNode=function(e,t){var o=e.querySelectorAll("li.e-node-focus");return sf.base.removeClass(e.querySelectorAll("li.e-prev-active-node"),"e-prev-active-node"),sf.base.addClass([e.querySelector('li[data-uid="'+t+'"]')],"e-prev-active-node"),o&&o.length>0&&e.querySelectorAll("li")[0]===o[0]},e.prototype.isFullRowElement=function(e,t){var o=document.elementFromPoint(t,e),r=o.classList.contains("e-fullrow");return JSON.stringify(this.parent instanceof q&&sf.base.closest(o,".e-field-list-tree-outer-div")?r&&!sf.base.isNullOrUndefined(o.parentElement.querySelector(".e-drag")):r)},e.prototype.validateInputs=function(e){var t=e.value1,o=e.value2,r=e.condition,i=e.type;if(sf.base.isNullOrUndefined(t)||""===t||["Between","NotBetween"].indexOf(r)>-1&&(sf.base.isNullOrUndefined(o)||""===o)){var s=sf.base.select("#"+this.parent.element.id+"_"+i.toLowerCase()+(sf.base.isNullOrUndefined(t)||""===t?"_input_option_1":"_input_option_2"),this.parent.parentElement);sf.base.addClass([s],"e-empty-field"),s.focus()}},e.prototype.updateDropIndicator=function(e){this.parent.isDragging&&e.target.classList.contains("e-axis-content")&&"mouseover"===e.type?(sf.base.removeClass([].slice.call(this.parent.parentElement.querySelectorAll(".e-drop-indicator")),"e-drop-hover"),sf.base.removeClass([].slice.call(this.parent.parentElement.querySelectorAll(".e-drop-indicator-last")),"e-drop-hover"),(t=[].slice.call(e.target.querySelectorAll(".e-pvt-btn-div"))).length>0&&sf.base.addClass([t[t.length-1].querySelector(".e-drop-indicator-last")],"e-drop-hover")):this.parent instanceof q&&(!this.parent.isDragging||!e.target.classList.contains("e-droppable")&&"mouseleave"===e.type)&&(sf.base.removeClass([].slice.call(this.parent.parentElement.querySelectorAll(".e-drop-indicator")),"e-drop-hover"),sf.base.removeClass([].slice.call(this.parent.parentElement.querySelectorAll(".e-drop-indicator-last")),"e-drop-hover"));if(this.parent.isDragging&&sf.base.closest(e.target,".e-pvt-btn-div")&&"mouseover"===e.type&&(sf.base.removeClass([].slice.call(this.parent.parentElement.querySelectorAll(".e-drop-indicator-last")),"e-drop-hover"),sf.base.removeClass([].slice.call(this.parent.parentElement.querySelectorAll(".e-drop-indicator")),"e-drop-hover"),sf.base.closest(e.target,".e-droppable"))){var t=sf.base.closest(e.target,".e-pvt-btn-div");sf.base.addClass([t.querySelector(".e-drop-indicator")],"e-drop-hover")}},e.prototype.getFieldInfo=function(e,t){for(var o=[this.parent.dataSourceSettings.rows,this.parent.dataSourceSettings.columns,this.parent.dataSourceSettings.values,this.parent.dataSourceSettings.filters],r=0,i=o.length;r<i;r++)for(var s=0,l=o[r]?o[r].length:0;s<l&&!t;s++)if(o[r][s]&&o[r][s].name===e)return{fieldName:e,fieldItem:o[r][s],axis:0===r?"rows":1===r?"columns":2===r?"values":"filters",position:s};var n=this.parent.fieldList[e];return{fieldName:e,fieldItem:n||t?{name:e,caption:n?n.caption:e,baseField:n?n.baseField:void 0,baseItem:n?n.baseItem:void 0,isCalculatedField:!!n&&n.isCalculatedField,isNamedSet:!!n&&n.isNamedSets,showNoDataItems:!!n&&n.showNoDataItems,showSubTotals:!!n&&n.showSubTotals,type:n?n.aggregateType:void 0,showFilterIcon:!!n&&n.showFilterIcon,showSortIcon:!!n&&n.showSortIcon,showRemoveIcon:!n||n.showRemoveIcon,showValueTypeIcon:!!n&&n.showValueTypeIcon,showEditIcon:!!n&&n.showEditIcon,allowDragAndDrop:!n||n.allowDragAndDrop}:void 0,axis:t?"row"===this.parent.dataSourceSettings.valueAxis?"rows":"columns":"fieldlist",position:-1}},e.prototype.getAggregateIcoPosition=function(e){var t=this.parent instanceof I?this.parent.parentElement.querySelector(".e-chart-grouping-bar"):void 0,o=(t&&"Chart"===this.parent.currentView?t:this.parent.parentElement).querySelector(".e-pivot-button."+e);if(o&&o.querySelector(".e-dropdown-icon")){var r=o.querySelector(".e-dropdown-icon").getBoundingClientRect(),i={};return i.top=r.top,i.left=r.left,i.bottom=r.bottom,i.right=r.right,JSON.stringify(i)}return null},e.prototype.destroy=function(){this.keyboardModule.destroy()},e}(),A=function(){function o(e){this.keyConfigs={tab:"tab",shiftTab:"shift+tab",enter:"enter",shiftEnter:"shift+enter",ctrlEnter:"ctrl+enter",ctrlShiftF:"ctrl+shift+f"},this.parent=e,this.event=void 0,this.parent.element.tabIndex=-1===this.parent.element.tabIndex?0:this.parent.element.tabIndex,this.pivotViewKeyboardModule=new sf.base.KeyboardEvents(this.parent.element,{keyAction:this.keyActionHandler.bind(this),keyConfigs:this.keyConfigs,eventName:"keydown"})}return o.prototype.keyActionHandler=function(e){var t=e.target;if(!t||!sf.base.closest(t,".e-pivotfieldlist-container"))switch(e.action){case"tab":this.processTab(e);break;case"shiftTab":this.processShiftTab(e);break;case"enter":case"shiftEnter":case"ctrlEnter":this.processEnter(e);break;case"ctrlShiftF":this.toggleFieldList(e)}},o.prototype.getAdjacentButton=function(e,t){var o=this.allpivotButtons(e);if(sf.base.removeClass(o,"e-btn-focused"),this.parent.internalGrid&&o)for(var r=o.length,i=0;i<r;i++)if(o[i].getAttribute("data-uid")===e.getAttribute("data-uid")){var s="next"===t?o[i+1]:o[i-1];return s||e}return e},o.prototype.allpivotButtons=function(e){var t=[];if(e&&this.parent.options.showGroupingBar){var o=sf.base.closest(e,".e-pivot-grouping-bar"),r=sf.base.closest(e,".e-group-pivot-rows"),i=sf.base.closest(e,".e-chart-grouping-bar"),s=e.classList.contains(u),l=void 0,n=void 0,a=void 0;if(null!==o?n=o.classList.contains("e-pivot-grouping-bar"):null!==r?a=r.classList.contains("e-group-pivot-rows"):null!==i&&(l=i.classList.contains("e-chart-grouping-bar")),n||a||s){var c=[].slice.call(this.parent.element.querySelector(".e-pivot-grouping-bar").querySelectorAll(".e-pivot-button")),d=[].slice.call(this.parent.element.querySelector(".e-group-pivot-rows").querySelectorAll(".e-pivot-button"));t=c.concat(d)}else l&&(t=[].slice.call(this.parent.element.querySelector(".e-chart-grouping-bar").querySelectorAll(".e-pivot-button")))}return t},o.prototype.processTab=function(e){var o=this,r=e.target;if(r&&(sf.base.closest(r,".e-pivot-button")||r.classList.contains(t))){if(this.parent.internalGrid){if(r.parentElement.parentElement.classList.contains("e-group-rows")&&r.classList.contains("e-btn-focused")){var i=this.getAdjacentButton(r,"next");return i.getAttribute("data-uid")!==r.getAttribute("data-uid")&&(sf.base.addClass([i],"e-btn-focused"),i.focus()),e.stopPropagation(),void e.preventDefault()}var s=this.getAdjacentButton(r,"next");return s.getAttribute("data-uid")!==r.getAttribute("data-uid")&&(sf.base.addClass([s],"e-btn-focused"),s.focus()),void e.preventDefault()}}else r&&sf.base.closest(r,"."+l)&&this.parent.options.showToolbar&&(clearTimeout(this.timeOutObj),this.timeOutObj=setTimeout((function(){var e=o.getAdjacentToolbarItem(document.activeElement,"next");sf.base.removeClass(sf.base.closest(r,"."+l).querySelectorAll(".e-menu-item.e-focused"),"e-focused"),e&&e.classList.contains("e-menu-item")&&sf.base.addClass([e],"e-focused")})))},o.prototype.getAdjacentToolbarItem=function(e,t){if(e.classList.contains("e-menu-item")&&e.classList.contains("e-focused")){var o=sf.base.closest(e,".e-toolbar-item"),r=[].slice.call(sf.base.closest(e,"."+l).querySelectorAll(".e-toolbar-item:not(.e-overlay)"));if("next"===t){for(var i=0;i<r.length;i++)if(o.id===r[i].id)return this.getActiveElement(r[i+1])}else for(i=r.length-1;i>-1;i--)if(o.id===r[i].id)return this.getActiveElement(r[i-1])}return e},o.prototype.getActiveElement=function(e){if(e){if("button"===e.firstElementChild.tagName.toLowerCase())return e.firstElementChild.focus(),e.firstElementChild;if(e.querySelector(".e-menu-item"))return e.querySelector(".e-menu-item").focus(),e.querySelector(".e-menu-item")}return document.activeElement},o.prototype.processShiftTab=function(e){var o=this,r=e.target;if(r&&(sf.base.closest(r,".e-pivot-button")||r.classList.contains(t))){if(this.parent.internalGrid){if(r.classList.contains(t)&&r.querySelector(".e-btn-focused"))r=r.querySelector(".e-btn-focused");else if(r.classList.contains(t)){r=this.parent.element.querySelector(".e-btn-focused")?this.parent.element.querySelector(".e-btn-focused"):this.parent.element.querySelector(".e-pivot-grouping-bar");var i=this.allpivotButtons(r);if(i.length>0&&i[i.length-1])return i[i.length-1].focus(),sf.base.removeClass(i,"e-btn-focused"),sf.base.addClass([i[i.length-1]],"e-btn-focused"),e.stopPropagation(),void e.preventDefault()}var s=this.getAdjacentButton(r,"previous");if(s.getAttribute("data-uid")!==r.getAttribute("data-uid"))return s.focus(),e.stopPropagation(),void e.preventDefault()}}else if(r&&this.parent.internalGrid&&(r.classList.contains("e-movablefirst")||r.classList.contains(u)&&sf.base.closest(r,"tr").getAttribute("data-uid")===this.parent.internalGrid.element.querySelector(".e-frozencontent tr").getAttribute("data-uid"))){var n=this.allpivotButtons(r);if(n.length>0)return setTimeout((function(){n[n.length-1].focus()})),sf.base.removeClass(n,"e-btn-focused"),sf.base.addClass([n[n.length-1]],"e-btn-focused"),e.stopPropagation(),void e.preventDefault()}else r&&sf.base.closest(r,"."+l)&&this.parent.options.showToolbar&&(clearTimeout(this.timeOutObj),this.timeOutObj=setTimeout((function(){var e=o.getAdjacentToolbarItem(document.activeElement,"previous");sf.base.removeClass(sf.base.closest(r,"."+l).querySelectorAll(".e-menu-item.e-focused"),"e-focused"),e&&e.classList.contains("e-menu-item")&&sf.base.addClass([e],"e-focused")})))},o.prototype.processEnter=function(t){var o=t.target;if(o&&sf.base.closest(o,".e-grid"))return 13!==t.keyCode||t.shiftKey||t.ctrlKey?13===t.keyCode&&t.shiftKey&&!t.ctrlKey?this.parent.options.enableValueSorting&&(this.event=t,o.click()):13===t.keyCode&&!t.shiftKey&&t.ctrlKey&&this.parent.options.hyperlinkSettings&&o.querySelector("a")&&o.querySelector("a").click():o.querySelector("."+e)?(this.event=t,o.querySelector("."+e).click()):o.classList.contains("e-valuescontent")&&o.dispatchEvent(new MouseEvent("dblclick",{view:window,bubbles:!0,cancelable:!0})),void t.preventDefault()},o.prototype.toggleFieldList=function(e){var t=this.parent,o=e.target;if(t&&t.element&&t.options.showFieldList&&t.pivotFieldListModule){t.pivotFieldListModule=t.pivotFieldListModule&&t.pivotFieldListModule.blazor__instance?t.pivotFieldListModule.blazor__instance:t.pivotFieldListModule;var r=t.element.querySelector("#"+t.element.id+"fieldlist");if(t.options.showToolbar&&t.toolbarModule&&r&&r.querySelector("button")&&t.pivotFieldListModule.parentElement.classList.contains("e-popup-close"))return r.click(),void e.preventDefault();if(t.element.querySelector(".e-toggle-field-list")){if(!t.element.querySelector(".e-toggle-field-list").classList.contains("e-hide"))return t.element.querySelector(".e-toggle-field-list").click(),void e.preventDefault();if((t.element.querySelector(".e-toggle-field-list").classList.contains("e-hide")||t.options.showToolbar)&&o&&sf.base.closest(o,".e-pivotview")&&t.pivotFieldListModule.parentElement&&t.pivotFieldListModule.parentElement.classList.contains(d)){var i=t.pivotFieldListModule.parentElement.blazor__instance;i&&!i.closeOnEscape?i.dotNetRef.invokeMethodAsync("CloseDialog",{altKey:e.altKey,ctrlKey:e.ctrlKey,code:e.code,key:e.key,location:e.location,repeat:e.repeat,shiftKey:e.shiftKey,metaKey:e.metaKey,type:e.type}):t.closeDialog(t.pivotFieldListModule.parentElement,e)}}}},o.prototype.destroy=function(){this.pivotViewKeyboardModule&&this.pivotViewKeyboardModule.destroy()},o}(),B=function(){function e(e){this.isPopupClicked=!1,this.shiftLockedPos=[],this.savedSelectedCellsPos=[],this.cellSelectionPos=[],this.parent=e,this.parent.selectionModule=this}return e.prototype.addInternalEvents=function(){this.wireEvents()},e.prototype.wireEvents=function(){this.unWireEvents(),sf.base.EventHandler.add(this.parent.element,this.parent.isAdaptive?"touchend":"click",this.mouseClickHandler,this)},e.prototype.unWireEvents=function(){sf.base.EventHandler.remove(this.parent.element,this.parent.isAdaptive?"touchend":"click",this.mouseClickHandler)},e.prototype.mouseClickHandler=function(e){(3===e.which||0===e.which)&&(this.lastCellClicked=e.target);var t=e.target;if((t.classList.contains(o)||t.classList.contains("e-headercelldiv")||t.classList.contains(u)||t.classList.contains("e-rowcell")||t.classList.contains("e-stackedheadercelldiv")||t.classList.contains("e-headertext")||t.classList.contains("e-stackedheadertext"))&&"pivot"===this.parent.options.dataType){t.classList.contains(o)||t.classList.contains(u)||t.classList.contains("e-rowcell")?t:t.classList.contains("e-stackedheadercelldiv")||t.classList.contains("e-cellvalue")||t.classList.contains("e-headercelldiv")||t.classList.contains("e-ascending")||t.classList.contains("e-descending")?t.parentElement:t.classList.contains("e-headertext")&&t.parentElement.parentElement,this.cellClicked(t,e)}else this.cellClicked(t,e)},e.prototype.cellClicked=function(e,t){var r=this,i=null;if(e.classList.contains(o)||e.classList.contains("e-stackedheadercell")||e.classList.contains("e-stackedheadercelldiv")||e.classList.contains("e-stackedheadertext")||e.classList.contains("e-headertext")||e.classList.contains("e-headercelldiv")?i=sf.base.closest(e,"th."+o):e.classList.contains("e-cellvalue")||e.classList.contains("e-rowcell")?i=sf.base.closest(e,"td.e-rowcell"):e.classList.contains("e-rowselect")&&(e.classList.contains("e-spanclicked")?this.isPopupClicked=!1:this.isPopupClicked=!0),i){var s=Number(i.getAttribute("aria-colindex")),l=Number(i.getAttribute("index")),n=Number(i.getAttribute("aria-colspan"));this.parent.gridSettings.allowSelection&&(("Both"===this.parent.gridSettings.selectionSettings.mode?!i.classList.contains("e-rowcell"):"Cell"===this.parent.gridSettings.selectionSettings.mode?i.classList.contains(p):"Row"!==this.parent.gridSettings.selectionSettings.mode)?this.parent.dotNetRef.invokeMethodAsync("ColumnSelectHandler",l,s,t).then((function(e){r.clearSelection(i,t,s,l),e||(r.clearSelection(i,t,s,l),r.applyColumnSelection(t,i,s,s+(n>0?n-1:0),l),r.afterColumnSelected(i,t,s,l))})):(this.clearSelection(i,t,s,l),this.afterColumnSelected(i,t,s,l))),this.parent.gridSettings.allowSelection||e.classList.contains("e-expand")||e.classList.contains("e-collapse")||this.parent.dotNetRef.invokeMethodAsync("CellClickedHandler",l,s,t)}},e.prototype.afterColumnSelected=function(e,t,o,r){this.getSelectedCellsPos();var i=JSON.stringify(this.savedSelectedCellsPos);("Both"===this.parent.gridSettings.selectionSettings.mode?!e.classList.contains("e-rowcell"):"Cell"===this.parent.gridSettings.selectionSettings.mode?e.classList.contains(p):"Row"!==this.parent.gridSettings.selectionSettings.mode)&&(this.parent.dotNetRef.invokeMethodAsync("CellClickedHandler",r,o,t),this.parent.dotNetRef.invokeMethodAsync("SelectHandler",o,r,i),this.savedSelectedCellsPos=[])},e.prototype.clearSelection=function(e,t,o,r){if(sf.base.isNullOrUndefined(e))for(var i=0,s=[].slice.call(this.parent.element.querySelectorAll("."+f+", ."+h));i<s.length;i++){var l=s[i];sf.base.removeClass([l],["e-active",f,h])}else if(!t.shiftKey&&!t.ctrlKey||"Single"===this.parent.gridSettings.selectionSettings.type)if("Cell"===this.parent.gridSettings.selectionSettings.mode)e.classList.contains(p)?sf.base.removeClass(this.parent.element.querySelectorAll(".e-rowcell."+h),h):sf.base.removeClass(this.parent.element.querySelectorAll("."+p+".e-active"),["e-active",f]);else if("Both"===this.parent.gridSettings.selectionSettings.mode||"Row"===this.parent.gridSettings.selectionSettings.mode)if(e.classList.contains("e-rowcell"))for(var n=0,a=[].slice.call(this.parent.element.querySelectorAll("."+f+", ."+h));n<a.length;n++){l=a[n];sf.base.removeClass([l],["e-active",f,h])}else sf.base.removeClass(this.parent.element.querySelectorAll("."+h),h)},e.prototype.applyColumnSelection=function(e,t,r,i,s){var l=Number(t.getAttribute("index"));if(!t.classList.contains(u)||"Cell"!==this.parent.gridSettings.selectionSettings.mode||t.classList.contains(p)){var n=e.ctrlKey;"Multiple"===this.parent.gridSettings.selectionSettings.type&&null!==this.parent.element.querySelector(".e-rowselect")&&(this.isPopupClicked?(this.parent.element.querySelector(".e-rowselect").classList.add("e-spanclicked"),n=!0):(this.parent.element.querySelector(".e-rowselect").classList.remove("e-spanclicked"),n=!1));for(var a=[],c=this.parent.gridSettings.selectionSettings.type,d=t.classList.contains("e-active"),m=[],g={},v=r;v<=i;v++)m.push(v.toString());if(n&&"Single"!==c)d=!1;else{for(var y=0,b=[].slice.call(this.parent.element.querySelectorAll(".e-active"));y<b.length;y++){var S=b[y];sf.base.removeClass([S],["e-active",f]),-1===m.indexOf(S.getAttribute("aria-colindex"))&&(d=!1);var w=Number(S.getAttribute("aria-colindex"));g[w]=w}m=Object.keys(g).length>0?Object.keys(g).sort((function(e,t){return e-t})):m}"Multiple"===c&&e.shiftKey?(this.shiftLockedPos=0===this.shiftLockedPos.length?m:this.shiftLockedPos,Number(this.shiftLockedPos[0])<=r?r=Number(this.shiftLockedPos[0]):i=i<Number(this.shiftLockedPos[this.shiftLockedPos.length-1])?Number(this.shiftLockedPos[this.shiftLockedPos.length-1]):i):this.shiftLockedPos=[];var q=[];if(e.ctrlKey&&"Both"===this.parent.gridSettings.selectionSettings.mode&&"Multiple"===c&&!t.classList.contains(u))for(var C=0,E=[].slice.call(this.parent.element.querySelectorAll("."+u+"."+h));C<E.length;C++){S=E[C];q.push(S.getAttribute("index"))}for(var A=r;A<=i;)a.push('[aria-colindex="'+A+'"]'+("Cell"===this.parent.gridSettings.selectionSettings.mode?'[index="'+s+'"]':"")),A++;if(!d){s=t.classList.contains(o)?s:this.parent.scrollPageInfo.rowStartPos-1;for(var B=t.classList.contains("e-active"),L=0,x=[].slice.call(this.parent.element.querySelectorAll(a.toString()));L<x.length;L++){S=x[L];Number(S.getAttribute("index"))>=s&&(B&&n&&-1===q.indexOf(l.toString())?sf.base.removeClass([S],["e-active",f]):sf.base.addClass([S],["e-active",f]))}}}},e.prototype.getSelectedCellsPos=function(){for(var e=0,t=[].slice.call(this.parent.element.querySelectorAll("."+f));e<t.length;e++){var o=t[e];this.savedSelectedCellsPos.push({rowIndex:o.getAttribute("index"),colIndex:o.getAttribute("aria-colindex")})}for(var r=0,i=[].slice.call(this.parent.element.querySelectorAll("."+h));r<i.length;r++){o=i[r];this.cellSelectionPos.push({rowIndex:o.getAttribute("index"),colIndex:o.getAttribute("aria-colindex")})}},e.prototype.destroy=function(){this.unWireEvents()},e}(),L=function(){function e(e){this.previousValues={top:0,left:0},this.frozenPreviousValues={top:0,left:0},this.eventType="",this.isScrolling=!1,this.parent=e,this.parent.virtualScrollModule=this}return e.prototype.addInternalEvents=function(){this.wireEvents()},e.prototype.wireEvents=function(){if(this.unWireEvents(),"Chart"!==this.parent.displayOptions.view){var e=this.parent.element.querySelector(".e-movablecontent"),t=this.parent.element.querySelector(".e-frozencontent"),o=this.parent.element.querySelector(".e-movableheader"),r=e.parentElement.parentElement.querySelector(".e-movablescrollbar");sf.base.EventHandler.clearEvents(e),sf.base.EventHandler.clearEvents(t);var i=this.parent.isAdaptive?e:e.parentElement.parentElement.querySelector(".e-movablescrollbar");sf.base.EventHandler.add(i,"scroll touchmove pointermove",this.onHorizondalScroll(o,e,t),this),sf.base.EventHandler.add(e.parentElement,"scroll wheel touchmove pointermove keyup keydown",this.onVerticalScroll(t,e),this),sf.base.EventHandler.add(e.parentElement.parentElement,"mouseup touchend",this.common(o,e,t),this),sf.base.EventHandler.add(r,"scroll",this.onCustomScrollbarScroll(e,o),this),sf.base.EventHandler.add(e,"scroll",this.onCustomScrollbarScroll(r,o),this),sf.base.EventHandler.add(o,"scroll",this.onCustomScrollbarScroll(r,e),this),sf.base.EventHandler.add(o,"touchstart pointerdown",this.setPageXY(),this),sf.base.EventHandler.add(o,"touchmove pointermove",this.onTouchScroll(o,e,t),this),sf.base.EventHandler.add(e,"touchstart pointerdown",this.setPageXY(),this),sf.base.EventHandler.add(e,"touchmove pointermove",this.onTouchScroll(o,e,t),this)}},e.prototype.unWireEvents=function(){var e=this.parent.element.querySelector(".e-movablecontent"),t=this.parent.element.querySelector(".e-frozencontent"),o=this.parent.element.querySelector(".e-movableheader"),r=e.parentElement.parentElement.querySelector(".e-movablescrollbar"),i=this.parent.isAdaptive?e:e.parentElement.parentElement.querySelector(".e-movablescrollbar");sf.base.EventHandler.remove(i,"scroll touchmove pointermove",this.onHorizondalScroll(o,e,t)),sf.base.EventHandler.remove(e.parentElement,"scroll wheel touchmove pointermove keyup keydown",this.onVerticalScroll(t,e)),sf.base.EventHandler.remove(e.parentElement.parentElement,"mouseup touchend",this.common(o,e,t)),sf.base.EventHandler.remove(r,"scroll",this.onCustomScrollbarScroll(e,o)),sf.base.EventHandler.remove(e,"scroll",this.onCustomScrollbarScroll(r,o)),sf.base.EventHandler.remove(o,"scroll",this.onCustomScrollbarScroll(r,e)),sf.base.EventHandler.remove(o,"touchstart pointerdown",this.setPageXY()),sf.base.EventHandler.remove(o,"touchmove pointermove",this.onTouchScroll(o,e,t)),sf.base.EventHandler.remove(e,"touchstart pointerdown",this.setPageXY()),sf.base.EventHandler.remove(e,"touchmove pointermove",this.onTouchScroll(o,e,t))},e.prototype.onWheelScroll=function(e,t){var o=this,r=e;return function(e){var t=r.parentElement.scrollTop+(1===e.deltaMode?30*e.deltaY:e.deltaY);o.frozenPreviousValues.top!==t&&(e.preventDefault(),o.frozenPreviousValues.top=t,o.eventType=e.type)}},e.prototype.getPointXY=function(e){var t={x:0,y:0};return e.touches&&e.touches.length?(t.x=e.touches[0].pageX,t.y=e.touches[0].pageY):(t.x=e.pageX,t.y=e.pageY),t},e.prototype.onCustomScrollbarScroll=function(e,t){var o=this,r=e,i=t;return function(e){if(null!==o.parent.element.querySelector(".e-movablecontent").parentElement.querySelector("tbody")){var t=e.target.scrollLeft;o.previousValues.left!==t&&(r.scrollLeft=t,i.scrollLeft=t,o.previousValues.left=t)}}},e.prototype.onTouchScroll=function(e,t,o){var r=this,i=t;return function(o){if("mouse"!==o.pointerType){var s=r.getPointXY(o),l=i.parentElement.scrollTop+(r.pageXY.y-s.y),n=r.parent.isAdaptive?t:i.parentElement.parentElement.querySelector(".e-movablescrollbar"),a=n.scrollLeft+(r.pageXY.x-s.x);r.frozenPreviousValues.left===a||a<0||(e.scrollLeft=a,n.scrollLeft=a,r.pageXY.x=s.x,r.frozenPreviousValues.left=a,r.frozenPreviousValues.top===l||l<0||(r.pageXY.y=s.y,r.frozenPreviousValues.top=l,r.eventType=o.type))}}},e.prototype.update=function(e,t,o,r,i){var s=this;if(this.isScrolling=!0,this.parent.pageSettings)if("vertical"===this.direction){var l="pivot"===this.parent.options.dataType&&"row"===this.parent.dataSourceSettings.valueAxis?this.parent.dataSourceSettings.values.length:1,n=this.parent.pageSettings.rowSize*l*this.parent.gridSettings.rowHeight,a=Math.ceil(o/n);if(this.parent.scrollPosObject.vertical===a||this.parent.pageSettings.rowSize>=this.parent.scrollPageInfo.rowCount)return;this.parent.scrollPosObject.vertical=a,this.parent.pageSettings.rowCurrentPage=a>1?a:1;var c=0;"pivot"===this.parent.options.dataType&&this.parent.dotNetRef.invokeMethodAsync("UpdateScrollInfo",a,this.direction).then((function(e){s.parent.getScrollInfo(e),c=s.parent.scrollPageInfo.rowStartPos;var t=Math.ceil(c/(s.parent.pageSettings.rowSize*l)),o=n*t-s.parent.scrollPageInfo.rowFirstLvl*l*s.parent.gridSettings.rowHeight;s.parent.scrollPosObject.verticalSection=o}))}else{var d="pivot"===this.parent.options.dataType&&"column"===this.parent.dataSourceSettings.valueAxis?this.parent.dataSourceSettings.values.length:1,u=this.parent.pageSettings.columnSize*d*this.parent.gridSettings.columnWidth;a=Math.ceil(r/u);if(this.parent.scrollPosObject.horizontal===a)return;this.parent.scrollPosObject.horizontal=a,this.parent.pageSettings.columnCurrentPage=a>1?a:1;var p=0;"pivot"===this.parent.options.dataType&&this.parent.dotNetRef.invokeMethodAsync("UpdateScrollInfo",a,this.direction).then((function(e){s.parent.getScrollInfo(e),p=s.parent.scrollPageInfo.colStartPos;var t=Math.ceil(p/(s.parent.pageSettings.columnSize*d)),o=u*t-s.parent.scrollPageInfo.colFirstLvl*d*s.parent.gridSettings.columnWidth;s.parent.scrollPosObject.horizontalSection=o}))}},e.prototype.setPageXY=function(){var e=this;return function(t){"mouse"!==t.pointerType&&(e.pageXY=e.getPointXY(t))}},e.prototype.common=function(e,t,o){var r=this;return function(o){r.parent.isAdaptive||t.parentElement.parentElement.querySelector(".e-movablescrollbar");r.update(e,t,t.parentElement.scrollTop*r.parent.verticalScrollScale,t.scrollLeft*r.parent.horizontalScrollScale,o)}},e.prototype.onHorizondalScroll=function(e,t,o){var r,i=this;return function(o){var s=i.parent.isAdaptive?t:t.parentElement.parentElement.querySelector(".e-movablescrollbar"),l=t.scrollLeft*i.parent.horizontalScrollScale;if("wheel"!==o.type&&"touchmove"!==o.type&&"wheel"!==i.eventType&&"touchmove"!==i.eventType||(clearTimeout(r),r=setTimeout((function(){l="touchmove"===o.type?t.scrollLeft:l,i.update(e,t,t.parentElement.scrollTop*i.parent.verticalScrollScale,l,o)}),300)),i.previousValues.left!==l){i.scrollDirection=i.direction="horizondal";var n=-(l-i.parent.scrollPosObject.horizontalSection-t.scrollLeft),a=t.querySelector("."+m).style.transform.split(",").length>1?t.querySelector("."+m).style.transform.split(",")[1].trim():"0px)";t.scrollLeft<i.parent.scrollerBrowserLimit&&(sf.base.setStyleAttribute(t.querySelector("."+m),{transform:"translate("+n+"px,"+a}),sf.base.setStyleAttribute(e.querySelector("."+m),{transform:"translate("+n+"px,0px)"}));var c=i.parent.scrollPosObject.horizontalSection>l?-(i.parent.scrollPosObject.horizontalSection-l):l+e.offsetWidth-(i.parent.scrollPosObject.horizontalSection+t.querySelector("."+m).offsetWidth),d=Math.ceil(i.parent.scrollPosObject.horizontalSection/i.parent.horizontalScrollScale)<i.parent.scrollerBrowserLimit;if(i.parent.scrollPosObject.horizontalSection>l||c>1&&d){l>e.clientWidth?(i.parent.scrollPosObject.left<1&&(i.parent.scrollPosObject.left=e.clientWidth),i.parent.scrollPosObject.left=i.parent.scrollPosObject.left-50,c=i.parent.scrollPosObject.horizontalSection>l?c-i.parent.scrollPosObject.left:c+i.parent.scrollPosObject.left):c=-i.parent.scrollPosObject.horizontalSection,n=-(l-(i.parent.scrollPosObject.horizontalSection+c)-t.parentElement.parentElement.querySelector(".e-movablescrollbar").scrollLeft);var u=i.parent.gridSettings.columnWidth*i.parent.scrollPageInfo.columnCount;u>i.parent.scrollerBrowserLimit&&(i.parent.horizontalScrollScale=u/i.parent.scrollerBrowserLimit,u=i.parent.scrollerBrowserLimit),n>u&&n>l&&(n=l,c=0),sf.base.setStyleAttribute(t.querySelector("."+m),{transform:"translate("+n+"px,"+a}),sf.base.setStyleAttribute(e.querySelector("."+m),{transform:"translate("+n+"px,0px)"}),i.parent.scrollPosObject.horizontalSection=i.parent.scrollPosObject.horizontalSection+c}var p=s.scrollWidth-(s.scrollLeft+s.offsetWidth);if(p<=0){var h=t.querySelector(".e-virtualtrack");h.style.display="none";var f=t.scrollWidth-(t.scrollLeft+t.offsetWidth);h.style.display="";var g=t.scrollWidth-(t.scrollLeft+t.offsetWidth);i.parent.scrollPosObject.horizontalSection-=f>p?f:-g,n=s.scrollLeft>i.parent.scrollerBrowserLimit?Number(t.querySelector("."+m).style.transform.split(",")[0].split("px")[0].trim()):-(s.scrollLeft*i.parent.horizontalScrollScale-i.parent.scrollPosObject.horizontalSection-s.scrollLeft),sf.base.setStyleAttribute(t.querySelector("."+m),{transform:"translate("+n+"px,"+a}),sf.base.setStyleAttribute(e.querySelector("."+m),{transform:"translate("+n+"px,0px)"})}i.previousValues.left=l,i.frozenPreviousValues.left=l,i.eventType="",e.scrollLeft=t.scrollLeft}}},e.prototype.onVerticalScroll=function(e,t){var o,r=this;return function(i){var s=t.parentElement.scrollTop*r.parent.verticalScrollScale;if("wheel"===i.type||"touchmove"===i.type||"wheel"===r.eventType||"touchmove"===r.eventType||"keyup"===i.type||"keydown"===i.type){r.parent.isAdaptive||t.parentElement.parentElement.querySelector(".e-movablescrollbar");clearTimeout(o),o=setTimeout((function(){r.update(null,t,t.parentElement.scrollTop*r.parent.verticalScrollScale,t.scrollLeft*r.parent.horizontalScrollScale,i)}),300)}if(r.previousValues.top!==s){r.scrollDirection=r.direction="vertical";var l=-(s-r.parent.scrollPosObject.verticalSection-t.parentElement.scrollTop),n=t.querySelector("."+m).style.transform.split(",")[0].trim();l>r.virtualDiv.clientHeight&&(l=r.virtualDiv.clientHeight),t.parentElement.scrollTop<r.parent.scrollerBrowserLimit&&(sf.base.setStyleAttribute(e.querySelector("."+m),{transform:"translate(0px,"+l+"px)"}),sf.base.setStyleAttribute(t.querySelector("."+m),{transform:n+","+l+"px)"}));var a=r.parent.scrollPosObject.verticalSection>s?-(r.parent.scrollPosObject.verticalSection-s):s+e.parentElement.clientHeight-(r.parent.scrollPosObject.verticalSection+e.querySelector("."+m).offsetHeight),c=Math.ceil(r.parent.scrollPosObject.verticalSection/r.parent.verticalScrollScale)<r.parent.scrollerBrowserLimit;if(r.parent.scrollPosObject.verticalSection>s||a>1&&c){s>e.parentElement.clientHeight?(r.parent.scrollPosObject.top<1&&(r.parent.scrollPosObject.top=e.parentElement.clientHeight),r.parent.scrollPosObject.top=r.parent.scrollPosObject.top-50,a=r.parent.scrollPosObject.verticalSection>s?a-r.parent.scrollPosObject.top:a+r.parent.scrollPosObject.top):a=-r.parent.scrollPosObject.verticalSection;var d=r.parent.element.querySelector(".e-movablecontent").querySelector("."+m);l=-(s-(r.parent.scrollPosObject.verticalSection+a)-t.parentElement.scrollTop);var u=r.parent.gridSettings.rowHeight*r.parent.scrollPageInfo.rowCount+.1-d.clientHeight;u>r.parent.scrollerBrowserLimit&&(r.parent.verticalScrollScale=u/r.parent.scrollerBrowserLimit,u=r.parent.scrollerBrowserLimit),l>u&&l>s&&(l=s,a=0),sf.base.setStyleAttribute(e.querySelector("."+m),{transform:"translate(0px,"+l+"px)"}),sf.base.setStyleAttribute(t.querySelector("."+m),{transform:n+","+l+"px)"}),r.parent.scrollPosObject.verticalSection=r.parent.scrollPosObject.verticalSection+a}r.previousValues.top=s,r.frozenPreviousValues.top=s,r.eventType=""}}},e.prototype.updateScrollInfo=function(e,t,o){if(this.parent.options.enableVirtualization){e.querySelector(".e-movablecontent")&&!e.querySelector(".e-movablecontent").querySelector(".e-virtualtrack")&&(this.virtualDiv=sf.base.createElement("div",{className:"e-virtualtrack"}),e.querySelector(".e-movablecontent").appendChild(this.virtualDiv)),e.querySelector(".e-movableheader")&&!e.querySelector(".e-movableheader").querySelector(".e-virtualtrack")?(this.virtualHeaderDiv=sf.base.createElement("div",{className:"e-virtualtrack"}),e.querySelector(".e-movableheader").appendChild(this.virtualHeaderDiv)):this.virtualHeaderDiv=e.querySelector(".e-movableheader").querySelector(".e-virtualtrack");var r=e.querySelector(".e-movablecontent").querySelector("."+m),i=this.parent.gridSettings.rowHeight*o+.1-r.clientHeight;i>this.parent.scrollerBrowserLimit&&(this.parent.verticalScrollScale=i/this.parent.scrollerBrowserLimit,i=this.parent.scrollerBrowserLimit);var s=this.parent.gridSettings.columnWidth*t;s>this.parent.scrollerBrowserLimit&&(this.parent.horizontalScrollScale=s/this.parent.scrollerBrowserLimit,s=this.parent.scrollerBrowserLimit),sf.base.setStyleAttribute(this.virtualDiv,{height:(i>.1?i:.1)+"px",width:(s>.1?s:.1)+"px"}),sf.base.setStyleAttribute(this.virtualHeaderDiv,{height:0,width:(s>.1?s:.1)+"px"});var l=e.querySelector(".e-movablecontent"),n=e.querySelector(".e-frozencontent"),a=e.querySelector(".e-movableheader");this.parent.isAdaptive&&(l.parentElement.parentElement.querySelector(".e-movablescrollbar").children[0].style.minHeight="1px",l.parentElement.parentElement.querySelector(".e-movablescrollbar").style.minHeight="1px");var c=this.parent.isAdaptive?l:l.parentElement.parentElement.querySelector(".e-movablescrollbar"),d=l.parentElement.scrollTop>this.parent.scrollerBrowserLimit?l.querySelector("."+m).style.transform.split(",")[1].trim():-(l.parentElement.scrollTop*this.parent.verticalScrollScale-this.parent.scrollPosObject.verticalSection-l.parentElement.scrollTop)+"px)",u=c.scrollLeft>this.parent.scrollerBrowserLimit?l.querySelector("."+m).style.transform.split(",")[0].trim()+",":"translate("+-(c.scrollLeft*this.parent.horizontalScrollScale-this.parent.scrollPosObject.horizontalSection-c.scrollLeft)+"px,";sf.base.setStyleAttribute(n.querySelector("."+m),{transform:"translate(0px,"+d}),sf.base.setStyleAttribute(l.querySelector("."+m),{transform:u+d}),sf.base.setStyleAttribute(a.querySelector("."+m),{transform:u+0+"px)"}),e.querySelector(".e-movablechild").style.width=s+(l.parentElement.offsetWidth-l.parentElement.clientWidth)+"px";var p="pivot"===this.parent.options.dataType&&"column"===this.parent.options.dataSourceSettings.valueAxis?this.parent.options.dataSourceSettings.values.length:1,h=this.parent.pageSettings.columnSize*p*this.parent.options.gridSettings.columnWidth,f=c.scrollWidth-(c.scrollLeft+c.offsetWidth);if(this.parent&&h>0&&f<=h&&c.scrollLeft>0){this.virtualDiv.style.display="none";var g=l.scrollWidth-(l.scrollLeft+l.offsetWidth);this.virtualDiv.style.display="";var v=l.scrollWidth-(l.scrollLeft+l.offsetWidth);this.parent.scrollPosObject.horizontalSection-=f<=0?g>f?g:-v:v===g?g-f:g<v&&(f===v||f>g)?-(v-g):0,u=c.scrollLeft>this.parent.scrollerBrowserLimit?l.querySelector("."+m).style.transform.split(",")[0].trim()+",":"translate("+-(c.scrollLeft*this.parent.horizontalScrollScale-this.parent.scrollPosObject.horizontalSection-c.scrollLeft)+"px,",sf.base.setStyleAttribute(l.querySelector(".e-table"),{transform:u+d}),sf.base.setStyleAttribute(a.querySelector(".e-table"),{transform:u+0+"px)"})}if(sf.base.closest(e.querySelector(".e-movablechild"),".e-scrollbar")){var y=e.querySelector(".e-movablechild").style.width;sf.base.closest(e.querySelector(".e-movablechild"),".e-scrollbar").style.display=y&&Number(y.replace("px",""))>0?"flex":"none"}this.parent.internalGrid&&this.parent.internalGrid.options&&"auto"!==this.parent.internalGrid.options.height||this.parent.internalGrid.element&&"auto"!==this.parent.internalGrid.element.style.height?(n.style.height=(this.virtualDiv.offsetHeight+r.clientHeight).toString()+"px",l.style.height=(this.virtualDiv.offsetHeight+r.clientHeight).toString()+"px"):(n.style.height=e.querySelector(".e-frozencontent ."+m).toString()+"px",l.style.height=e.querySelector(".e-frozencontent ."+m).toString()+"px")}},e.prototype.destroy=function(){this.unWireEvents()},e}(),x=function(){function e(e){this.keyConfigs={escape:"escape"},this.parent=e,this.event=void 0,this.parent.element.tabIndex=-1===this.parent.element.tabIndex?0:this.parent.element.tabIndex;var t=document.getElementById(this.parent.element.id+"_drillthrough");this.drillThroughKeyboardModule=new sf.base.KeyboardEvents(t,{keyAction:this.keyActionHandler.bind(this),keyConfigs:this.keyConfigs,eventName:"keydown"})}return e.prototype.keyActionHandler=function(e){switch(e.action){case"escape":this.processClose(e)}},e.prototype.processClose=function(e){var t=e.target;if(t&&sf.base.closest(t,"."+c+"."+d)){var o=sf.base.closest(t,"."+c+"."+d).blazor__instance,r=this;if(o&&!o.closeOnEscape){var i=o.element.getAttribute("data-fieldName");o.dotNetRef.invokeMethodAsync("CloseDialog",{altKey:e.altKey,ctrlKey:e.ctrlKey,code:e.code,key:e.key,location:e.location,repeat:e.repeat,shiftKey:e.shiftKey,metaKey:e.metaKey,type:e.type}).then((function(){if(r.parent.parentElement)for(var t=0,o=[].slice.call(r.parent.parentElement.querySelectorAll(".e-pivot-button"));t<o.length;t++){var s=o[t];if(s.getAttribute("data-uid")===i){s.focus();break}}e.preventDefault()}))}else r.parent.closeDialog(sf.base.closest(t,"."+c+"."+d),e)}},e.prototype.destroy=function(){this.drillThroughKeyboardModule&&!this.drillThroughKeyboardModule.isDestroyed&&this.drillThroughKeyboardModule.destroy()},e}(),I=function(){function t(e,t,o,r){this.scrollPageInfo={rowCount:0,columnCount:0,colFirstLvl:0,rowFirstLvl:0,colStartPos:0,rowStartPos:0},this.verticalScrollScale=1,this.horizontalScrollScale=1,this.scrollerBrowserLimit=8e6,this.scrollPosObject={vertical:0,horizontal:0,verticalSection:0,horizontalSection:0,top:0,left:0,scrollDirection:{direction:"",position:0}},window.sfBlazor=window.sfBlazor,this.element=t,this.dotNetRef=r,this.dataId=e,window.sfBlazor.setCompInstance(this),this.getOptions(t,o),this.initModules()}return t.prototype.getOptions=function(e,t){this.element=e,this.options=t,this.parentElement=e,this.isAdaptive=sf.base.Browser.isDevice,this.internalGrid=t.internalGrid?window.sfBlazor.getCompInstance(t.internalGrid):this.internalGrid,this.pivotFieldListModule=t.fieldListModule?window.sfBlazor.getCompInstance(t.fieldListModule):this.pivotFieldListModule,this.fieldList=t.fieldList?t.fieldList:this.fieldList,this.dataSourceSettings=t.dataSourceSettings,this.gridSettings=t.gridSettings,this.editSettings=t.editSettings,this.displayOptions=t.displayOptions,this.enableValueSorting=t.enableValueSorting,this.currentView="Both"===this.displayOptions.view?this.displayOptions.primary:this.displayOptions.view,this.groupingBarSettings=this.options.groupingBarsettings,this.pageSettings=this.options.pageSettings,this.options.scrollPageInfo&&this.getScrollInfo(this.options.scrollPageInfo)},t.prototype.initModules=function(){this.options.showGroupingBar&&(this.groupingBarModule=new y(this)),this.options.showToolbar&&(this.toolbarModule=new S(this)),this.options.allowCalculatedField&&(this.calculatedFieldModule=new b(this)),this.options.enableVirtualization&&(this.virtualScrollModule=new L(this)),this.gridSettings.allowSelection&&(this.selectionModule=new B(this)),this.keyboardModule=new A(this),this.commonActionModule=new E(this),this.contentReady(),this.unWireEvents(),this.wireEvents()},t.prototype.updateModuleProperties=function(){this.options.showGroupingBar&&(this.groupingBarModule?this.groupingBarModule.parent=this.pivotButtonModule.parent=this:this.groupingBarModule=new y(this)),this.options.showToolbar&&(this.toolbarModule?this.toolbarModule.parent=this:this.toolbarModule=new S(this)),this.options.allowCalculatedField&&(this.calculatedFieldModule?this.calculatedFieldModule.parent=this:this.calculatedFieldModule=new b(this)),this.gridSettings.allowSelection&&(this.selectionModule?this.selectionModule.parent=this:this.selectionModule=new B(this)),this.options.enableVirtualization&&(this.virtualScrollModule?this.virtualScrollModule.parent=this:this.virtualScrollModule=new L(this)),this.editSettings.allowEditing&&this.drillThroughModule&&(this.drillThroughModule.parent=this),this.keyboardModule.parent=this.commonActionModule.parent=this.commonActionModule.keyboardModule.parent=this},t.prototype.getChartHeight=function(e){var t;return this.element.querySelector(".e-pivotchart")&&this.element.querySelector(".e-chart-grouping-bar")&&(this.element.querySelector(".e-chart-grouping-bar").style.width=this.element.querySelector(".e-pivotchart").style.width,e=this.element.querySelector(".e-chart-grouping-bar").clientHeight),this.options.showToolbar&&this.options.showGroupingBar?t=(e-(this.element.querySelector(".e-pivot-toolbar")?this.element.querySelector(".e-pivot-toolbar").clientHeight:42)-(this.element.querySelector(".e-chart-grouping-bar")?this.element.querySelector(".e-chart-grouping-bar").clientHeight:76)).toString():this.options.showToolbar?t=(e-(this.element.querySelector(".e-pivot-toolbar")?this.element.querySelector(".e-pivot-toolbar").clientHeight:42)).toString():this.options.showGroupingBar&&(t=(e-(this.element.querySelector(".e-chart-grouping-bar")?this.element.querySelector(".e-chart-grouping-bar").clientHeight:76)).toString()),t},t.prototype.contentReady=function(){if(this.updateModuleProperties(),this.options.renderGrid){if(this.options.showGroupingBar&&this.groupingBarModule)this.groupingBarModule.updatePivotButtons(),this.groupingBarModule.refreshUI();else if(this.element&&this.element.querySelectorAll(".e-axis-container").length>0)for(var e=0,t=[].slice.call(this.element.querySelectorAll(".e-axis-container"));e<t.length;e++){var o=t[e];sf.base.closest(o,".e-pivotfieldlist-container")||sf.base.remove(o)}this.options.enableVirtualization&&this.virtualScrollModule&&this.virtualScrollModule.addInternalEvents(),this.gridSettings.allowSelection&&this.selectionModule&&this.selectionModule.addInternalEvents()}},t.prototype.getSelectedCellDom=function(e){return e?JSON.stringify(window.sfBlazor.getDomObject("currentCell",e)):null},t.prototype.selectedCell=function(e,t,o){return o?this.getSelectedCellDom(this.element.querySelector("."+(0===e?"e-frozenheader":"e-movableheader")+' th[index="'+t+'"][aria-colindex="'+e+'"]')):this.getSelectedCellDom(this.element.querySelector("."+(0===e?"e-frozencontent":"e-movablecontent")+' td[index="'+t+'"][aria-colindex="'+e+'"]'))},t.prototype.hyperlinkCellclick=function(e,t){if(null!=e){e.currentCell=window.sfBlazor.getElementByXpath(t);var o=e.currentCell.getAttribute("data-url")?e.currentCell.getAttribute("data-url"):e.currentCell.querySelector("a").getAttribute("data-url");window.open(o)}},t.prototype.createSheet=function(e,t,o){var r=".format"+t+o;this.createStyleSheet().insertRule(r+", "+r+" .e-cellvalue{"+e+"}",0)},t.prototype.getScrollInfo=function(e){e&&(this.scrollPageInfo.colFirstLvl=e.colFirstLvl,this.scrollPageInfo.rowFirstLvl=e.rowFirstLvl,this.scrollPageInfo.columnCount=e.columnCount,this.scrollPageInfo.rowCount=e.rowCount,this.scrollPageInfo.colStartPos=e.colStartPos,this.scrollPageInfo.rowStartPos=e.rowStartPos)},t.prototype.exportDocument=function(e,t){if(navigator.msSaveBlob){for(var o=window.atob(t),r=new Uint8Array(o.length),i=0;i<o.length;i++)r[i]=o.charCodeAt(i);var s=new Blob([r.buffer],{type:"application/octet-stream"});navigator.msSaveBlob(s,e)}else{var l=document.createElement("a");l.download=e,l.href="data:application/octet-stream;base64,"+t,document.body.appendChild(l),l.click(),document.body.removeChild(l)}},t.prototype.createStyleSheet=function(){var e=document.createElement("style");return e.appendChild(document.createTextNode("")),document.head.appendChild(e),e.sheet},t.prototype.getSelectedCells=function(){for(var e=0,t=[].slice.call(this.element.querySelectorAll("."+h+",."+f));e<t.length;e++){var o=t[e],r=Number(o.getAttribute("aria-colindex")),i=Number(o.getAttribute("index")),s={};if(!sf.base.isNullOrUndefined(r)&&!sf.base.isNullOrUndefined(i))return s.index=i,s["aria-colindex"]=r,JSON.stringify(s)}return JSON.stringify([])},t.prototype.onContextMenuOpen=function(){if(this.options.allowGrouping&&this.lastCellClicked){var e=sf.base.closest(this.lastCellClicked,"td."+u+",th."+p);if(this.lastCellClicked=void 0,e&&!e.classList.contains("e-valuesheader")){var t=Number(e.getAttribute("aria-colindex")),o=Number(e.getAttribute("index")),r={};if(!sf.base.isNullOrUndefined(t)&&!sf.base.isNullOrUndefined(o))return r.index=o,r["aria-colindex"]=t,JSON.stringify(r)}return null}return null},t.prototype.mouseRclickHandler=function(e){this.lastCellClicked=e.target},t.prototype.mouseClickHandler=function(e){this.element.querySelectorAll(".e-btn-focused").length>0&&sf.base.removeClass(this.element.querySelectorAll(".e-btn-focused"),"e-btn-focused"),this.element.querySelector("."+l)&&this.element.querySelector("."+l).querySelectorAll(".e-menu-item.e-focused").length>0&&sf.base.removeClass(this.element.querySelector("."+l).querySelectorAll(".e-menu-item.e-focused"),"e-focused");var t=e.target;if(this.enableValueSorting&&"pivot"===this.options.dataType&&(t.classList.contains("e-sortfilterdiv")||t.classList.contains("e-stackedheadertext")||t.classList.contains("e-stackedheadercelldiv")||t.classList.contains("e-headertext")||t.classList.contains("e-stackedheadercelldiv")||t.classList.contains("e-headercelldiv")||t.classList.contains(o)||t.classList.contains("e-cellvalue")||t.classList.contains(p)||t.classList.contains(u)||t.classList.contains("e-pivotcell-container"))){if((s=sf.base.closest(t,"td."+u+",th."+p))&&(sf.base.closest(s,".e-movableheader")&&"column"===this.dataSourceSettings.valueAxis||sf.base.closest(s,"tr.e-row")&&"row"===this.dataSourceSettings.valueAxis&&(s.classList.contains(u)||s.classList.contains("e-stot")))){if(this.enableValueSorting){var r=Number(s.getAttribute("aria-colindex")),i=Number(s.getAttribute("index"));"column"===this.dataSourceSettings.valueAxis&&(this.dataSourceSettings.values.length>1||this.dataSourceSettings.alwaysShowValueHeader)&&(r=Number(s.getAttribute("aria-colindex"))+Number(s.getAttribute("aria-colspan"))-1),this.dotNetRef.invokeMethodAsync("MouseClickHandler",i,r)}e.preventDefault()}}else if(!this.gridSettings.allowSelection){var s;if(null!==(s=sf.base.closest(t,"td."+u+",th."+p+",td.e-rowcell"))){r=Number(s.getAttribute("aria-colindex")),i=Number(s.getAttribute("index"));t.classList.contains("e-expand")||t.classList.contains("e-collapse")||this.dotNetRef.invokeMethodAsync("CellClickedHandler",i,r,e)}}},t.prototype.getHeightAsNumber=function(){var e;return isNaN(this.options.height)?this.options.height.toString().indexOf("%")>-1?e=parseFloat(this.options.height.toString())/100*this.element.offsetHeight:this.options.height.toString().indexOf("px")>-1?e=Number(this.options.height.toString().split("px")[0]):"auto"===this.options.height&&(e=this.element.offsetHeight):e=Number(this.options.height),e<this.getminHeightAsNumber()&&(e=this.getminHeightAsNumber()),e},t.prototype.getminHeightAsNumber=function(){var e;return isNaN(this.options.minHeight)?this.options.minHeight.toString().indexOf("%")>-1?e=parseFloat(this.options.minHeight.toString())/100*this.element.offsetHeight:this.options.minHeight.toString().indexOf("px")>-1?e=Number(this.options.minHeight.toString().split("px")[0]):"auto"===this.options.minHeight&&(e=this.element.offsetHeight):e=300,e},t.prototype.calculateGridHeight=function(e,t,o){var r=this.options.height,i=this.getHeightAsNumber(),s=t*this.gridSettings.rowHeight;isNaN(i)&&(i=i>this.getminHeightAsNumber()?i:this.getminHeightAsNumber());var n=this.element.getBoundingClientRect(),a={width:n.width.toString(),height:n.height.toString(),gridHeight:r?r.toString():r};if("auto"===this.gridSettings.height&&i&&this.element.querySelector(".e-gridheader")){if(r=i-(o*this.gridSettings.rowHeight+(this.element.querySelector(".e-gridheader").offsetHeight-this.element.querySelector(".e-headercontent").offsetHeight)+(this.element.querySelector(".e-grouping-bar")?this.element.querySelector(".e-grouping-bar").offsetHeight:0)+(this.element.querySelector("."+l)?this.element.querySelector("."+l).clientHeight:0))-1,e){var c=this.internalGrid&&this.internalGrid.options&&!isNaN(this.internalGrid.options.height)?Number(this.internalGrid.options.height):this.element.querySelector(".e-movablecontent").offsetHeight,d=this.element.querySelector(".e-movablecontent ."+m).offsetWidth,u=this.element.querySelector(".e-movablecontent").offsetWidth<d;if(r>=s&&(!u||r>=c)&&!(c<s)&&!!!(u&&r-s<18))return a.gridHeight="auto",JSON.stringify(a)}else if(r>t*this.gridSettings.rowHeight)return a.gridHeight="auto",JSON.stringify(a)}else r=this.gridSettings.height;return a.gridHeight=r<this.gridSettings.rowHeight?this.gridSettings.rowHeight.toString():s<r?s.toString():r.toString(),JSON.stringify(a)},t.prototype.updateGridUI=function(e,t,o,r){if(t&&this.getOptions(e,t),this.options.showGroupingBar&&this.groupingBarModule)this.groupingBarModule.refreshUI();else{var i=e.querySelector(".e-frozenheader").querySelector(".e-columnheader");i&&i.querySelector(".e-rhandler")&&(i.style.height=i.querySelector(".e-rhandler").style.height="auto",i.style.height=i.querySelector(".e-rhandler").style.height=e.querySelector(".e-headercontent").offsetHeight+"px")}if(e.querySelector(".e-movableheader ."+m)&&"0px"===e.querySelector(".e-movableheader ."+m).style.width&&(e.querySelector(".e-movablecontent ."+m).style.width=e.querySelector(".e-movableheader ."+m).style.width=""),e.querySelector(".e-movableheader ."+m+" th.e-firstcell.e-lastcell")&&e.querySelector(".e-movableheader ."+m+" th.e-firstcell.e-lastcell").offsetWidth<=0){var s=e.querySelector(".e-movableheader ."+m+" colgroup").children,l=e.querySelector(".e-movablecontent ."+m+" colgroup").children,n=sf.base.formatUnit(this.options.gridSettings.columnWidth);s.length>1&&"auto"===s[s.length-1].style.width&&(s[s.length-1].style.width=n),l.length>1&&"auto"===l[l.length-1].style.width&&(l[l.length-1].style.width=n)}t&&this.virtualScrollModule&&this.virtualScrollModule.updateScrollInfo(e,o,r);var a=e.querySelector(".e-gridcontent .e-content");!a||a.scrollHeight>a.clientHeight||(sf.base.setStyleAttribute(a,{overflow:"hidden auto"}),e.querySelector(".e-gridheader")&&sf.base.setStyleAttribute(e.querySelector(".e-gridheader"),this.options.enableRtl?{paddingLeft:""}:{paddingRight:""}),e.querySelector(".e-headercontent")&&sf.base.setStyleAttribute(e.querySelector(".e-headercontent"),this.options.enableRtl?{borderLeftWidth:""}:{borderRightWidth:""}));var c=e.querySelector(".e-movablescrollbar"),d=c&&c.querySelector(".e-movablechild");!c||!d||Number(d.style.width.split("px")[0])>Number(c.style.width.split("px")[0])||(e.querySelector(".e-scrollbar").style.display="none",e.querySelector(".e-gridcontent .e-frozencontent").style.borderBottom="0px")},t.prototype.updateView=function(e,t){e&&(this.displayOptions=JSON.parse(t),"Both"===this.displayOptions.view&&"Table"===this.displayOptions.primary?(this.element.querySelector(".e-pivotchart").style.display="none",sf.base.select("#"+this.element.id+"_grid",this.element).style.display="",this.options.showGroupingBar&&this.element.querySelector(".e-pivotchart")&&this.element.querySelector(".e-chart-grouping-bar")&&(this.element.querySelector(".e-chart-grouping-bar").style.display="none",this.element.querySelector(".e-pivot-grouping-bar").style.display="")):"Both"===this.displayOptions.view&&"Chart"===this.displayOptions.primary&&(this.element.querySelector(".e-pivotchart").style.display="",sf.base.select("#"+this.element.id+"_grid",this.element).style.display="none",this.options.showGroupingBar&&this.element.querySelector(".e-pivot-grouping-bar")&&(this.element.querySelector(".e-pivot-grouping-bar").style.display="none",this.element.querySelector(".e-chart-grouping-bar").style.display="")))},t.prototype.updateGridSettings=function(e,t,o){e&&null!==t&&(this.gridSettings=JSON.parse(t)),o&&this.selectionModule&&this.selectionModule.clearSelection()},t.prototype.getClientWidth=function(e,t){return e&&null!==t?document.getElementById(t).clientWidth:null},t.prototype.getTableCellNode=function(e,t,o){if(e){var r=document.elementFromPoint(o,t);if(r){var i=Number(r.getAttribute("aria-colindex")),s=Number(r.getAttribute("index")),l={};if(i&&s)return l.index=s,l["aria-colindex"]=i,JSON.stringify(l)}}return null},t.prototype.updateColorPickerUI=function(t){if(t){for(var o=[].slice.call(t.querySelectorAll(".e-colorpicker-container.e-format-font-color-picker-container")),r=[].slice.call(t.querySelectorAll(".e-colorpicker-container.e-format-back-color-picker-container")),i=0,s=o;i<s.length;i++){var l=s[i];sf.base.addClass([l],["e-format-color-picker","e-format-font-color-picker"]),sf.base.addClass([l.querySelector(".e-colorpicker")],"e-format-font-color"),sf.base.addClass([l.querySelector(".e-selected-color")],e)}for(var n=0,a=r;n<a.length;n++){l=a[n];sf.base.addClass([l],"e-format-color-picker"),sf.base.addClass([l.querySelector(".e-colorpicker")],"e-format-back-color"),sf.base.addClass([l.querySelector(".e-selected-color")],e)}}},t.prototype.onWindowResize=function(){var e=this;this.isDestroyed||(clearTimeout(this.timeOutObj),this.timeOutObj=setTimeout((function(){var t=e.element.getBoundingClientRect();e.dotNetRef.invokeMethodAsync("LayoutRefresh",t.width,t.height)}),500))},t.prototype.drillthroughIntialize=function(e){e&&this.editSettings.allowEditing&&(this.drillThroughModule=new x(this))},t.prototype.closeDialog=function(e,t){return e.querySelector("."+g)?(e.querySelector("."+g).click(),void t.preventDefault()):e.querySelector(".e-cancel-btn")?(e.querySelector(".e-cancel-btn").click(),void t.preventDefault()):void 0},t.prototype.wireEvents=function(){sf.base.EventHandler.add(this.element,this.isAdaptive?"touchend":"click",this.mouseClickHandler,this),sf.base.EventHandler.add(this.element,this.isAdaptive?"touchend":"contextmenu",this.mouseRclickHandler,this),window.addEventListener("resize",this.onWindowResize.bind(this),!0)},t.prototype.unWireEvents=function(){sf.base.EventHandler.remove(this.element,this.isAdaptive?"touchend":"click",this.mouseClickHandler),sf.base.EventHandler.remove(this.element,this.isAdaptive?"touchend":"contextmenu",this.mouseRclickHandler),window.removeEventListener("resize",this.onWindowResize.bind(this),!0)},t.prototype.destroy=function(e){this.unWireEvents(),this.keyboardModule.destroy(),this.commonActionModule.destroy(),this.options.showGroupingBar&&(this.groupingBarModule.destroy(),this.pivotButtonModule.destroy()),this.options.showFieldList&&this.pivotFieldListModule&&!this.pivotFieldListModule.isDestroyed&&this.pivotFieldListModule.destroy(e),this.options.enableVirtualization&&this.virtualScrollModule&&this.virtualScrollModule.destroy(),this.gridSettings.allowSelection&&this.selectionModule&&this.selectionModule.destroy(),this.editSettings.allowEditing&&this.drillThroughModule&&this.drillThroughModule.destroy(),this.isDestroyed=e},t}();return{initialize:function(e,t,o,r){sf.base.enableBlazorMode(),new I(e,t,o,r)},initializeFieldList:function(e,t,o,r){sf.base.enableBlazorMode(),new q(e,t,o,r)},contentReady:function(e,t,o){var r=window.sfBlazor.getCompInstance(e);r&&r.element&&(r.options=t,r.getOptions(r.element,t),o||r.contentReady())},getChartHeight:function(e,t){var o=window.sfBlazor.getCompInstance(e);o&&o.element&&o.getChartHeight(t)},onShowFieldList:function(e,t){var o=window.sfBlazor.getCompInstance(e);o&&o.element&&o.onShowFieldList(o.element,document.getElementById(t))},removeFieldListIcon:function(e){var t=window.sfBlazor.getCompInstance(e);t&&t.element&&t.removeFieldListIcon(t.element)},updateFieldListIcons:function(e,t,o){var r=window.sfBlazor.getCompInstance(e);r&&r.element&&r.treeRendererModule.updateFieldListIcons(t,o)},setPivotButtonDraggable:function(e,t){var o=window.sfBlazor.getCompInstance(e);o&&o.element&&o.pivotButtonModule&&(o.options=t,o.getOptions(o.element,t),o.pivotButtonModule.createPivotButtonDrop(),o.pivotButtonModule.setPivotButtonDrag())},isFullRowElement:function(e,t,o){var r=window.sfBlazor.getCompInstance(e);return r&&r.element?r.commonActionModule.isFullRowElement(t,o):JSON.stringify(!1)},updateActiveNode:function(e,t,o){var r=!1,i=window.sfBlazor.getCompInstance(e);return i&&i.element&&(r=i.commonActionModule.updateActiveNode(document.getElementById(t),o)),JSON.stringify(r)},updateSelectedNodes:function(e,t,o){var r=window.sfBlazor.getCompInstance(e);r&&r.element&&r.updateSelectedNodes(window.sfBlazor.getElementByXpath(t),o)},updateFieldList:function(e,t){var o=window.sfBlazor.getCompInstance(e);o&&o.element&&o.updateFieldList(document.getElementById(t))},renderToolbar:function(e){var t=window.sfBlazor.getCompInstance(e);t&&t.element&&t.toolbarModule.renderToolbar()},focusToolBar:function(e){var t=window.sfBlazor.getCompInstance(e);t&&t.element&&t.toolbarModule.focusToolBar()},getButtonPosition:function(e,t,o){var r=window.sfBlazor.getCompInstance(e);return r&&r.element?JSON.stringify(r.pivotButtonModule.getButtonPosition(window.sfBlazor.getElementByXpath(t),o)):null},selectInputRange:function(e,t){var o=window.sfBlazor.getCompInstance(e);o&&o.element&&o.toolbarModule.selectInputRange(document.getElementById(t))},copyMdxQuery:function(e,t){var o=window.sfBlazor.getCompInstance(e);o&&o.element&&o.toolbarModule.copyMdxQuery(document.getElementById(t))},validateInputs:function(e,t){var o=window.sfBlazor.getCompInstance(e);o&&o.element&&o.commonActionModule.validateInputs(t)},selectedCell:function(e,t,o,r){var i=window.sfBlazor.getCompInstance(e);if(i&&i.element)return i.selectedCell(t,o,r)},hyperlinkCellclick:function(e,t,o){var r=window.sfBlazor.getCompInstance(e);r&&r.element&&r.hyperlinkCellclick(JSON.parse(t),JSON.parse(o))},updateEditOptions:function(e,t){var o=window.sfBlazor.getCompInstance(e);o&&o.element&&o.calculatedFieldModule.updateEditOptions(t)},accordionClick:function(e,t,o,r){var i=window.sfBlazor.getCompInstance(e);if(i&&i.element)return i.calculatedFieldModule.accordionClick(t,o,r)},getAccordionValue:function(e){var t=window.sfBlazor.getCompInstance(e);if(t&&t.element)return t.calculatedFieldModule.getAccordionValue()},updateAccordionLabel:function(e,t){var o=window.sfBlazor.getCompInstance(e);o&&o.element&&o.calculatedFieldModule.updateAccordionLabel(t)},getNodeLocation:function(e,t,o){var r=window.sfBlazor.getCompInstance(e);if(r&&r.element)return r.calculatedFieldModule.getNodeLocation(document.getElementById(t),o)},getIconInfo:function(e,t,o){var r=window.sfBlazor.getCompInstance(e);if(r&&r.element)return r.calculatedFieldModule.getIconInfo(t,o)},emptyFieldName:function(e){var t=window.sfBlazor.getCompInstance(e);t&&t.element&&t.calculatedFieldModule.emptyFieldName(t.element.id)},updateCalculatedFields:function(e,t,o,r,i){var s=window.sfBlazor.getCompInstance(e);s&&s.element&&s.calculatedFieldModule.editCalculatedFieldInfo(t,o,r,i)},updateCalculatedFieldExpandIcons:function(e,t,o){var r=window.sfBlazor.getCompInstance(e);return r&&r.element?r.calculatedFieldModule.updateNodeExpandIcons(document.getElementById(t),o):JSON.stringify(!1)},createFormulaDroppable:function(e,t,o,r,i,s,l,n){var a=window.sfBlazor.getCompInstance(e);a&&a.element&&a.calculatedFieldModule.createFormulaDroppable(t,o,r,i,s,l,n)},createSheet:function(e,t,o,r){var i=window.sfBlazor.getCompInstance(e);i&&i.element&&i.createSheet(t,o,r)},updateScrollInfo:function(e,t,o){var r=window.sfBlazor.getCompInstance(e);r&&r.element&&r.virtualScrollModule.updateScrollInfo(r.element,t,o)},getScrollInfo:function(e,t){var o=window.sfBlazor.getCompInstance(e);o&&o.element&&o.getScrollInfo(t)},exportDocument:function(e,t,o){var r=window.sfBlazor.getCompInstance(e);r&&r.element&&r.exportDocument(t,o)},calculateGridHeight:function(e,t,o,r){var i=window.sfBlazor.getCompInstance(e);return i&&i.element?i.calculateGridHeight(t,o,r):null},onContextMenuOpen:function(e){var t=window.sfBlazor.getCompInstance(e);return t&&t.element?t.onContextMenuOpen():null},getSelectedCells:function(e){var t=window.sfBlazor.getCompInstance(e);return t&&t.element?t.getSelectedCells():null},updateGridUI:function(e,t,o,r){var i=window.sfBlazor.getCompInstance(e);i&&i.element&&i.updateGridUI(i.element,t,o,r)},updateView:function(e,t){var o=window.sfBlazor.getCompInstance(e);o&&o.element&&o.updateView(o.element,t)},updateGridSettings:function(e,t,o){var r=window.sfBlazor.getCompInstance(e);r&&r.element&&r.updateGridSettings(r.element,t,o)},getClientWidth:function(e,t){var o=window.sfBlazor.getCompInstance(e);return o&&o.element?o.getClientWidth(o.element,t):null},getTableCellNode:function(e,t,o){var r=window.sfBlazor.getCompInstance(e);return r&&r.element?r.getTableCellNode(r.element,t,o):null},updateColorPickerUI:function(e,t){var o=window.sfBlazor.getCompInstance(e);if(o&&o.element)return o.updateColorPickerUI(document.getElementById(t))},drillthroughIntialize:function(e){var t=window.sfBlazor.getCompInstance(e);t&&t.element&&t.drillthroughIntialize(t.element)},getElementInfo:function(e){var t=window.sfBlazor.getCompInstance(e);if(t&&t.element){var o=t.element.getBoundingClientRect(),r={};return r.width=o.width,r.height=o.height,JSON.stringify(r)}return null},getAggregateIcoPosition:function(e,t){var o=window.sfBlazor.getCompInstance(e);return o&&o.element?o.commonActionModule.getAggregateIcoPosition(t):null},destroy:function(e,t){var o=window.sfBlazor.getCompInstance(e);o&&o.element&&o.destroy(t)}}}()}}]);(async()=>{await import(`${document.baseURI}_content/Syncfusion.Blazor/scripts/syncfusion-blazor-base.min.js?v=20.4.38`).then(()=>{sfBlazor.loadDependencies('sfpivotview');})})();